const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Auth-3oBDc3zF.js","assets/vendor-BZYaQHyI.js","assets/utils-CsqPS4kC.js","assets/ui-DGJ538yy.js","assets/Onboarding-fBLoyBsW.js","assets/ProfileSetup-BYM9YX3U.js"])))=>i.map(i=>d[i]);
import{a as Tv,b as Ev,r as j,j as u,m as St,R as yi,A as ri,c as Cv,g as hu,N as ho,B as jv,d as Av,e as tu}from"./vendor-BZYaQHyI.js";import{c as Mv,a as xo}from"./utils-CsqPS4kC.js";import{B as al,H as Gi,R as nl,S as Df,X as _i,a as Hf,F as Hp,M as cs,b as sl,C as Zp,c as qp,A as zv,N as _f,P as du,L as Pp,d as ll,G as Ov,e as Lv,T as Gp,f as yf,g as Dv,h as zn,U as Rv,i as Zf,j as Bv,k as kv,Q as Uv,l as Hv,I as po,m as Zv,n as qv,o as vo,p as Pv,q as Yp,r as Rf,s as So,t as qm,u as Bf,v as Gv,w as Yv,x as Vv,y as qf,z as Pf,D as Vp,E as Ip,J as Iv,K as xf,O as Xv,V as Qv,W as Kv,Y as Xp,Z as Pm,_ as Gm,$ as Jv,a0 as Fv,a1 as Ym,a2 as Wv,a3 as $v,a4 as t0,a5 as e0,a6 as i0}from"./ui-DGJ538yy.js";(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))m(v);new MutationObserver(v=>{for(const x of v)if(x.type==="childList")for(const b of x.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&m(b)}).observe(document,{childList:!0,subtree:!0});function d(v){const x={};return v.integrity&&(x.integrity=v.integrity),v.referrerPolicy&&(x.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?x.credentials="include":v.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function m(v){if(v.ep)return;v.ep=!0;const x=d(v);fetch(v.href,x)}})();var bf={exports:{}},mo={},wf={exports:{}},Sf={};var Vm;function n0(){return Vm||(Vm=1,(function(f){function h(z,tt){var K=z.length;z.push(tt);t:for(;0<K;){var At=K-1>>>1,st=z[At];if(0<v(st,tt))z[At]=tt,z[K]=st,K=At;else break t}}function d(z){return z.length===0?null:z[0]}function m(z){if(z.length===0)return null;var tt=z[0],K=z.pop();if(K!==tt){z[0]=K;t:for(var At=0,st=z.length,zt=st>>>1;At<zt;){var ft=2*(At+1)-1,ut=z[ft],gt=ft+1,Ct=z[gt];if(0>v(ut,K))gt<st&&0>v(Ct,ut)?(z[At]=Ct,z[gt]=K,At=gt):(z[At]=ut,z[ft]=K,At=ft);else if(gt<st&&0>v(Ct,K))z[At]=Ct,z[gt]=K,At=gt;else break t}}return tt}function v(z,tt){var K=z.sortIndex-tt.sortIndex;return K!==0?K:z.id-tt.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;f.unstable_now=function(){return x.now()}}else{var b=Date,k=b.now();f.unstable_now=function(){return b.now()-k}}var C=[],N=[],O=1,E=null,Z=3,P=!1,V=!1,B=!1,W=!1,J=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;function ot(z){for(var tt=d(N);tt!==null;){if(tt.callback===null)m(N);else if(tt.startTime<=z)m(N),tt.sortIndex=tt.expirationTime,h(C,tt);else break;tt=d(N)}}function Et(z){if(B=!1,ot(z),!V)if(d(C)!==null)V=!0,ht||(ht=!0,F());else{var tt=d(N);tt!==null&&rt(Et,tt.startTime-z)}}var ht=!1,Nt=-1,yt=5,mt=-1;function it(){return W?!0:!(f.unstable_now()-mt<yt)}function nt(){if(W=!1,ht){var z=f.unstable_now();mt=z;var tt=!0;try{t:{V=!1,B&&(B=!1,$(Nt),Nt=-1),P=!0;var K=Z;try{e:{for(ot(z),E=d(C);E!==null&&!(E.expirationTime>z&&it());){var At=E.callback;if(typeof At=="function"){E.callback=null,Z=E.priorityLevel;var st=At(E.expirationTime<=z);if(z=f.unstable_now(),typeof st=="function"){E.callback=st,ot(z),tt=!0;break e}E===d(C)&&m(C),ot(z)}else m(C);E=d(C)}if(E!==null)tt=!0;else{var zt=d(N);zt!==null&&rt(Et,zt.startTime-z),tt=!1}}break t}finally{E=null,Z=K,P=!1}tt=void 0}}finally{tt?F():ht=!1}}}var F;if(typeof lt=="function")F=function(){lt(nt)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,pt=at.port2;at.port1.onmessage=nt,F=function(){pt.postMessage(null)}}else F=function(){J(nt,0)};function rt(z,tt){Nt=J(function(){z(f.unstable_now())},tt)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(z){z.callback=null},f.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):yt=0<z?Math.floor(1e3/z):5},f.unstable_getCurrentPriorityLevel=function(){return Z},f.unstable_next=function(z){switch(Z){case 1:case 2:case 3:var tt=3;break;default:tt=Z}var K=Z;Z=tt;try{return z()}finally{Z=K}},f.unstable_requestPaint=function(){W=!0},f.unstable_runWithPriority=function(z,tt){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=Z;Z=z;try{return tt()}finally{Z=K}},f.unstable_scheduleCallback=function(z,tt,K){var At=f.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?At+K:At):K=At,z){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=K+st,z={id:O++,callback:tt,priorityLevel:z,startTime:K,expirationTime:st,sortIndex:-1},K>At?(z.sortIndex=K,h(N,z),d(C)===null&&z===d(N)&&(B?($(Nt),Nt=-1):B=!0,rt(Et,K-At))):(z.sortIndex=st,h(C,z),V||P||(V=!0,ht||(ht=!0,F()))),z},f.unstable_shouldYield=it,f.unstable_wrapCallback=function(z){var tt=Z;return function(){var K=Z;Z=tt;try{return z.apply(this,arguments)}finally{Z=K}}}})(Sf)),Sf}var Im;function a0(){return Im||(Im=1,wf.exports=n0()),wf.exports}var Xm;function s0(){if(Xm)return mo;Xm=1;var f=a0(),h=Tv(),d=Ev();function m(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function b(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function C(t){if(x(t)!==t)throw Error(m(188))}function N(t){var e=t.alternate;if(!e){if(e=x(t),e===null)throw Error(m(188));return e!==t?null:t}for(var n=t,s=e;;){var o=n.return;if(o===null)break;var r=o.alternate;if(r===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===r.child){for(r=o.child;r;){if(r===n)return C(o),t;if(r===s)return C(o),e;r=r.sibling}throw Error(m(188))}if(n.return!==s.return)n=o,s=r;else{for(var g=!1,y=o.child;y;){if(y===n){g=!0,n=o,s=r;break}if(y===s){g=!0,s=o,n=r;break}y=y.sibling}if(!g){for(y=r.child;y;){if(y===n){g=!0,n=r,s=o;break}if(y===s){g=!0,s=r,n=o;break}y=y.sibling}if(!g)throw Error(m(189))}}if(n.alternate!==s)throw Error(m(190))}if(n.tag!==3)throw Error(m(188));return n.stateNode.current===n?t:e}function O(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=O(t),e!==null)return e;t=t.sibling}return null}var E=Object.assign,Z=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),lt=Symbol.for("react.context"),ot=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),ht=Symbol.for("react.suspense_list"),Nt=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),mt=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=nt&&t[nt]||t["@@iterator"],typeof t=="function"?t:null)}var at=Symbol.for("react.client.reference");function pt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===at?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case J:return"Profiler";case W:return"StrictMode";case Et:return"Suspense";case ht:return"SuspenseList";case mt:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case lt:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case ot:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Nt:return e=t.displayName||null,e!==null?e:pt(t.type)||"Memo";case yt:e=t._payload,t=t._init;try{return pt(t(e))}catch{}}return null}var rt=Array.isArray,z=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},At=[],st=-1;function zt(t){return{current:t}}function ft(t){0>st||(t.current=At[st],At[st]=null,st--)}function ut(t,e){st++,At[st]=t.current,t.current=e}var gt=zt(null),Ct=zt(null),Y=zt(null),dt=zt(null);function vt(t,e){switch(ut(Y,e),ut(Ct,t),ut(gt,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?cm(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=cm(e),t=fm(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ft(gt),ut(gt,t)}function Gt(){ft(gt),ft(Ct),ft(Y)}function pe(t){t.memoizedState!==null&&ut(dt,t);var e=gt.current,n=fm(e,t.type);e!==n&&(ut(Ct,t),ut(gt,n))}function ye(t){Ct.current===t&&(ft(gt),ft(Ct)),dt.current===t&&(ft(dt),ro._currentValue=K)}var ce,ge;function Ke(t){if(ce===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ce=e&&e[1]||"",ge=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+t+ge}var re=!1;function Ee(t,e){if(!t||re)return"";re=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(q){var H=q}Reflect.construct(t,[],Q)}else{try{Q.call()}catch(q){H=q}t.call(Q.prototype)}}else{try{throw Error()}catch(q){H=q}(Q=t())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(q){if(q&&H&&typeof q.stack=="string")return[q.stack,H.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),g=r[0],y=r[1];if(g&&y){var S=g.split(`
`),R=y.split(`
`);for(o=s=0;s<S.length&&!S[s].includes("DetermineComponentFrameRoot");)s++;for(;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;if(s===S.length||o===R.length)for(s=S.length-1,o=R.length-1;1<=s&&0<=o&&S[s]!==R[o];)o--;for(;1<=s&&0<=o;s--,o--)if(S[s]!==R[o]){if(s!==1||o!==1)do if(s--,o--,0>o||S[s]!==R[o]){var G=`
`+S[s].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=s&&0<=o);break}}}finally{re=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ke(n):""}function On(t,e){switch(t.tag){case 26:case 27:case 5:return Ke(t.type);case 16:return Ke("Lazy");case 13:return t.child!==e&&e!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return Ee(t.type,!1);case 11:return Ee(t.type.render,!1);case 1:return Ee(t.type,!0);case 31:return Ke("Activity");default:return""}}function xi(t){try{var e="",n=null;do e+=On(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var ds=Object.prototype.hasOwnProperty,hs=f.unstable_scheduleCallback,wa=f.unstable_cancelCallback,Eo=f.unstable_shouldYield,Co=f.unstable_requestPaint,Ye=f.unstable_now,yu=f.unstable_getCurrentPriorityLevel,ms=f.unstable_ImmediatePriority,rl=f.unstable_UserBlockingPriority,Sa=f.unstable_NormalPriority,xu=f.unstable_LowPriority,ul=f.unstable_IdlePriority,jo=f.log,bu=f.unstable_setDisableYieldValue,Ln=null,De=null;function Oi(t){if(typeof jo=="function"&&bu(t),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Ln,t)}catch{}}var Ve=Math.clz32?Math.clz32:Su,Na=Math.log,wu=Math.LN2;function Su(t){return t>>>=0,t===0?32:31-(Na(t)/wu|0)|0}var Ta=256,Ea=262144,Ca=4194304;function on(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ps(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var o=0,r=t.suspendedLanes,g=t.pingedLanes;t=t.warmLanes;var y=s&134217727;return y!==0?(s=y&~r,s!==0?o=on(s):(g&=y,g!==0?o=on(g):n||(n=y&~t,n!==0&&(o=on(n))))):(y=s&~r,y!==0?o=on(y):g!==0?o=on(g):n||(n=s&~t,n!==0&&(o=on(n)))),o===0?0:e!==0&&e!==o&&(e&r)===0&&(r=o&-o,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:o}function ja(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Nu(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ao(){var t=Ca;return Ca<<=1,(Ca&62914560)===0&&(Ca=4194304),t}function cl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rn(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Tu(t,e,n,s,o,r){var g=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var y=t.entanglements,S=t.expirationTimes,R=t.hiddenUpdates;for(n=g&~n;0<n;){var G=31-Ve(n),Q=1<<G;y[G]=0,S[G]=-1;var H=R[G];if(H!==null)for(R[G]=null,G=0;G<H.length;G++){var q=H[G];q!==null&&(q.lane&=-536870913)}n&=~Q}s!==0&&Mo(t,s,0),r!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=r&~(g&~e))}function Mo(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Ve(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function zo(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ve(n),o=1<<s;o&e|t[s]&e&&(t[s]|=e),n&=~o}}function Oo(t,e){var n=e&-e;return n=(n&42)!==0?1:Je(n),(n&(t.suspendedLanes|e))!==0?0:n}function Je(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function bt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function fl(){var t=tt.p;return t!==0?t:(t=window.event,t===void 0?32:Dm(t.type))}function dl(t,e){var n=tt.p;try{return tt.p=t,e()}finally{tt.p=n}}var Li=Math.random().toString(36).slice(2),xe="__reactFiber$"+Li,Me="__reactProps$"+Li,un="__reactContainer$"+Li,Yi="__reactEvents$"+Li,Lo="__reactListeners$"+Li,Eu="__reactHandles$"+Li,Do="__reactResources$"+Li,Aa="__reactMarker$"+Li;function hl(t){delete t[xe],delete t[Me],delete t[Yi],delete t[Lo],delete t[Eu]}function cn(t){var e=t[xe];if(e)return e;for(var n=t.parentNode;n;){if(e=n[un]||n[xe]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_m(t);t!==null;){if(n=t[xe])return n;t=_m(t)}return e}t=n,n=t.parentNode}return null}function Dn(t){if(t=t[xe]||t[un]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Vi(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(m(33))}function Rn(t){var e=t[Do];return e||(e=t[Do]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function be(t){t[Aa]=!0}var Ro=new Set,Bo={};function fn(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(Bo[t]=e,t=0;t<e.length;t++)Ro.add(e[t])}var Ma=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ml={},pl={};function za(t){return ds.call(pl,t)?!0:ds.call(ml,t)?!1:Ma.test(t)?pl[t]=!0:(ml[t]=!0,!1)}function Bt(t,e,n){if(za(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Wt(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Fe(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Ce(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dn(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gl(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(g){n=""+g,r.call(this,g)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(g){n=""+g},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ot(t){if(!t._valueTracker){var e=dn(t)?"checked":"value";t._valueTracker=gl(t,e,""+t[e])}}function le(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=dn(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Bn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gs=/[\n"\\]/g;function ae(t){return t.replace(gs,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vl(t,e,n,s,o,r,g,y){t.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?t.type=g:t.removeAttribute("type"),e!=null?g==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Ce(e)):t.value!==""+Ce(e)&&(t.value=""+Ce(e)):g!=="submit"&&g!=="reset"||t.removeAttribute("value"),e!=null?Di(t,g,Ce(e)):n!=null?Di(t,g,Ce(n)):s!=null&&t.removeAttribute("value"),o==null&&r!=null&&(t.defaultChecked=!!r),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.name=""+Ce(y):t.removeAttribute("name")}function Oa(t,e,n,s,o,r,g,y){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){Ot(t);return}n=n!=null?""+Ce(n):"",e=e!=null?""+Ce(e):n,y||e===t.value||(t.value=e),t.defaultValue=e}s=s??o,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=y?t.checked:!!s,t.defaultChecked=!!s,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.name=g),Ot(t)}function Di(t,e,n){e==="number"&&Bn(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ie(t,e,n,s){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Ce(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,s&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Xi(t,e,n){if(e!=null&&(e=""+Ce(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Ce(n):""}function kn(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(m(92));if(rt(s)){if(1<s.length)throw Error(m(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Ce(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Ot(t)}function bi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _l=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Un(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||_l.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function vs(t,e,n){if(e!=null&&typeof e!="object")throw Error(m(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var o in e)s=e[o],e.hasOwnProperty(o)&&n[o]!==s&&Un(t,o,s)}else for(var r in e)e.hasOwnProperty(r)&&Un(t,r,e[r])}function La(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _s=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hn(t){return yl.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function We(){}var ys=null;function Da(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zn=null,Mt=null;function ui(t){var e=Dn(t);if(e&&(t=e.stateNode)){var n=t[Me]||null;t:switch(t=e.stateNode,e.type){case"input":if(vl(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ae(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var o=s[Me]||null;if(!o)throw Error(m(90));vl(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&le(s)}break t;case"textarea":Xi(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&ie(t,!!n.multiple,e,!1)}}}var Kt=!1;function xl(t,e,n){if(Kt)return t(e,n);Kt=!0;try{var s=t(e);return s}finally{if(Kt=!1,(Zn!==null||Mt!==null)&&(Or(),Zn&&(e=Zn,t=Mt,Mt=Zn=null,ui(e),t)))for(e=0;e<t.length;e++)ui(t[e])}}function hn(t,e){var n=t.stateNode;if(n===null)return null;var s=n[Me]||null;if(s===null)return null;n=s[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(m(231,e,typeof n));return n}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ra=!1;if(ci)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){Ra=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{Ra=!1}var wi=null,mn=null,fe=null;function Qi(){if(fe)return fe;var t,e=mn,n=e.length,s,o="value"in wi?wi.value:wi.textContent,r=o.length;for(t=0;t<n&&e[t]===o[t];t++);var g=n-t;for(s=1;s<=g&&e[n-s]===o[r-s];s++);return fe=o.slice(t,1<s?1-s:void 0)}function Ba(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ka(){return!0}function ko(){return!1}function Re(t){function e(n,s,o,r,g){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=r,this.target=g,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(n=t[y],this[y]=n?n(r):r[y]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ka:ko,this.isPropagationStopped=ko,this}return E(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ka)},persist:function(){},isPersistent:ka}),e}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xs=Re(Ri),qn=E({},Ri,{view:0,detail:0}),Zt=Re(qn),bl,Ie,Bi,Ua=E({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bi&&(Bi&&t.type==="mousemove"?(bl=t.screenX-Bi.screenX,Ie=t.screenY-Bi.screenY):Ie=bl=0,Bi=t),bl)},movementY:function(t){return"movementY"in t?t.movementY:Ie}}),Uo=Re(Ua),wl=E({},Ua,{dataTransfer:0}),Cu=Re(wl),Ho=E({},qn,{relatedTarget:0}),Sl=Re(Ho),ju=E({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),Nl=Re(ju),Au=E({},Ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Si=Re(Au),Mu=E({},Ri,{data:0}),Tl=Re(Mu),Ki={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function El(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qo[t])?!!e[t]:!1}function Cl(){return El}var Po=E({},qn,{key:function(t){if(t.key){var e=Ki[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ba(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zo[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cl,charCode:function(t){return t.type==="keypress"?Ba(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ba(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Go=Re(Po),zu=E({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yo=Re(zu),jl=E({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cl}),Ou=Re(jl),Vo=E({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Io=Re(Vo),bs=E({},Ua,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pn=Re(bs),Lu=E({},Ri,{newState:0,oldState:0}),Ha=Re(Lu),$e=[9,13,27,32],ws=ci&&"CompositionEvent"in window,Pn=null;ci&&"documentMode"in document&&(Pn=document.documentMode);var Du=ci&&"TextEvent"in window&&!Pn,Ss=ci&&(!ws||Pn&&8<Pn&&11>=Pn),Ns=" ",Xo=!1;function Qo(t,e){switch(t){case"keyup":return $e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Al(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gn=!1;function di(t,e){switch(t){case"compositionend":return Al(e);case"keypress":return e.which!==32?null:(Xo=!0,Ns);case"textInput":return t=e.data,t===Ns&&Xo?null:t;default:return null}}function Yn(t,e){if(Gn)return t==="compositionend"||!ws&&Qo(t,e)?(t=Qi(),fe=mn=wi=null,Gn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ss&&e.locale!=="ko"?null:e.data;default:return null}}var Ru={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ni(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ru[t.type]:e==="textarea"}function Ko(t,e,n,s){Zn?Mt?Mt.push(s):Mt=[s]:Zn=s,e=Hr(e,"onChange"),0<e.length&&(n=new xs("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Ti=null,Za=null;function qa(t){am(t,0)}function Pa(t){var e=Vi(t);if(le(e))return t}function Ga(t,e){if(t==="change")return e}var Jo=!1;if(ci){var Ei;if(ci){var Vn="oninput"in document;if(!Vn){var Fo=document.createElement("div");Fo.setAttribute("oninput","return;"),Vn=typeof Fo.oninput=="function"}Ei=Vn}else Ei=!1;Jo=Ei&&(!document.documentMode||9<document.documentMode)}function Ts(){Ti&&(Ti.detachEvent("onpropertychange",Wo),Za=Ti=null)}function Wo(t){if(t.propertyName==="value"&&Pa(Za)){var e=[];Ko(e,Za,t,Da(t)),xl(qa,e)}}function ki(t,e,n){t==="focusin"?(Ts(),Ti=e,Za=n,Ti.attachEvent("onpropertychange",Wo)):t==="focusout"&&Ts()}function Bu(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pa(Za)}function In(t,e){if(t==="click")return Pa(e)}function ku(t,e){if(t==="input"||t==="change")return Pa(e)}function Ui(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ze=typeof Object.is=="function"?Object.is:Ui;function Xn(t,e){if(ze(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!ds.call(e,o)||!ze(t[o],e[o]))return!1}return!0}function Es(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ya(t,e){var n=Es(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Es(n)}}function Cs(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cs(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Va(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Bn(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bn(t.document)}return e}function Ji(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var js=ci&&"documentMode"in document&&11>=document.documentMode,Fi=null,As=null,Ia=null,Qn=!1;function $o(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qn||Fi==null||Fi!==Bn(s)||(s=Fi,"selectionStart"in s&&Ji(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ia&&Xn(Ia,s)||(Ia=s,s=Hr(As,"onSelect"),0<s.length&&(e=new xs("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Fi)))}function Wi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Kn={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},Ms={},tr={};ci&&(tr=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function Oe(t){if(Ms[t])return Ms[t];if(!Kn[t])return t;var e=Kn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tr)return Ms[t]=e[n];return t}var Xa=Oe("animationend"),er=Oe("animationiteration"),Qa=Oe("animationstart"),Uu=Oe("transitionrun"),ir=Oe("transitionstart"),Hu=Oe("transitioncancel"),Jn=Oe("transitionend"),nr=new Map,$i="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$i.push("scrollEnd");function ti(t,e){nr.set(t,e),fn(e,[t])}var Ka=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ei=[],qe=0,zs=0;function Ja(){for(var t=qe,e=zs=qe=0;e<t;){var n=ei[e];ei[e++]=null;var s=ei[e];ei[e++]=null;var o=ei[e];ei[e++]=null;var r=ei[e];if(ei[e++]=null,s!==null&&o!==null){var g=s.pending;g===null?o.next=o:(o.next=g.next,g.next=o),s.pending=o}r!==0&&Fn(n,o,r)}}function tn(t,e,n,s){ei[qe++]=t,ei[qe++]=e,ei[qe++]=n,ei[qe++]=s,zs|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Ml(t,e,n,s){return tn(t,e,n,s),Fa(t)}function Ci(t,e){return tn(t,null,null,e),Fa(t)}function Fn(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var o=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(o=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,o&&e!==null&&(o=31-Ve(n),t=r.hiddenUpdates,s=t[o],s===null?t[o]=[e]:s.push(e),e.lane=n|536870912),r):null}function Fa(t){if(50<eo)throw eo=0,qc=null,Error(m(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var gn={};function Zu(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pe(t,e,n,s){return new Zu(t,e,n,s)}function Os(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ji(t,e){var n=t.alternate;return n===null?(n=Pe(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function zl(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Wa(t,e,n,s,o,r){var g=0;if(s=t,typeof t=="function")Os(t)&&(g=1);else if(typeof t=="string")g=hv(t,n,gt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case mt:return t=Pe(31,n,e,o),t.elementType=mt,t.lanes=r,t;case B:return vn(n.children,o,r,e);case W:g=8,o|=24;break;case J:return t=Pe(12,n,e,o|2),t.elementType=J,t.lanes=r,t;case Et:return t=Pe(13,n,e,o),t.elementType=Et,t.lanes=r,t;case ht:return t=Pe(19,n,e,o),t.elementType=ht,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lt:g=10;break t;case $:g=9;break t;case ot:g=11;break t;case Nt:g=14;break t;case yt:g=16,s=null;break t}g=29,n=Error(m(130,t===null?"null":typeof t,"")),s=null}return e=Pe(g,n,e,o),e.elementType=t,e.type=s,e.lanes=r,e}function vn(t,e,n,s){return t=Pe(7,t,s,e),t.lanes=n,t}function Ls(t,e,n){return t=Pe(6,t,null,e),t.lanes=n,t}function Ol(t){var e=Pe(18,null,null,0);return e.stateNode=t,e}function Ll(t,e,n){return e=Pe(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var i=new WeakMap;function a(t,e){if(typeof t=="object"&&t!==null){var n=i.get(t);return n!==void 0?n:(e={value:t,source:e,stack:xi(e)},i.set(t,e),e)}return{value:t,source:e,stack:xi(e)}}var l=[],c=0,p=null,_=0,w=[],M=0,U=null,X=1,ct="";function wt(t,e){l[c++]=_,l[c++]=p,p=t,_=e}function Dt(t,e,n){w[M++]=X,w[M++]=ct,w[M++]=U,U=t;var s=X;t=ct;var o=32-Ve(s)-1;s&=~(1<<o),n+=1;var r=32-Ve(e)+o;if(30<r){var g=o-o%5;r=(s&(1<<g)-1).toString(32),s>>=g,o-=g,X=1<<32-Ve(e)+o|n<<o|s,ct=r+t}else X=1<<r|n<<o|s,ct=t}function je(t){t.return!==null&&(wt(t,1),Dt(t,1,0))}function de(t){for(;t===p;)p=l[--c],l[c]=null,_=l[--c],l[c]=null;for(;t===U;)U=w[--M],w[M]=null,ct=w[--M],w[M]=null,X=w[--M],w[M]=null}function Xe(t,e){w[M++]=X,w[M++]=ct,w[M++]=U,X=e.id,ct=e.overflow,U=t}var Yt=null,Vt=null,kt=!1,en=null,ii=!1,Ds=Error(m(519));function nn(t){var e=Error(m(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $a(a(e,t)),Ds}function Dl(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[xe]=t,e[Me]=s,n){case"dialog":Ht("cancel",e),Ht("close",e);break;case"iframe":case"object":case"embed":Ht("load",e);break;case"video":case"audio":for(n=0;n<no.length;n++)Ht(no[n],e);break;case"source":Ht("error",e);break;case"img":case"image":case"link":Ht("error",e),Ht("load",e);break;case"details":Ht("toggle",e);break;case"input":Ht("invalid",e),Oa(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ht("invalid",e);break;case"textarea":Ht("invalid",e),kn(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||rm(e.textContent,n)?(s.popover!=null&&(Ht("beforetoggle",e),Ht("toggle",e)),s.onScroll!=null&&Ht("scroll",e),s.onScrollEnd!=null&&Ht("scrollend",e),s.onClick!=null&&(e.onclick=We),e=!0):e=!1,e||nn(t,!0)}function ue(t){for(Yt=t.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Yt=Yt.return}}function Hi(t){if(t!==Yt)return!1;if(!kt)return ue(t),kt=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||nf(t.type,t.memoizedProps)),n=!n),n&&Vt&&nn(t),ue(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(m(317));Vt=vm(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(m(317));Vt=vm(t)}else e===27?(e=Vt,fa(t.type)?(t=rf,rf=null,Vt=t):Vt=e):Vt=Yt?Mi(t.stateNode.nextSibling):null;return!0}function _n(){Vt=Yt=null,kt=!1}function Rl(){var t=en;return t!==null&&(li===null?li=t:li.push.apply(li,t),en=null),t}function $a(t){en===null?en=[t]:en.push(t)}var ts=zt(null),an=null,Zi=null;function Wn(t,e,n){ut(ts,e._currentValue),e._currentValue=n}function yn(t){t._currentValue=ts.current,ft(ts)}function qu(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Pu(t,e,n,s){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var r=o.dependencies;if(r!==null){var g=o.child;r=r.firstContext;t:for(;r!==null;){var y=r;r=o;for(var S=0;S<e.length;S++)if(y.context===e[S]){r.lanes|=n,y=r.alternate,y!==null&&(y.lanes|=n),qu(r.return,n,t),s||(g=null);break t}r=y.next}}else if(o.tag===18){if(g=o.return,g===null)throw Error(m(341));g.lanes|=n,r=g.alternate,r!==null&&(r.lanes|=n),qu(g,n,t),g=null}else g=o.child;if(g!==null)g.return=o;else for(g=o;g!==null;){if(g===t){g=null;break}if(o=g.sibling,o!==null){o.return=g.return,g=o;break}g=g.return}o=g}}function Rs(t,e,n,s){t=null;for(var o=e,r=!1;o!==null;){if(!r){if((o.flags&524288)!==0)r=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var g=o.alternate;if(g===null)throw Error(m(387));if(g=g.memoizedProps,g!==null){var y=o.type;ze(o.pendingProps.value,g.value)||(t!==null?t.push(y):t=[y])}}else if(o===dt.current){if(g=o.alternate,g===null)throw Error(m(387));g.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(ro):t=[ro])}o=o.return}t!==null&&Pu(e,t,n,s),e.flags|=262144}function ar(t){for(t=t.firstContext;t!==null;){if(!ze(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function es(t){an=t,Zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Be(t){return Xf(an,t)}function sr(t,e){return an===null&&es(t),Xf(t,e)}function Xf(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Zi===null){if(t===null)throw Error(m(308));Zi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Zi=Zi.next=e;return n}var ug=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},cg=f.unstable_scheduleCallback,fg=f.unstable_NormalPriority,we={$$typeof:lt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gu(){return{controller:new ug,data:new Map,refCount:0}}function Bl(t){t.refCount--,t.refCount===0&&cg(fg,function(){t.controller.abort()})}var kl=null,Yu=0,Bs=0,ks=null;function dg(t,e){if(kl===null){var n=kl=[];Yu=0,Bs=Xc(),ks={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Yu++,e.then(Qf,Qf),e}function Qf(){if(--Yu===0&&kl!==null){ks!==null&&(ks.status="fulfilled");var t=kl;kl=null,Bs=0,ks=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function hg(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(s.status="rejected",s.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),s}var Kf=z.S;z.S=function(t,e){Oh=Ye(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&dg(t,e),Kf!==null&&Kf(t,e)};var is=zt(null);function Vu(){var t=is.current;return t!==null?t:ne.pooledCache}function lr(t,e){e===null?ut(is,is.current):ut(is,e.pool)}function Jf(){var t=Vu();return t===null?null:{parent:we._currentValue,pool:t}}var Us=Error(m(460)),Iu=Error(m(474)),or=Error(m(542)),rr={then:function(){}};function Ff(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wf(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(We,We),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,td(t),t;default:if(typeof e.status=="string")e.then(We,We);else{if(t=ne,t!==null&&100<t.shellSuspendCounter)throw Error(m(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=s}},function(s){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,td(t),t}throw as=e,Us}}function ns(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(as=n,Us):n}}var as=null;function $f(){if(as===null)throw Error(m(459));var t=as;return as=null,t}function td(t){if(t===Us||t===or)throw Error(m(483))}var Hs=null,Ul=0;function ur(t){var e=Ul;return Ul+=1,Hs===null&&(Hs=[]),Wf(Hs,t,e)}function Hl(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function cr(t,e){throw e.$$typeof===Z?Error(m(525)):(t=Object.prototype.toString.call(e),Error(m(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ed(t){function e(A,T){if(t){var D=A.deletions;D===null?(A.deletions=[T],A.flags|=16):D.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function s(A){for(var T=new Map;A!==null;)A.key!==null?T.set(A.key,A):T.set(A.index,A),A=A.sibling;return T}function o(A,T){return A=ji(A,T),A.index=0,A.sibling=null,A}function r(A,T,D){return A.index=D,t?(D=A.alternate,D!==null?(D=D.index,D<T?(A.flags|=67108866,T):D):(A.flags|=67108866,T)):(A.flags|=1048576,T)}function g(A){return t&&A.alternate===null&&(A.flags|=67108866),A}function y(A,T,D,I){return T===null||T.tag!==6?(T=Ls(D,A.mode,I),T.return=A,T):(T=o(T,D),T.return=A,T)}function S(A,T,D,I){var Tt=D.type;return Tt===B?G(A,T,D.props.children,I,D.key):T!==null&&(T.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===yt&&ns(Tt)===T.type)?(T=o(T,D.props),Hl(T,D),T.return=A,T):(T=Wa(D.type,D.key,D.props,null,A.mode,I),Hl(T,D),T.return=A,T)}function R(A,T,D,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=Ll(D,A.mode,I),T.return=A,T):(T=o(T,D.children||[]),T.return=A,T)}function G(A,T,D,I,Tt){return T===null||T.tag!==7?(T=vn(D,A.mode,I,Tt),T.return=A,T):(T=o(T,D),T.return=A,T)}function Q(A,T,D){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Ls(""+T,A.mode,D),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case P:return D=Wa(T.type,T.key,T.props,null,A.mode,D),Hl(D,T),D.return=A,D;case V:return T=Ll(T,A.mode,D),T.return=A,T;case yt:return T=ns(T),Q(A,T,D)}if(rt(T)||F(T))return T=vn(T,A.mode,D,null),T.return=A,T;if(typeof T.then=="function")return Q(A,ur(T),D);if(T.$$typeof===lt)return Q(A,sr(A,T),D);cr(A,T)}return null}function H(A,T,D,I){var Tt=T!==null?T.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return Tt!==null?null:y(A,T,""+D,I);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case P:return D.key===Tt?S(A,T,D,I):null;case V:return D.key===Tt?R(A,T,D,I):null;case yt:return D=ns(D),H(A,T,D,I)}if(rt(D)||F(D))return Tt!==null?null:G(A,T,D,I,null);if(typeof D.then=="function")return H(A,T,ur(D),I);if(D.$$typeof===lt)return H(A,T,sr(A,D),I);cr(A,D)}return null}function q(A,T,D,I,Tt){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return A=A.get(D)||null,y(T,A,""+I,Tt);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case P:return A=A.get(I.key===null?D:I.key)||null,S(T,A,I,Tt);case V:return A=A.get(I.key===null?D:I.key)||null,R(T,A,I,Tt);case yt:return I=ns(I),q(A,T,D,I,Tt)}if(rt(I)||F(I))return A=A.get(D)||null,G(T,A,I,Tt,null);if(typeof I.then=="function")return q(A,T,D,ur(I),Tt);if(I.$$typeof===lt)return q(A,T,D,sr(T,I),Tt);cr(T,I)}return null}function _t(A,T,D,I){for(var Tt=null,It=null,xt=T,Rt=T=0,Pt=null;xt!==null&&Rt<D.length;Rt++){xt.index>Rt?(Pt=xt,xt=null):Pt=xt.sibling;var Xt=H(A,xt,D[Rt],I);if(Xt===null){xt===null&&(xt=Pt);break}t&&xt&&Xt.alternate===null&&e(A,xt),T=r(Xt,T,Rt),It===null?Tt=Xt:It.sibling=Xt,It=Xt,xt=Pt}if(Rt===D.length)return n(A,xt),kt&&wt(A,Rt),Tt;if(xt===null){for(;Rt<D.length;Rt++)xt=Q(A,D[Rt],I),xt!==null&&(T=r(xt,T,Rt),It===null?Tt=xt:It.sibling=xt,It=xt);return kt&&wt(A,Rt),Tt}for(xt=s(xt);Rt<D.length;Rt++)Pt=q(xt,A,Rt,D[Rt],I),Pt!==null&&(t&&Pt.alternate!==null&&xt.delete(Pt.key===null?Rt:Pt.key),T=r(Pt,T,Rt),It===null?Tt=Pt:It.sibling=Pt,It=Pt);return t&&xt.forEach(function(ga){return e(A,ga)}),kt&&wt(A,Rt),Tt}function jt(A,T,D,I){if(D==null)throw Error(m(151));for(var Tt=null,It=null,xt=T,Rt=T=0,Pt=null,Xt=D.next();xt!==null&&!Xt.done;Rt++,Xt=D.next()){xt.index>Rt?(Pt=xt,xt=null):Pt=xt.sibling;var ga=H(A,xt,Xt.value,I);if(ga===null){xt===null&&(xt=Pt);break}t&&xt&&ga.alternate===null&&e(A,xt),T=r(ga,T,Rt),It===null?Tt=ga:It.sibling=ga,It=ga,xt=Pt}if(Xt.done)return n(A,xt),kt&&wt(A,Rt),Tt;if(xt===null){for(;!Xt.done;Rt++,Xt=D.next())Xt=Q(A,Xt.value,I),Xt!==null&&(T=r(Xt,T,Rt),It===null?Tt=Xt:It.sibling=Xt,It=Xt);return kt&&wt(A,Rt),Tt}for(xt=s(xt);!Xt.done;Rt++,Xt=D.next())Xt=q(xt,A,Rt,Xt.value,I),Xt!==null&&(t&&Xt.alternate!==null&&xt.delete(Xt.key===null?Rt:Xt.key),T=r(Xt,T,Rt),It===null?Tt=Xt:It.sibling=Xt,It=Xt);return t&&xt.forEach(function(Nv){return e(A,Nv)}),kt&&wt(A,Rt),Tt}function ee(A,T,D,I){if(typeof D=="object"&&D!==null&&D.type===B&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case P:t:{for(var Tt=D.key;T!==null;){if(T.key===Tt){if(Tt=D.type,Tt===B){if(T.tag===7){n(A,T.sibling),I=o(T,D.props.children),I.return=A,A=I;break t}}else if(T.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===yt&&ns(Tt)===T.type){n(A,T.sibling),I=o(T,D.props),Hl(I,D),I.return=A,A=I;break t}n(A,T);break}else e(A,T);T=T.sibling}D.type===B?(I=vn(D.props.children,A.mode,I,D.key),I.return=A,A=I):(I=Wa(D.type,D.key,D.props,null,A.mode,I),Hl(I,D),I.return=A,A=I)}return g(A);case V:t:{for(Tt=D.key;T!==null;){if(T.key===Tt)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){n(A,T.sibling),I=o(T,D.children||[]),I.return=A,A=I;break t}else{n(A,T);break}else e(A,T);T=T.sibling}I=Ll(D,A.mode,I),I.return=A,A=I}return g(A);case yt:return D=ns(D),ee(A,T,D,I)}if(rt(D))return _t(A,T,D,I);if(F(D)){if(Tt=F(D),typeof Tt!="function")throw Error(m(150));return D=Tt.call(D),jt(A,T,D,I)}if(typeof D.then=="function")return ee(A,T,ur(D),I);if(D.$$typeof===lt)return ee(A,T,sr(A,D),I);cr(A,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,T!==null&&T.tag===6?(n(A,T.sibling),I=o(T,D),I.return=A,A=I):(n(A,T),I=Ls(D,A.mode,I),I.return=A,A=I),g(A)):n(A,T)}return function(A,T,D,I){try{Ul=0;var Tt=ee(A,T,D,I);return Hs=null,Tt}catch(xt){if(xt===Us||xt===or)throw xt;var It=Pe(29,xt,null,A.mode);return It.lanes=I,It.return=A,It}}}var ss=ed(!0),id=ed(!1),$n=!1;function Xu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qu(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ta(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ea(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(Qt&2)!==0){var o=s.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),s.pending=e,e=Fa(t),Fn(t,null,n),e}return tn(t,s,e,n),Fa(t)}function Zl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zo(t,n)}}function Ku(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var g={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?o=r=g:r=r.next=g,n=n.next}while(n!==null);r===null?o=r=e:r=r.next=e}else o=r=e;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Ju=!1;function ql(){if(Ju){var t=ks;if(t!==null)throw t}}function Pl(t,e,n,s){Ju=!1;var o=t.updateQueue;$n=!1;var r=o.firstBaseUpdate,g=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var S=y,R=S.next;S.next=null,g===null?r=R:g.next=R,g=S;var G=t.alternate;G!==null&&(G=G.updateQueue,y=G.lastBaseUpdate,y!==g&&(y===null?G.firstBaseUpdate=R:y.next=R,G.lastBaseUpdate=S))}if(r!==null){var Q=o.baseState;g=0,G=R=S=null,y=r;do{var H=y.lane&-536870913,q=H!==y.lane;if(q?(qt&H)===H:(s&H)===H){H!==0&&H===Bs&&(Ju=!0),G!==null&&(G=G.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});t:{var _t=t,jt=y;H=e;var ee=n;switch(jt.tag){case 1:if(_t=jt.payload,typeof _t=="function"){Q=_t.call(ee,Q,H);break t}Q=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=jt.payload,H=typeof _t=="function"?_t.call(ee,Q,H):_t,H==null)break t;Q=E({},Q,H);break t;case 2:$n=!0}}H=y.callback,H!==null&&(t.flags|=64,q&&(t.flags|=8192),q=o.callbacks,q===null?o.callbacks=[H]:q.push(H))}else q={lane:H,tag:y.tag,payload:y.payload,callback:y.callback,next:null},G===null?(R=G=q,S=Q):G=G.next=q,g|=H;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;q=y,y=q.next,q.next=null,o.lastBaseUpdate=q,o.shared.pending=null}}while(!0);G===null&&(S=Q),o.baseState=S,o.firstBaseUpdate=R,o.lastBaseUpdate=G,r===null&&(o.shared.lanes=0),la|=g,t.lanes=g,t.memoizedState=Q}}function nd(t,e){if(typeof t!="function")throw Error(m(191,t));t.call(e)}function ad(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)nd(n[t],e)}var Zs=zt(null),fr=zt(0);function sd(t,e){t=jn,ut(fr,t),ut(Zs,e),jn=t|e.baseLanes}function Fu(){ut(fr,jn),ut(Zs,Zs.current)}function Wu(){jn=fr.current,ft(Zs),ft(fr)}var hi=zt(null),Ai=null;function ia(t){var e=t.alternate;ut(ve,ve.current&1),ut(hi,t),Ai===null&&(e===null||Zs.current!==null||e.memoizedState!==null)&&(Ai=t)}function $u(t){ut(ve,ve.current),ut(hi,t),Ai===null&&(Ai=t)}function ld(t){t.tag===22?(ut(ve,ve.current),ut(hi,t),Ai===null&&(Ai=t)):na()}function na(){ut(ve,ve.current),ut(hi,hi.current)}function mi(t){ft(hi),Ai===t&&(Ai=null),ft(ve)}var ve=zt(0);function dr(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||lf(n)||of(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xn=0,Lt=null,$t=null,Se=null,hr=!1,qs=!1,ls=!1,mr=0,Gl=0,Ps=null,mg=0;function he(){throw Error(m(321))}function tc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ze(t[n],e[n]))return!1;return!0}function ec(t,e,n,s,o,r){return xn=r,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,z.H=t===null||t.memoizedState===null?Gd:gc,ls=!1,r=n(s,o),ls=!1,qs&&(r=rd(e,n,s,o)),od(t),r}function od(t){z.H=Il;var e=$t!==null&&$t.next!==null;if(xn=0,Se=$t=Lt=null,hr=!1,Gl=0,Ps=null,e)throw Error(m(300));t===null||Ne||(t=t.dependencies,t!==null&&ar(t)&&(Ne=!0))}function rd(t,e,n,s){Lt=t;var o=0;do{if(qs&&(Ps=null),Gl=0,qs=!1,25<=o)throw Error(m(301));if(o+=1,Se=$t=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}z.H=Yd,r=e(n,s)}while(qs);return r}function pg(){var t=z.H,e=t.useState()[0];return e=typeof e.then=="function"?Yl(e):e,t=t.useState()[0],($t!==null?$t.memoizedState:null)!==t&&(Lt.flags|=1024),e}function ic(){var t=mr!==0;return mr=0,t}function nc(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ac(t){if(hr){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}hr=!1}xn=0,Se=$t=Lt=null,qs=!1,Gl=mr=0,Ps=null}function Qe(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?Lt.memoizedState=Se=t:Se=Se.next=t,Se}function _e(){if($t===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=Se===null?Lt.memoizedState:Se.next;if(e!==null)Se=e,$t=t;else{if(t===null)throw Lt.alternate===null?Error(m(467)):Error(m(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Se===null?Lt.memoizedState=Se=t:Se=Se.next=t}return Se}function pr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yl(t){var e=Gl;return Gl+=1,Ps===null&&(Ps=[]),t=Wf(Ps,t,e),e=Lt,(Se===null?e.memoizedState:Se.next)===null&&(e=e.alternate,z.H=e===null||e.memoizedState===null?Gd:gc),t}function gr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Yl(t);if(t.$$typeof===lt)return Be(t)}throw Error(m(438,String(t)))}function sc(t){var e=null,n=Lt.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=Lt.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=pr(),Lt.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=it;return e.index++,n}function bn(t,e){return typeof e=="function"?e(t):e}function vr(t){var e=_e();return lc(e,$t,t)}function lc(t,e,n){var s=t.queue;if(s===null)throw Error(m(311));s.lastRenderedReducer=n;var o=t.baseQueue,r=s.pending;if(r!==null){if(o!==null){var g=o.next;o.next=r.next,r.next=g}e.baseQueue=o=r,s.pending=null}if(r=t.baseState,o===null)t.memoizedState=r;else{e=o.next;var y=g=null,S=null,R=e,G=!1;do{var Q=R.lane&-536870913;if(Q!==R.lane?(qt&Q)===Q:(xn&Q)===Q){var H=R.revertLane;if(H===0)S!==null&&(S=S.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),Q===Bs&&(G=!0);else if((xn&H)===H){R=R.next,H===Bs&&(G=!0);continue}else Q={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(y=S=Q,g=r):S=S.next=Q,Lt.lanes|=H,la|=H;Q=R.action,ls&&n(r,Q),r=R.hasEagerState?R.eagerState:n(r,Q)}else H={lane:Q,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},S===null?(y=S=H,g=r):S=S.next=H,Lt.lanes|=Q,la|=Q;R=R.next}while(R!==null&&R!==e);if(S===null?g=r:S.next=y,!ze(r,t.memoizedState)&&(Ne=!0,G&&(n=ks,n!==null)))throw n;t.memoizedState=r,t.baseState=g,t.baseQueue=S,s.lastRenderedState=r}return o===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function oc(t){var e=_e(),n=e.queue;if(n===null)throw Error(m(311));n.lastRenderedReducer=t;var s=n.dispatch,o=n.pending,r=e.memoizedState;if(o!==null){n.pending=null;var g=o=o.next;do r=t(r,g.action),g=g.next;while(g!==o);ze(r,e.memoizedState)||(Ne=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function ud(t,e,n){var s=Lt,o=_e(),r=kt;if(r){if(n===void 0)throw Error(m(407));n=n()}else n=e();var g=!ze(($t||o).memoizedState,n);if(g&&(o.memoizedState=n,Ne=!0),o=o.queue,cc(dd.bind(null,s,o,t),[t]),o.getSnapshot!==e||g||Se!==null&&Se.memoizedState.tag&1){if(s.flags|=2048,Gs(9,{destroy:void 0},fd.bind(null,s,o,n,e),null),ne===null)throw Error(m(349));r||(xn&127)!==0||cd(s,e,n)}return n}function cd(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Lt.updateQueue,e===null?(e=pr(),Lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fd(t,e,n,s){e.value=n,e.getSnapshot=s,hd(e)&&md(t)}function dd(t,e,n){return n(function(){hd(e)&&md(t)})}function hd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ze(t,n)}catch{return!0}}function md(t){var e=Ci(t,2);e!==null&&oi(e,t,2)}function rc(t){var e=Qe();if(typeof t=="function"){var n=t;if(t=n(),ls){Oi(!0);try{n()}finally{Oi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:t},e}function pd(t,e,n,s){return t.baseState=n,lc(t,$t,typeof s=="function"?s:bn)}function gg(t,e,n,s,o){if(xr(t))throw Error(m(485));if(t=e.action,t!==null){var r={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){r.listeners.push(g)}};z.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,gd(e,r)):(r.next=n.next,e.pending=n.next=r)}}function gd(t,e){var n=e.action,s=e.payload,o=t.state;if(e.isTransition){var r=z.T,g={};z.T=g;try{var y=n(o,s),S=z.S;S!==null&&S(g,y),vd(t,e,y)}catch(R){uc(t,e,R)}finally{r!==null&&g.types!==null&&(r.types=g.types),z.T=r}}else try{r=n(o,s),vd(t,e,r)}catch(R){uc(t,e,R)}}function vd(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){_d(t,e,s)},function(s){return uc(t,e,s)}):_d(t,e,n)}function _d(t,e,n){e.status="fulfilled",e.value=n,yd(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,gd(t,n)))}function uc(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,yd(e),e=e.next;while(e!==s)}t.action=null}function yd(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function xd(t,e){return e}function bd(t,e){if(kt){var n=ne.formState;if(n!==null){t:{var s=Lt;if(kt){if(Vt){e:{for(var o=Vt,r=ii;o.nodeType!==8;){if(!r){o=null;break e}if(o=Mi(o.nextSibling),o===null){o=null;break e}}r=o.data,o=r==="F!"||r==="F"?o:null}if(o){Vt=Mi(o.nextSibling),s=o.data==="F!";break t}}nn(s)}s=!1}s&&(e=n[0])}}return n=Qe(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:e},n.queue=s,n=Zd.bind(null,Lt,s),s.dispatch=n,s=rc(!1),r=pc.bind(null,Lt,!1,s.queue),s=Qe(),o={state:e,dispatch:null,action:t,pending:null},s.queue=o,n=gg.bind(null,Lt,o,r,n),o.dispatch=n,s.memoizedState=t,[e,n,!1]}function wd(t){var e=_e();return Sd(e,$t,t)}function Sd(t,e,n){if(e=lc(t,e,xd)[0],t=vr(bn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=Yl(e)}catch(g){throw g===Us?or:g}else s=e;e=_e();var o=e.queue,r=o.dispatch;return n!==e.memoizedState&&(Lt.flags|=2048,Gs(9,{destroy:void 0},vg.bind(null,o,n),null)),[s,r,t]}function vg(t,e){t.action=e}function Nd(t){var e=_e(),n=$t;if(n!==null)return Sd(e,n,t);_e(),e=e.memoizedState,n=_e();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function Gs(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=Lt.updateQueue,e===null&&(e=pr(),Lt.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function Td(){return _e().memoizedState}function _r(t,e,n,s){var o=Qe();Lt.flags|=t,o.memoizedState=Gs(1|e,{destroy:void 0},n,s===void 0?null:s)}function yr(t,e,n,s){var o=_e();s=s===void 0?null:s;var r=o.memoizedState.inst;$t!==null&&s!==null&&tc(s,$t.memoizedState.deps)?o.memoizedState=Gs(e,r,n,s):(Lt.flags|=t,o.memoizedState=Gs(1|e,r,n,s))}function Ed(t,e){_r(8390656,8,t,e)}function cc(t,e){yr(2048,8,t,e)}function _g(t){Lt.flags|=4;var e=Lt.updateQueue;if(e===null)e=pr(),Lt.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Cd(t){var e=_e().memoizedState;return _g({ref:e,nextImpl:t}),function(){if((Qt&2)!==0)throw Error(m(440));return e.impl.apply(void 0,arguments)}}function jd(t,e){return yr(4,2,t,e)}function Ad(t,e){return yr(4,4,t,e)}function Md(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zd(t,e,n){n=n!=null?n.concat([t]):null,yr(4,4,Md.bind(null,e,t),n)}function fc(){}function Od(t,e){var n=_e();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&tc(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Ld(t,e){var n=_e();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&tc(e,s[1]))return s[0];if(s=t(),ls){Oi(!0);try{t()}finally{Oi(!1)}}return n.memoizedState=[s,e],s}function dc(t,e,n){return n===void 0||(xn&1073741824)!==0&&(qt&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=Dh(),Lt.lanes|=t,la|=t,n)}function Dd(t,e,n,s){return ze(n,e)?n:Zs.current!==null?(t=dc(t,n,s),ze(t,e)||(Ne=!0),t):(xn&42)===0||(xn&1073741824)!==0&&(qt&261930)===0?(Ne=!0,t.memoizedState=n):(t=Dh(),Lt.lanes|=t,la|=t,e)}function Rd(t,e,n,s,o){var r=tt.p;tt.p=r!==0&&8>r?r:8;var g=z.T,y={};z.T=y,pc(t,!1,e,n);try{var S=o(),R=z.S;if(R!==null&&R(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var G=hg(S,s);Vl(t,e,G,vi(t))}else Vl(t,e,s,vi(t))}catch(Q){Vl(t,e,{then:function(){},status:"rejected",reason:Q},vi())}finally{tt.p=r,g!==null&&y.types!==null&&(g.types=y.types),z.T=g}}function yg(){}function hc(t,e,n,s){if(t.tag!==5)throw Error(m(476));var o=Bd(t).queue;Rd(t,o,e,K,n===null?yg:function(){return kd(t),n(s)})}function Bd(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:K},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function kd(t){var e=Bd(t);e.next===null&&(e=t.alternate.memoizedState),Vl(t,e.next.queue,{},vi())}function mc(){return Be(ro)}function Ud(){return _e().memoizedState}function Hd(){return _e().memoizedState}function xg(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=vi();t=ta(n);var s=ea(e,t,n);s!==null&&(oi(s,e,n),Zl(s,e,n)),e={cache:Gu()},t.payload=e;return}e=e.return}}function bg(t,e,n){var s=vi();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},xr(t)?qd(e,n):(n=Ml(t,e,n,s),n!==null&&(oi(n,t,s),Pd(n,e,s)))}function Zd(t,e,n){var s=vi();Vl(t,e,n,s)}function Vl(t,e,n,s){var o={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(xr(t))qd(e,o);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var g=e.lastRenderedState,y=r(g,n);if(o.hasEagerState=!0,o.eagerState=y,ze(y,g))return tn(t,e,o,0),ne===null&&Ja(),!1}catch{}if(n=Ml(t,e,o,s),n!==null)return oi(n,t,s),Pd(n,e,s),!0}return!1}function pc(t,e,n,s){if(s={lane:2,revertLane:Xc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},xr(t)){if(e)throw Error(m(479))}else e=Ml(t,n,s,2),e!==null&&oi(e,t,2)}function xr(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function qd(t,e){qs=hr=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Pd(t,e,n){if((n&4194048)!==0){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,zo(t,n)}}var Il={readContext:Be,use:gr,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he};Il.useEffectEvent=he;var Gd={readContext:Be,use:gr,useCallback:function(t,e){return Qe().memoizedState=[t,e===void 0?null:e],t},useContext:Be,useEffect:Ed,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,_r(4194308,4,Md.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _r(4194308,4,t,e)},useInsertionEffect:function(t,e){_r(4,2,t,e)},useMemo:function(t,e){var n=Qe();e=e===void 0?null:e;var s=t();if(ls){Oi(!0);try{t()}finally{Oi(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Qe();if(n!==void 0){var o=n(e);if(ls){Oi(!0);try{n(e)}finally{Oi(!1)}}}else o=e;return s.memoizedState=s.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},s.queue=t,t=t.dispatch=bg.bind(null,Lt,t),[s.memoizedState,t]},useRef:function(t){var e=Qe();return t={current:t},e.memoizedState=t},useState:function(t){t=rc(t);var e=t.queue,n=Zd.bind(null,Lt,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:fc,useDeferredValue:function(t,e){var n=Qe();return dc(n,t,e)},useTransition:function(){var t=rc(!1);return t=Rd.bind(null,Lt,t.queue,!0,!1),Qe().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=Lt,o=Qe();if(kt){if(n===void 0)throw Error(m(407));n=n()}else{if(n=e(),ne===null)throw Error(m(349));(qt&127)!==0||cd(s,e,n)}o.memoizedState=n;var r={value:n,getSnapshot:e};return o.queue=r,Ed(dd.bind(null,s,r,t),[t]),s.flags|=2048,Gs(9,{destroy:void 0},fd.bind(null,s,r,n,e),null),n},useId:function(){var t=Qe(),e=ne.identifierPrefix;if(kt){var n=ct,s=X;n=(s&~(1<<32-Ve(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=mr++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=mg++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:mc,useFormState:bd,useActionState:bd,useOptimistic:function(t){var e=Qe();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=pc.bind(null,Lt,!0,n),n.dispatch=e,[t,e]},useMemoCache:sc,useCacheRefresh:function(){return Qe().memoizedState=xg.bind(null,Lt)},useEffectEvent:function(t){var e=Qe(),n={impl:t};return e.memoizedState=n,function(){if((Qt&2)!==0)throw Error(m(440));return n.impl.apply(void 0,arguments)}}},gc={readContext:Be,use:gr,useCallback:Od,useContext:Be,useEffect:cc,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Ad,useMemo:Ld,useReducer:vr,useRef:Td,useState:function(){return vr(bn)},useDebugValue:fc,useDeferredValue:function(t,e){var n=_e();return Dd(n,$t.memoizedState,t,e)},useTransition:function(){var t=vr(bn)[0],e=_e().memoizedState;return[typeof t=="boolean"?t:Yl(t),e]},useSyncExternalStore:ud,useId:Ud,useHostTransitionStatus:mc,useFormState:wd,useActionState:wd,useOptimistic:function(t,e){var n=_e();return pd(n,$t,t,e)},useMemoCache:sc,useCacheRefresh:Hd};gc.useEffectEvent=Cd;var Yd={readContext:Be,use:gr,useCallback:Od,useContext:Be,useEffect:cc,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Ad,useMemo:Ld,useReducer:oc,useRef:Td,useState:function(){return oc(bn)},useDebugValue:fc,useDeferredValue:function(t,e){var n=_e();return $t===null?dc(n,t,e):Dd(n,$t.memoizedState,t,e)},useTransition:function(){var t=oc(bn)[0],e=_e().memoizedState;return[typeof t=="boolean"?t:Yl(t),e]},useSyncExternalStore:ud,useId:Ud,useHostTransitionStatus:mc,useFormState:Nd,useActionState:Nd,useOptimistic:function(t,e){var n=_e();return $t!==null?pd(n,$t,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:sc,useCacheRefresh:Hd};Yd.useEffectEvent=Cd;function vc(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:E({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _c={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=vi(),o=ta(s);o.payload=e,n!=null&&(o.callback=n),e=ea(t,o,s),e!==null&&(oi(e,t,s),Zl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=vi(),o=ta(s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ea(t,o,s),e!==null&&(oi(e,t,s),Zl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vi(),s=ta(n);s.tag=2,e!=null&&(s.callback=e),e=ea(t,s,n),e!==null&&(oi(e,t,n),Zl(e,t,n))}};function Vd(t,e,n,s,o,r,g){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,g):e.prototype&&e.prototype.isPureReactComponent?!Xn(n,s)||!Xn(o,r):!0}function Id(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&_c.enqueueReplaceState(e,e.state,null)}function os(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=E({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}function Xd(t){Ka(t)}function Qd(t){console.error(t)}function Kd(t){Ka(t)}function br(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Jd(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function yc(t,e,n){return n=ta(n),n.tag=3,n.payload={element:null},n.callback=function(){br(t,e)},n}function Fd(t){return t=ta(t),t.tag=3,t}function Wd(t,e,n,s){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var r=s.value;t.payload=function(){return o(r)},t.callback=function(){Jd(e,n,s)}}var g=n.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(t.callback=function(){Jd(e,n,s),typeof o!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var y=s.stack;this.componentDidCatch(s.value,{componentStack:y!==null?y:""})})}function wg(t,e,n,s,o){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Rs(e,n,o,!0),n=hi.current,n!==null){switch(n.tag){case 31:case 13:return Ai===null?Lr():n.alternate===null&&me===0&&(me=3),n.flags&=-257,n.flags|=65536,n.lanes=o,s===rr?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),Yc(t,s,o)),!1;case 22:return n.flags|=65536,s===rr?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),Yc(t,s,o)),!1}throw Error(m(435,n.tag))}return Yc(t,s,o),Lr(),!1}if(kt)return e=hi.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=o,s!==Ds&&(t=Error(m(422),{cause:s}),$a(a(t,n)))):(s!==Ds&&(e=Error(m(423),{cause:s}),$a(a(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,s=a(s,n),o=yc(t.stateNode,s,o),Ku(t,o),me!==4&&(me=2)),!1;var r=Error(m(520),{cause:s});if(r=a(r,n),to===null?to=[r]:to.push(r),me!==4&&(me=2),e===null)return!0;s=a(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=yc(n.stateNode,s,t),Ku(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(oa===null||!oa.has(r))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Fd(o),Wd(o,t,n,s),Ku(n,o),!1}n=n.return}while(n!==null);return!1}var xc=Error(m(461)),Ne=!1;function ke(t,e,n,s){e.child=t===null?id(e,null,n,s):ss(e,t.child,n,s)}function $d(t,e,n,s,o){n=n.render;var r=e.ref;if("ref"in s){var g={};for(var y in s)y!=="ref"&&(g[y]=s[y])}else g=s;return es(e),s=ec(t,e,n,g,r,o),y=ic(),t!==null&&!Ne?(nc(t,e,o),wn(t,e,o)):(kt&&y&&je(e),e.flags|=1,ke(t,e,s,o),e.child)}function th(t,e,n,s,o){if(t===null){var r=n.type;return typeof r=="function"&&!Os(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,eh(t,e,r,s,o)):(t=Wa(n.type,null,s,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!jc(t,o)){var g=r.memoizedProps;if(n=n.compare,n=n!==null?n:Xn,n(g,s)&&t.ref===e.ref)return wn(t,e,o)}return e.flags|=1,t=ji(r,s),t.ref=e.ref,t.return=e,e.child=t}function eh(t,e,n,s,o){if(t!==null){var r=t.memoizedProps;if(Xn(r,s)&&t.ref===e.ref)if(Ne=!1,e.pendingProps=s=r,jc(t,o))(t.flags&131072)!==0&&(Ne=!0);else return e.lanes=t.lanes,wn(t,e,o)}return bc(t,e,n,s,o)}function ih(t,e,n,s){var o=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((e.flags&128)!==0){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,o=0;s!==null;)o=o|s.lanes|s.childLanes,s=s.sibling;s=o&~r}else s=0,e.child=null;return nh(t,e,r,n,s)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&lr(e,r!==null?r.cachePool:null),r!==null?sd(e,r):Fu(),ld(e);else return s=e.lanes=536870912,nh(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?(lr(e,r.cachePool),sd(e,r),na(),e.memoizedState=null):(t!==null&&lr(e,null),Fu(),na());return ke(t,e,o,n),e.child}function Xl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function nh(t,e,n,s,o){var r=Vu();return r=r===null?null:{parent:we._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&lr(e,null),Fu(),ld(e),t!==null&&Rs(t,e,s,!0),e.childLanes=o,null}function wr(t,e){return e=Nr({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function ah(t,e,n){return ss(e,t.child,null,n),t=wr(e,e.pendingProps),t.flags|=2,mi(e),e.memoizedState=null,t}function Sg(t,e,n){var s=e.pendingProps,o=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(kt){if(s.mode==="hidden")return t=wr(e,s),e.lanes=536870912,Xl(null,t);if($u(e),(t=Vt)?(t=gm(t,ii),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:U!==null?{id:X,overflow:ct}:null,retryLane:536870912,hydrationErrors:null},n=Ol(t),n.return=e,e.child=n,Yt=e,Vt=null)):t=null,t===null)throw nn(e);return e.lanes=536870912,null}return wr(e,s)}var r=t.memoizedState;if(r!==null){var g=r.dehydrated;if($u(e),o)if(e.flags&256)e.flags&=-257,e=ah(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(m(558));else if(Ne||Rs(t,e,n,!1),o=(n&t.childLanes)!==0,Ne||o){if(s=ne,s!==null&&(g=Oo(s,n),g!==0&&g!==r.retryLane))throw r.retryLane=g,Ci(t,g),oi(s,t,g),xc;Lr(),e=ah(t,e,n)}else t=r.treeContext,Vt=Mi(g.nextSibling),Yt=e,kt=!0,en=null,ii=!1,t!==null&&Xe(e,t),e=wr(e,s),e.flags|=4096;return e}return t=ji(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Sr(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(m(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function bc(t,e,n,s,o){return es(e),n=ec(t,e,n,s,void 0,o),s=ic(),t!==null&&!Ne?(nc(t,e,o),wn(t,e,o)):(kt&&s&&je(e),e.flags|=1,ke(t,e,n,o),e.child)}function sh(t,e,n,s,o,r){return es(e),e.updateQueue=null,n=rd(e,s,n,o),od(t),s=ic(),t!==null&&!Ne?(nc(t,e,r),wn(t,e,r)):(kt&&s&&je(e),e.flags|=1,ke(t,e,n,r),e.child)}function lh(t,e,n,s,o){if(es(e),e.stateNode===null){var r=gn,g=n.contextType;typeof g=="object"&&g!==null&&(r=Be(g)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=_c,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},Xu(e),g=n.contextType,r.context=typeof g=="object"&&g!==null?Be(g):gn,r.state=e.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(vc(e,n,g,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(g=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),g!==r.state&&_c.enqueueReplaceState(r,r.state,null),Pl(e,s,r,o),ql(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var y=e.memoizedProps,S=os(n,y);r.props=S;var R=r.context,G=n.contextType;g=gn,typeof G=="object"&&G!==null&&(g=Be(G));var Q=n.getDerivedStateFromProps;G=typeof Q=="function"||typeof r.getSnapshotBeforeUpdate=="function",y=e.pendingProps!==y,G||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(y||R!==g)&&Id(e,r,s,g),$n=!1;var H=e.memoizedState;r.state=H,Pl(e,s,r,o),ql(),R=e.memoizedState,y||H!==R||$n?(typeof Q=="function"&&(vc(e,n,Q,s),R=e.memoizedState),(S=$n||Vd(e,n,S,s,H,R,g))?(G||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=R),r.props=s,r.state=R,r.context=g,s=S):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,Qu(t,e),g=e.memoizedProps,G=os(n,g),r.props=G,Q=e.pendingProps,H=r.context,R=n.contextType,S=gn,typeof R=="object"&&R!==null&&(S=Be(R)),y=n.getDerivedStateFromProps,(R=typeof y=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(g!==Q||H!==S)&&Id(e,r,s,S),$n=!1,H=e.memoizedState,r.state=H,Pl(e,s,r,o),ql();var q=e.memoizedState;g!==Q||H!==q||$n||t!==null&&t.dependencies!==null&&ar(t.dependencies)?(typeof y=="function"&&(vc(e,n,y,s),q=e.memoizedState),(G=$n||Vd(e,n,G,s,H,q,S)||t!==null&&t.dependencies!==null&&ar(t.dependencies))?(R||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,q,S),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,q,S)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||g===t.memoizedProps&&H===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&H===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=q),r.props=s,r.state=q,r.context=S,s=G):(typeof r.componentDidUpdate!="function"||g===t.memoizedProps&&H===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||g===t.memoizedProps&&H===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,Sr(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=ss(e,t.child,null,o),e.child=ss(e,null,n,o)):ke(t,e,n,o),e.memoizedState=r.state,t=e.child):t=wn(t,e,o),t}function oh(t,e,n,s){return _n(),e.flags|=256,ke(t,e,n,s),e.child}var wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sc(t){return{baseLanes:t,cachePool:Jf()}}function Nc(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=gi),t}function rh(t,e,n){var s=e.pendingProps,o=!1,r=(e.flags&128)!==0,g;if((g=r)||(g=t!==null&&t.memoizedState===null?!1:(ve.current&2)!==0),g&&(o=!0,e.flags&=-129),g=(e.flags&32)!==0,e.flags&=-33,t===null){if(kt){if(o?ia(e):na(),(t=Vt)?(t=gm(t,ii),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:U!==null?{id:X,overflow:ct}:null,retryLane:536870912,hydrationErrors:null},n=Ol(t),n.return=e,e.child=n,Yt=e,Vt=null)):t=null,t===null)throw nn(e);return of(t)?e.lanes=32:e.lanes=536870912,null}var y=s.children;return s=s.fallback,o?(na(),o=e.mode,y=Nr({mode:"hidden",children:y},o),s=vn(s,o,n,null),y.return=e,s.return=e,y.sibling=s,e.child=y,s=e.child,s.memoizedState=Sc(n),s.childLanes=Nc(t,g,n),e.memoizedState=wc,Xl(null,s)):(ia(e),Tc(e,y))}var S=t.memoizedState;if(S!==null&&(y=S.dehydrated,y!==null)){if(r)e.flags&256?(ia(e),e.flags&=-257,e=Ec(t,e,n)):e.memoizedState!==null?(na(),e.child=t.child,e.flags|=128,e=null):(na(),y=s.fallback,o=e.mode,s=Nr({mode:"visible",children:s.children},o),y=vn(y,o,n,null),y.flags|=2,s.return=e,y.return=e,s.sibling=y,e.child=s,ss(e,t.child,null,n),s=e.child,s.memoizedState=Sc(n),s.childLanes=Nc(t,g,n),e.memoizedState=wc,e=Xl(null,s));else if(ia(e),of(y)){if(g=y.nextSibling&&y.nextSibling.dataset,g)var R=g.dgst;g=R,s=Error(m(419)),s.stack="",s.digest=g,$a({value:s,source:null,stack:null}),e=Ec(t,e,n)}else if(Ne||Rs(t,e,n,!1),g=(n&t.childLanes)!==0,Ne||g){if(g=ne,g!==null&&(s=Oo(g,n),s!==0&&s!==S.retryLane))throw S.retryLane=s,Ci(t,s),oi(g,t,s),xc;lf(y)||Lr(),e=Ec(t,e,n)}else lf(y)?(e.flags|=192,e.child=t.child,e=null):(t=S.treeContext,Vt=Mi(y.nextSibling),Yt=e,kt=!0,en=null,ii=!1,t!==null&&Xe(e,t),e=Tc(e,s.children),e.flags|=4096);return e}return o?(na(),y=s.fallback,o=e.mode,S=t.child,R=S.sibling,s=ji(S,{mode:"hidden",children:s.children}),s.subtreeFlags=S.subtreeFlags&65011712,R!==null?y=ji(R,y):(y=vn(y,o,n,null),y.flags|=2),y.return=e,s.return=e,s.sibling=y,e.child=s,Xl(null,s),s=e.child,y=t.child.memoizedState,y===null?y=Sc(n):(o=y.cachePool,o!==null?(S=we._currentValue,o=o.parent!==S?{parent:S,pool:S}:o):o=Jf(),y={baseLanes:y.baseLanes|n,cachePool:o}),s.memoizedState=y,s.childLanes=Nc(t,g,n),e.memoizedState=wc,Xl(t.child,s)):(ia(e),n=t.child,t=n.sibling,n=ji(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(g=e.deletions,g===null?(e.deletions=[t],e.flags|=16):g.push(t)),e.child=n,e.memoizedState=null,n)}function Tc(t,e){return e=Nr({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Nr(t,e){return t=Pe(22,t,null,e),t.lanes=0,t}function Ec(t,e,n){return ss(e,t.child,null,n),t=Tc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uh(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),qu(t.return,e,n)}function Cc(t,e,n,s,o,r){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o,treeForkCount:r}:(g.isBackwards=e,g.rendering=null,g.renderingStartTime=0,g.last=s,g.tail=n,g.tailMode=o,g.treeForkCount=r)}function ch(t,e,n){var s=e.pendingProps,o=s.revealOrder,r=s.tail;s=s.children;var g=ve.current,y=(g&2)!==0;if(y?(g=g&1|2,e.flags|=128):g&=1,ut(ve,g),ke(t,e,s,n),s=kt?_:0,!y&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uh(t,n,e);else if(t.tag===19)uh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&dr(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Cc(e,!1,o,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&dr(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Cc(e,!0,n,null,r,s);break;case"together":Cc(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),la|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Rs(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(m(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function jc(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&ar(t)))}function Ng(t,e,n){switch(e.tag){case 3:vt(e,e.stateNode.containerInfo),Wn(e,we,t.memoizedState.cache),_n();break;case 27:case 5:pe(e);break;case 4:vt(e,e.stateNode.containerInfo);break;case 10:Wn(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,$u(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(ia(e),e.flags|=128,null):(n&e.child.childLanes)!==0?rh(t,e,n):(ia(e),t=wn(t,e,n),t!==null?t.sibling:null);ia(e);break;case 19:var o=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Rs(t,e,n,!1),s=(n&e.childLanes)!==0),o){if(s)return ch(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ut(ve,ve.current),s)break;return null;case 22:return e.lanes=0,ih(t,e,n,e.pendingProps);case 24:Wn(e,we,t.memoizedState.cache)}return wn(t,e,n)}function fh(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Ne=!0;else{if(!jc(t,n)&&(e.flags&128)===0)return Ne=!1,Ng(t,e,n);Ne=(t.flags&131072)!==0}else Ne=!1,kt&&(e.flags&1048576)!==0&&Dt(e,_,e.index);switch(e.lanes=0,e.tag){case 16:t:{var s=e.pendingProps;if(t=ns(e.elementType),e.type=t,typeof t=="function")Os(t)?(s=os(t,s),e.tag=1,e=lh(null,e,t,s,n)):(e.tag=0,e=bc(null,e,t,s,n));else{if(t!=null){var o=t.$$typeof;if(o===ot){e.tag=11,e=$d(null,e,t,s,n);break t}else if(o===Nt){e.tag=14,e=th(null,e,t,s,n);break t}}throw e=pt(t)||t,Error(m(306,e,""))}}return e;case 0:return bc(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,o=os(s,e.pendingProps),lh(t,e,s,o,n);case 3:t:{if(vt(e,e.stateNode.containerInfo),t===null)throw Error(m(387));s=e.pendingProps;var r=e.memoizedState;o=r.element,Qu(t,e),Pl(e,s,null,n);var g=e.memoizedState;if(s=g.cache,Wn(e,we,s),s!==r.cache&&Pu(e,[we],n,!0),ql(),s=g.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:g.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=oh(t,e,s,n);break t}else if(s!==o){o=a(Error(m(424)),e),$a(o),e=oh(t,e,s,n);break t}else for(t=e.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Vt=Mi(t.firstChild),Yt=e,kt=!0,en=null,ii=!0,n=id(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_n(),s===o){e=wn(t,e,n);break t}ke(t,e,s,n)}e=e.child}return e;case 26:return Sr(t,e),t===null?(n=wm(e.type,null,e.pendingProps,null))?e.memoizedState=n:kt||(n=e.type,t=e.pendingProps,s=Zr(Y.current).createElement(n),s[xe]=e,s[Me]=t,Ue(s,n,t),be(s),e.stateNode=s):e.memoizedState=wm(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return pe(e),t===null&&kt&&(s=e.stateNode=ym(e.type,e.pendingProps,Y.current),Yt=e,ii=!0,o=Vt,fa(e.type)?(rf=o,Vt=Mi(s.firstChild)):Vt=o),ke(t,e,e.pendingProps.children,n),Sr(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&kt&&((o=s=Vt)&&(s=tv(s,e.type,e.pendingProps,ii),s!==null?(e.stateNode=s,Yt=e,Vt=Mi(s.firstChild),ii=!1,o=!0):o=!1),o||nn(e)),pe(e),o=e.type,r=e.pendingProps,g=t!==null?t.memoizedProps:null,s=r.children,nf(o,r)?s=null:g!==null&&nf(o,g)&&(e.flags|=32),e.memoizedState!==null&&(o=ec(t,e,pg,null,null,n),ro._currentValue=o),Sr(t,e),ke(t,e,s,n),e.child;case 6:return t===null&&kt&&((t=n=Vt)&&(n=ev(n,e.pendingProps,ii),n!==null?(e.stateNode=n,Yt=e,Vt=null,t=!0):t=!1),t||nn(e)),null;case 13:return rh(t,e,n);case 4:return vt(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=ss(e,null,s,n):ke(t,e,s,n),e.child;case 11:return $d(t,e,e.type,e.pendingProps,n);case 7:return ke(t,e,e.pendingProps,n),e.child;case 8:return ke(t,e,e.pendingProps.children,n),e.child;case 12:return ke(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Wn(e,e.type,s.value),ke(t,e,s.children,n),e.child;case 9:return o=e.type._context,s=e.pendingProps.children,es(e),o=Be(o),s=s(o),e.flags|=1,ke(t,e,s,n),e.child;case 14:return th(t,e,e.type,e.pendingProps,n);case 15:return eh(t,e,e.type,e.pendingProps,n);case 19:return ch(t,e,n);case 31:return Sg(t,e,n);case 22:return ih(t,e,n,e.pendingProps);case 24:return es(e),s=Be(we),t===null?(o=Vu(),o===null&&(o=ne,r=Gu(),o.pooledCache=r,r.refCount++,r!==null&&(o.pooledCacheLanes|=n),o=r),e.memoizedState={parent:s,cache:o},Xu(e),Wn(e,we,o)):((t.lanes&n)!==0&&(Qu(t,e),Pl(e,null,null,n),ql()),o=t.memoizedState,r=e.memoizedState,o.parent!==s?(o={parent:s,cache:s},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),Wn(e,we,s)):(s=r.cache,Wn(e,we,s),s!==o.cache&&Pu(e,[we],n,!0))),ke(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(m(156,e.tag))}function Sn(t){t.flags|=4}function Ac(t,e,n,s,o){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(Uh())t.flags|=8192;else throw as=rr,Iu}else t.flags&=-16777217}function dh(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Cm(e))if(Uh())t.flags|=8192;else throw as=rr,Iu}function Tr(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Ao():536870912,t.lanes|=e,Xs|=e)}function Ql(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function se(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&65011712,s|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Tg(t,e,n){var s=e.pendingProps;switch(de(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(e),null;case 1:return se(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),yn(we),Gt(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Hi(e)?Sn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Rl())),se(e),null;case 26:var o=e.type,r=e.memoizedState;return t===null?(Sn(e),r!==null?(se(e),dh(e,r)):(se(e),Ac(e,o,null,s,n))):r?r!==t.memoizedState?(Sn(e),se(e),dh(e,r)):(se(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Sn(e),se(e),Ac(e,o,t,s,n)),null;case 27:if(ye(e),n=Y.current,o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Sn(e);else{if(!s){if(e.stateNode===null)throw Error(m(166));return se(e),null}t=gt.current,Hi(e)?Dl(e):(t=ym(o,s,n),e.stateNode=t,Sn(e))}return se(e),null;case 5:if(ye(e),o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Sn(e);else{if(!s){if(e.stateNode===null)throw Error(m(166));return se(e),null}if(r=gt.current,Hi(e))Dl(e);else{var g=Zr(Y.current);switch(r){case 1:r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=g.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=g.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?g.createElement("select",{is:s.is}):g.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?g.createElement(o,{is:s.is}):g.createElement(o)}}r[xe]=e,r[Me]=s;t:for(g=e.child;g!==null;){if(g.tag===5||g.tag===6)r.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break t;for(;g.sibling===null;){if(g.return===null||g.return===e)break t;g=g.return}g.sibling.return=g.return,g=g.sibling}e.stateNode=r;t:switch(Ue(r,o,s),o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Sn(e)}}return se(e),Ac(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Sn(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(m(166));if(t=Y.current,Hi(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,o=Yt,o!==null)switch(o.tag){case 27:case 5:s=o.memoizedProps}t[xe]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||rm(t.nodeValue,n)),t||nn(e,!0)}else t=Zr(t).createTextNode(s),t[xe]=e,e.stateNode=t}return se(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=Hi(e),n!==null){if(t===null){if(!s)throw Error(m(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(m(557));t[xe]=e}else _n(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;se(e),t=!1}else n=Rl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(mi(e),e):(mi(e),null);if((e.flags&128)!==0)throw Error(m(558))}return se(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=Hi(e),s!==null&&s.dehydrated!==null){if(t===null){if(!o)throw Error(m(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(m(317));o[xe]=e}else _n(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;se(e),o=!1}else o=Rl(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(mi(e),e):(mi(e),null)}return mi(e),(e.flags&128)!==0?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,o=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(o=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Tr(e,e.updateQueue),se(e),null);case 4:return Gt(),t===null&&Fc(e.stateNode.containerInfo),se(e),null;case 10:return yn(e.type),se(e),null;case 19:if(ft(ve),s=e.memoizedState,s===null)return se(e),null;if(o=(e.flags&128)!==0,r=s.rendering,r===null)if(o)Ql(s,!1);else{if(me!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(r=dr(t),r!==null){for(e.flags|=128,Ql(s,!1),t=r.updateQueue,e.updateQueue=t,Tr(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)zl(n,t),n=n.sibling;return ut(ve,ve.current&1|2),kt&&wt(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&Ye()>Mr&&(e.flags|=128,o=!0,Ql(s,!1),e.lanes=4194304)}else{if(!o)if(t=dr(r),t!==null){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,Tr(e,t),Ql(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!kt)return se(e),null}else 2*Ye()-s.renderingStartTime>Mr&&n!==536870912&&(e.flags|=128,o=!0,Ql(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=ve.current,ut(ve,o?n&1|2:n&1),kt&&wt(e,s.treeForkCount),t):(se(e),null);case 22:case 23:return mi(e),Wu(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?(n&536870912)!==0&&(e.flags&128)===0&&(se(e),e.subtreeFlags&6&&(e.flags|=8192)):se(e),n=e.updateQueue,n!==null&&Tr(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&ft(is),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),yn(we),se(e),null;case 25:return null;case 30:return null}throw Error(m(156,e.tag))}function Eg(t,e){switch(de(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yn(we),Gt(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ye(e),null;case 31:if(e.memoizedState!==null){if(mi(e),e.alternate===null)throw Error(m(340));_n()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(mi(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(m(340));_n()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft(ve),null;case 4:return Gt(),null;case 10:return yn(e.type),null;case 22:case 23:return mi(e),Wu(),t!==null&&ft(is),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return yn(we),null;case 25:return null;default:return null}}function hh(t,e){switch(de(e),e.tag){case 3:yn(we),Gt();break;case 26:case 27:case 5:ye(e);break;case 4:Gt();break;case 31:e.memoizedState!==null&&mi(e);break;case 13:mi(e);break;case 19:ft(ve);break;case 10:yn(e.type);break;case 22:case 23:mi(e),Wu(),t!==null&&ft(is);break;case 24:yn(we)}}function Kl(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var o=s.next;n=o;do{if((n.tag&t)===t){s=void 0;var r=n.create,g=n.inst;s=r(),g.destroy=s}n=n.next}while(n!==o)}}catch(y){Ft(e,e.return,y)}}function aa(t,e,n){try{var s=e.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var r=o.next;s=r;do{if((s.tag&t)===t){var g=s.inst,y=g.destroy;if(y!==void 0){g.destroy=void 0,o=e;var S=n,R=y;try{R()}catch(G){Ft(o,S,G)}}}s=s.next}while(s!==r)}}catch(G){Ft(e,e.return,G)}}function mh(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{ad(e,n)}catch(s){Ft(t,t.return,s)}}}function ph(t,e,n){n.props=os(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ft(t,e,s)}}function Jl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(o){Ft(t,e,o)}}function sn(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(o){Ft(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Ft(t,e,o)}else n.current=null}function gh(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break t;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(o){Ft(t,t.return,o)}}function Mc(t,e,n){try{var s=t.stateNode;Qg(s,t.type,n,e),s[Me]=e}catch(o){Ft(t,t.return,o)}}function vh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fa(t.type)||t.tag===4}function zc(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||vh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fa(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=We));else if(s!==4&&(s===27&&fa(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Oc(t,e,n),t=t.sibling;t!==null;)Oc(t,e,n),t=t.sibling}function Er(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&fa(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Er(t,e,n),t=t.sibling;t!==null;)Er(t,e,n),t=t.sibling}function _h(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);Ue(e,s,n),e[xe]=t,e[Me]=n}catch(r){Ft(t,t.return,r)}}var Nn=!1,Te=!1,Lc=!1,yh=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Cg(t,e){if(t=t.containerInfo,tf=Xr,t=Va(t),Ji(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break t}var g=0,y=-1,S=-1,R=0,G=0,Q=t,H=null;e:for(;;){for(var q;Q!==n||o!==0&&Q.nodeType!==3||(y=g+o),Q!==r||s!==0&&Q.nodeType!==3||(S=g+s),Q.nodeType===3&&(g+=Q.nodeValue.length),(q=Q.firstChild)!==null;)H=Q,Q=q;for(;;){if(Q===t)break e;if(H===n&&++R===o&&(y=g),H===r&&++G===s&&(S=g),(q=Q.nextSibling)!==null)break;Q=H,H=Q.parentNode}Q=q}n=y===-1||S===-1?null:{start:y,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(ef={focusedElem:t,selectionRange:n},Xr=!1,Le=e;Le!==null;)if(e=Le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Le=t;else for(;Le!==null;){switch(e=Le,r=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)o=t[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&r!==null){t=void 0,n=e,o=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var _t=os(n.type,o);t=s.getSnapshotBeforeUpdate(_t,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(jt){Ft(n,n.return,jt)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)sf(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":sf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(m(163))}if(t=e.sibling,t!==null){t.return=e.return,Le=t;break}Le=e.return}}function xh(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:En(t,n),s&4&&Kl(5,n);break;case 1:if(En(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(g){Ft(n,n.return,g)}else{var o=os(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(g){Ft(n,n.return,g)}}s&64&&mh(n),s&512&&Jl(n,n.return);break;case 3:if(En(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{ad(t,e)}catch(g){Ft(n,n.return,g)}}break;case 27:e===null&&s&4&&_h(n);case 26:case 5:En(t,n),e===null&&s&4&&gh(n),s&512&&Jl(n,n.return);break;case 12:En(t,n);break;case 31:En(t,n),s&4&&Sh(t,n);break;case 13:En(t,n),s&4&&Nh(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Bg.bind(null,n),iv(t,n))));break;case 22:if(s=n.memoizedState!==null||Nn,!s){e=e!==null&&e.memoizedState!==null||Te,o=Nn;var r=Te;Nn=s,(Te=e)&&!r?Cn(t,n,(n.subtreeFlags&8772)!==0):En(t,n),Nn=o,Te=r}break;case 30:break;default:En(t,n)}}function bh(t){var e=t.alternate;e!==null&&(t.alternate=null,bh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&hl(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var oe=null,ni=!1;function Tn(t,e,n){for(n=n.child;n!==null;)wh(t,e,n),n=n.sibling}function wh(t,e,n){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Ln,n)}catch{}switch(n.tag){case 26:Te||sn(n,e),Tn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Te||sn(n,e);var s=oe,o=ni;fa(n.type)&&(oe=n.stateNode,ni=!1),Tn(t,e,n),so(n.stateNode),oe=s,ni=o;break;case 5:Te||sn(n,e);case 6:if(s=oe,o=ni,oe=null,Tn(t,e,n),oe=s,ni=o,oe!==null)if(ni)try{(oe.nodeType===9?oe.body:oe.nodeName==="HTML"?oe.ownerDocument.body:oe).removeChild(n.stateNode)}catch(r){Ft(n,e,r)}else try{oe.removeChild(n.stateNode)}catch(r){Ft(n,e,r)}break;case 18:oe!==null&&(ni?(t=oe,mm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),el(t)):mm(oe,n.stateNode));break;case 4:s=oe,o=ni,oe=n.stateNode.containerInfo,ni=!0,Tn(t,e,n),oe=s,ni=o;break;case 0:case 11:case 14:case 15:aa(2,n,e),Te||aa(4,n,e),Tn(t,e,n);break;case 1:Te||(sn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&ph(n,e,s)),Tn(t,e,n);break;case 21:Tn(t,e,n);break;case 22:Te=(s=Te)||n.memoizedState!==null,Tn(t,e,n),Te=s;break;default:Tn(t,e,n)}}function Sh(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{el(t)}catch(n){Ft(e,e.return,n)}}}function Nh(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{el(t)}catch(n){Ft(e,e.return,n)}}function jg(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new yh),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new yh),e;default:throw Error(m(435,t.tag))}}function Cr(t,e){var n=jg(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var o=kg.bind(null,t,s);s.then(o,o)}})}function ai(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s],r=t,g=e,y=g;t:for(;y!==null;){switch(y.tag){case 27:if(fa(y.type)){oe=y.stateNode,ni=!1;break t}break;case 5:oe=y.stateNode,ni=!1;break t;case 3:case 4:oe=y.stateNode.containerInfo,ni=!0;break t}y=y.return}if(oe===null)throw Error(m(160));wh(r,g,o),oe=null,ni=!1,r=o.alternate,r!==null&&(r.return=null),o.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Th(e,t),e=e.sibling}var qi=null;function Th(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ai(e,t),si(t),s&4&&(aa(3,t,t.return),Kl(3,t),aa(5,t,t.return));break;case 1:ai(e,t),si(t),s&512&&(Te||n===null||sn(n,n.return)),s&64&&Nn&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var o=qi;if(ai(e,t),si(t),s&512&&(Te||n===null||sn(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){t:{s=t.type,n=t.memoizedProps,o=o.ownerDocument||o;e:switch(s){case"title":r=o.getElementsByTagName("title")[0],(!r||r[Aa]||r[xe]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=o.createElement(s),o.head.insertBefore(r,o.querySelector("head > title"))),Ue(r,s,n),r[xe]=t,be(r),s=r;break t;case"link":var g=Tm("link","href",o).get(s+(n.href||""));if(g){for(var y=0;y<g.length;y++)if(r=g[y],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){g.splice(y,1);break e}}r=o.createElement(s),Ue(r,s,n),o.head.appendChild(r);break;case"meta":if(g=Tm("meta","content",o).get(s+(n.content||""))){for(y=0;y<g.length;y++)if(r=g[y],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){g.splice(y,1);break e}}r=o.createElement(s),Ue(r,s,n),o.head.appendChild(r);break;default:throw Error(m(468,s))}r[xe]=t,be(r),s=r}t.stateNode=s}else Em(o,t.type,t.stateNode);else t.stateNode=Nm(o,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?Em(o,t.type,t.stateNode):Nm(o,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Mc(t,t.memoizedProps,n.memoizedProps)}break;case 27:ai(e,t),si(t),s&512&&(Te||n===null||sn(n,n.return)),n!==null&&s&4&&Mc(t,t.memoizedProps,n.memoizedProps);break;case 5:if(ai(e,t),si(t),s&512&&(Te||n===null||sn(n,n.return)),t.flags&32){o=t.stateNode;try{bi(o,"")}catch(_t){Ft(t,t.return,_t)}}s&4&&t.stateNode!=null&&(o=t.memoizedProps,Mc(t,o,n!==null?n.memoizedProps:o)),s&1024&&(Lc=!0);break;case 6:if(ai(e,t),si(t),s&4){if(t.stateNode===null)throw Error(m(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(_t){Ft(t,t.return,_t)}}break;case 3:if(Gr=null,o=qi,qi=qr(e.containerInfo),ai(e,t),qi=o,si(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{el(e.containerInfo)}catch(_t){Ft(t,t.return,_t)}Lc&&(Lc=!1,Eh(t));break;case 4:s=qi,qi=qr(t.stateNode.containerInfo),ai(e,t),si(t),qi=s;break;case 12:ai(e,t),si(t);break;case 31:ai(e,t),si(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Cr(t,s)));break;case 13:ai(e,t),si(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ar=Ye()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Cr(t,s)));break;case 22:o=t.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,R=Nn,G=Te;if(Nn=R||o,Te=G||S,ai(e,t),Te=G,Nn=R,si(t),s&8192)t:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||S||Nn||Te||rs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){S=n=e;try{if(r=S.stateNode,o)g=r.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{y=S.stateNode;var Q=S.memoizedProps.style,H=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;y.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(_t){Ft(S,S.return,_t)}}}else if(e.tag===6){if(n===null){S=e;try{S.stateNode.nodeValue=o?"":S.memoizedProps}catch(_t){Ft(S,S.return,_t)}}}else if(e.tag===18){if(n===null){S=e;try{var q=S.stateNode;o?pm(q,!0):pm(S.stateNode,!1)}catch(_t){Ft(S,S.return,_t)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,Cr(t,n))));break;case 19:ai(e,t),si(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Cr(t,s)));break;case 30:break;case 21:break;default:ai(e,t),si(t)}}function si(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(vh(s)){n=s;break}s=s.return}if(n==null)throw Error(m(160));switch(n.tag){case 27:var o=n.stateNode,r=zc(t);Er(t,r,o);break;case 5:var g=n.stateNode;n.flags&32&&(bi(g,""),n.flags&=-33);var y=zc(t);Er(t,y,g);break;case 3:case 4:var S=n.stateNode.containerInfo,R=zc(t);Oc(t,R,S);break;default:throw Error(m(161))}}catch(G){Ft(t,t.return,G)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Eh(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Eh(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function En(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)xh(t,e.alternate,e),e=e.sibling}function rs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:aa(4,e,e.return),rs(e);break;case 1:sn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&ph(e,e.return,n),rs(e);break;case 27:so(e.stateNode);case 26:case 5:sn(e,e.return),rs(e);break;case 22:e.memoizedState===null&&rs(e);break;case 30:rs(e);break;default:rs(e)}t=t.sibling}}function Cn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,o=t,r=e,g=r.flags;switch(r.tag){case 0:case 11:case 15:Cn(o,r,n),Kl(4,r);break;case 1:if(Cn(o,r,n),s=r,o=s.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(R){Ft(s,s.return,R)}if(s=r,o=s.updateQueue,o!==null){var y=s.stateNode;try{var S=o.shared.hiddenCallbacks;if(S!==null)for(o.shared.hiddenCallbacks=null,o=0;o<S.length;o++)nd(S[o],y)}catch(R){Ft(s,s.return,R)}}n&&g&64&&mh(r),Jl(r,r.return);break;case 27:_h(r);case 26:case 5:Cn(o,r,n),n&&s===null&&g&4&&gh(r),Jl(r,r.return);break;case 12:Cn(o,r,n);break;case 31:Cn(o,r,n),n&&g&4&&Sh(o,r);break;case 13:Cn(o,r,n),n&&g&4&&Nh(o,r);break;case 22:r.memoizedState===null&&Cn(o,r,n),Jl(r,r.return);break;case 30:break;default:Cn(o,r,n)}e=e.sibling}}function Dc(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Bl(n))}function Rc(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bl(t))}function Pi(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ch(t,e,n,s),e=e.sibling}function Ch(t,e,n,s){var o=e.flags;switch(e.tag){case 0:case 11:case 15:Pi(t,e,n,s),o&2048&&Kl(9,e);break;case 1:Pi(t,e,n,s);break;case 3:Pi(t,e,n,s),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bl(t)));break;case 12:if(o&2048){Pi(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,g=r.id,y=r.onPostCommit;typeof y=="function"&&y(g,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){Ft(e,e.return,S)}}else Pi(t,e,n,s);break;case 31:Pi(t,e,n,s);break;case 13:Pi(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,g=e.alternate,e.memoizedState!==null?r._visibility&2?Pi(t,e,n,s):Fl(t,e):r._visibility&2?Pi(t,e,n,s):(r._visibility|=2,Ys(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),o&2048&&Dc(g,e);break;case 24:Pi(t,e,n,s),o&2048&&Rc(e.alternate,e);break;default:Pi(t,e,n,s)}}function Ys(t,e,n,s,o){for(o=o&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,g=e,y=n,S=s,R=g.flags;switch(g.tag){case 0:case 11:case 15:Ys(r,g,y,S,o),Kl(8,g);break;case 23:break;case 22:var G=g.stateNode;g.memoizedState!==null?G._visibility&2?Ys(r,g,y,S,o):Fl(r,g):(G._visibility|=2,Ys(r,g,y,S,o)),o&&R&2048&&Dc(g.alternate,g);break;case 24:Ys(r,g,y,S,o),o&&R&2048&&Rc(g.alternate,g);break;default:Ys(r,g,y,S,o)}e=e.sibling}}function Fl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,o=s.flags;switch(s.tag){case 22:Fl(n,s),o&2048&&Dc(s.alternate,s);break;case 24:Fl(n,s),o&2048&&Rc(s.alternate,s);break;default:Fl(n,s)}e=e.sibling}}var Wl=8192;function Vs(t,e,n){if(t.subtreeFlags&Wl)for(t=t.child;t!==null;)jh(t,e,n),t=t.sibling}function jh(t,e,n){switch(t.tag){case 26:Vs(t,e,n),t.flags&Wl&&t.memoizedState!==null&&mv(n,qi,t.memoizedState,t.memoizedProps);break;case 5:Vs(t,e,n);break;case 3:case 4:var s=qi;qi=qr(t.stateNode.containerInfo),Vs(t,e,n),qi=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Wl,Wl=16777216,Vs(t,e,n),Wl=s):Vs(t,e,n));break;default:Vs(t,e,n)}}function Ah(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function $l(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Le=s,zh(s,t)}Ah(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mh(t),t=t.sibling}function Mh(t){switch(t.tag){case 0:case 11:case 15:$l(t),t.flags&2048&&aa(9,t,t.return);break;case 3:$l(t);break;case 12:$l(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,jr(t)):$l(t);break;default:$l(t)}}function jr(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Le=s,zh(s,t)}Ah(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:aa(8,e,e.return),jr(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,jr(e));break;default:jr(e)}t=t.sibling}}function zh(t,e){for(;Le!==null;){var n=Le;switch(n.tag){case 0:case 11:case 15:aa(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Bl(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Le=s;else t:for(n=t;Le!==null;){s=Le;var o=s.sibling,r=s.return;if(bh(s),s===n){Le=null;break t}if(o!==null){o.return=r,Le=o;break t}Le=r}}}var Ag={getCacheForType:function(t){var e=Be(we),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Be(we).controller.signal}},Mg=typeof WeakMap=="function"?WeakMap:Map,Qt=0,ne=null,Ut=null,qt=0,Jt=0,pi=null,sa=!1,Is=!1,Bc=!1,jn=0,me=0,la=0,us=0,kc=0,gi=0,Xs=0,to=null,li=null,Uc=!1,Ar=0,Oh=0,Mr=1/0,zr=null,oa=null,Ae=0,ra=null,Qs=null,An=0,Hc=0,Zc=null,Lh=null,eo=0,qc=null;function vi(){return(Qt&2)!==0&&qt!==0?qt&-qt:z.T!==null?Xc():fl()}function Dh(){if(gi===0)if((qt&536870912)===0||kt){var t=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),gi=t}else gi=536870912;return t=hi.current,t!==null&&(t.flags|=32),gi}function oi(t,e,n){(t===ne&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)&&(Ks(t,0),ua(t,qt,gi,!1)),rn(t,n),((Qt&2)===0||t!==ne)&&(t===ne&&((Qt&2)===0&&(us|=n),me===4&&ua(t,qt,gi,!1)),ln(t))}function Rh(t,e,n){if((Qt&6)!==0)throw Error(m(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||ja(t,e),o=s?Lg(t,e):Gc(t,e,!0),r=s;do{if(o===0){Is&&!s&&ua(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!zg(n)){o=Gc(t,e,!1),r=!1;continue}if(o===2){if(r=e,t.errorRecoveryDisabledLanes&r)var g=0;else g=t.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){e=g;t:{var y=t;o=to;var S=y.current.memoizedState.isDehydrated;if(S&&(Ks(y,g).flags|=256),g=Gc(y,g,!1),g!==2){if(Bc&&!S){y.errorRecoveryDisabledLanes|=r,us|=r,o=4;break t}r=li,li=o,r!==null&&(li===null?li=r:li.push.apply(li,r))}o=g}if(r=!1,o!==2)continue}}if(o===1){Ks(t,0),ua(t,e,0,!0);break}t:{switch(s=t,r=o,r){case 0:case 1:throw Error(m(345));case 4:if((e&4194048)!==e)break;case 6:ua(s,e,gi,!sa);break t;case 2:li=null;break;case 3:case 5:break;default:throw Error(m(329))}if((e&62914560)===e&&(o=Ar+300-Ye(),10<o)){if(ua(s,e,gi,!sa),ps(s,0,!0)!==0)break t;An=e,s.timeoutHandle=dm(Bh.bind(null,s,n,li,zr,Uc,e,gi,us,Xs,sa,r,"Throttled",-0,0),o);break t}Bh(s,n,li,zr,Uc,e,gi,us,Xs,sa,r,null,-0,0)}}break}while(!0);ln(t)}function Bh(t,e,n,s,o,r,g,y,S,R,G,Q,H,q){if(t.timeoutHandle=-1,Q=e.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:We},jh(e,r,Q);var _t=(r&62914560)===r?Ar-Ye():(r&4194048)===r?Oh-Ye():0;if(_t=pv(Q,_t),_t!==null){An=r,t.cancelPendingCommit=_t(Yh.bind(null,t,e,r,n,s,o,g,y,S,G,Q,null,H,q)),ua(t,r,g,!R);return}}Yh(t,e,r,n,s,o,g,y,S)}function zg(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var o=n[s],r=o.getSnapshot;o=o.value;try{if(!ze(r(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ua(t,e,n,s){e&=~kc,e&=~us,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var o=e;0<o;){var r=31-Ve(o),g=1<<r;s[r]=-1,o&=~g}n!==0&&Mo(t,n,e)}function Or(){return(Qt&6)===0?(io(0),!1):!0}function Pc(){if(Ut!==null){if(Jt===0)var t=Ut.return;else t=Ut,Zi=an=null,ac(t),Hs=null,Ul=0,t=Ut;for(;t!==null;)hh(t.alternate,t),t=t.return;Ut=null}}function Ks(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Fg(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),An=0,Pc(),ne=t,Ut=n=ji(t.current,null),qt=e,Jt=0,pi=null,sa=!1,Is=ja(t,e),Bc=!1,Xs=gi=kc=us=la=me=0,li=to=null,Uc=!1,(e&8)!==0&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var o=31-Ve(s),r=1<<o;e|=t[o],s&=~r}return jn=e,Ja(),n}function kh(t,e){Lt=null,z.H=Il,e===Us||e===or?(e=$f(),Jt=3):e===Iu?(e=$f(),Jt=4):Jt=e===xc?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,pi=e,Ut===null&&(me=1,br(t,a(e,t.current)))}function Uh(){var t=hi.current;return t===null?!0:(qt&4194048)===qt?Ai===null:(qt&62914560)===qt||(qt&536870912)!==0?t===Ai:!1}function Hh(){var t=z.H;return z.H=Il,t===null?Il:t}function Zh(){var t=z.A;return z.A=Ag,t}function Lr(){me=4,sa||(qt&4194048)!==qt&&hi.current!==null||(Is=!0),(la&134217727)===0&&(us&134217727)===0||ne===null||ua(ne,qt,gi,!1)}function Gc(t,e,n){var s=Qt;Qt|=2;var o=Hh(),r=Zh();(ne!==t||qt!==e)&&(zr=null,Ks(t,e)),e=!1;var g=me;t:do try{if(Jt!==0&&Ut!==null){var y=Ut,S=pi;switch(Jt){case 8:Pc(),g=6;break t;case 3:case 2:case 9:case 6:hi.current===null&&(e=!0);var R=Jt;if(Jt=0,pi=null,Js(t,y,S,R),n&&Is){g=0;break t}break;default:R=Jt,Jt=0,pi=null,Js(t,y,S,R)}}Og(),g=me;break}catch(G){kh(t,G)}while(!0);return e&&t.shellSuspendCounter++,Zi=an=null,Qt=s,z.H=o,z.A=r,Ut===null&&(ne=null,qt=0,Ja()),g}function Og(){for(;Ut!==null;)qh(Ut)}function Lg(t,e){var n=Qt;Qt|=2;var s=Hh(),o=Zh();ne!==t||qt!==e?(zr=null,Mr=Ye()+500,Ks(t,e)):Is=ja(t,e);t:do try{if(Jt!==0&&Ut!==null){e=Ut;var r=pi;e:switch(Jt){case 1:Jt=0,pi=null,Js(t,e,r,1);break;case 2:case 9:if(Ff(r)){Jt=0,pi=null,Ph(e);break}e=function(){Jt!==2&&Jt!==9||ne!==t||(Jt=7),ln(t)},r.then(e,e);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:Ff(r)?(Jt=0,pi=null,Ph(e)):(Jt=0,pi=null,Js(t,e,r,7));break;case 5:var g=null;switch(Ut.tag){case 26:g=Ut.memoizedState;case 5:case 27:var y=Ut;if(g?Cm(g):y.stateNode.complete){Jt=0,pi=null;var S=y.sibling;if(S!==null)Ut=S;else{var R=y.return;R!==null?(Ut=R,Dr(R)):Ut=null}break e}}Jt=0,pi=null,Js(t,e,r,5);break;case 6:Jt=0,pi=null,Js(t,e,r,6);break;case 8:Pc(),me=6;break t;default:throw Error(m(462))}}Dg();break}catch(G){kh(t,G)}while(!0);return Zi=an=null,z.H=s,z.A=o,Qt=n,Ut!==null?0:(ne=null,qt=0,Ja(),me)}function Dg(){for(;Ut!==null&&!Eo();)qh(Ut)}function qh(t){var e=fh(t.alternate,t,jn);t.memoizedProps=t.pendingProps,e===null?Dr(t):Ut=e}function Ph(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=sh(n,e,e.pendingProps,e.type,void 0,qt);break;case 11:e=sh(n,e,e.pendingProps,e.type.render,e.ref,qt);break;case 5:ac(e);default:hh(n,e),e=Ut=zl(e,jn),e=fh(n,e,jn)}t.memoizedProps=t.pendingProps,e===null?Dr(t):Ut=e}function Js(t,e,n,s){Zi=an=null,ac(e),Hs=null,Ul=0;var o=e.return;try{if(wg(t,o,e,n,qt)){me=1,br(t,a(n,t.current)),Ut=null;return}}catch(r){if(o!==null)throw Ut=o,r;me=1,br(t,a(n,t.current)),Ut=null;return}e.flags&32768?(kt||s===1?t=!0:Is||(qt&536870912)!==0?t=!1:(sa=t=!0,(s===2||s===9||s===3||s===6)&&(s=hi.current,s!==null&&s.tag===13&&(s.flags|=16384))),Gh(e,t)):Dr(e)}function Dr(t){var e=t;do{if((e.flags&32768)!==0){Gh(e,sa);return}t=e.return;var n=Tg(e.alternate,e,jn);if(n!==null){Ut=n;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);me===0&&(me=5)}function Gh(t,e){do{var n=Eg(t.alternate,t);if(n!==null){n.flags&=32767,Ut=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ut=t;return}Ut=t=n}while(t!==null);me=6,Ut=null}function Yh(t,e,n,s,o,r,g,y,S){t.cancelPendingCommit=null;do Rr();while(Ae!==0);if((Qt&6)!==0)throw Error(m(327));if(e!==null){if(e===t.current)throw Error(m(177));if(r=e.lanes|e.childLanes,r|=zs,Tu(t,n,r,g,y,S),t===ne&&(Ut=ne=null,qt=0),Qs=e,ra=t,An=n,Hc=r,Zc=o,Lh=s,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ug(Sa,function(){return Kh(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||s){s=z.T,z.T=null,o=tt.p,tt.p=2,g=Qt,Qt|=4;try{Cg(t,e,n)}finally{Qt=g,tt.p=o,z.T=s}}Ae=1,Vh(),Ih(),Xh()}}function Vh(){if(Ae===1){Ae=0;var t=ra,e=Qs,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=z.T,z.T=null;var s=tt.p;tt.p=2;var o=Qt;Qt|=4;try{Th(e,t);var r=ef,g=Va(t.containerInfo),y=r.focusedElem,S=r.selectionRange;if(g!==y&&y&&y.ownerDocument&&Cs(y.ownerDocument.documentElement,y)){if(S!==null&&Ji(y)){var R=S.start,G=S.end;if(G===void 0&&(G=R),"selectionStart"in y)y.selectionStart=R,y.selectionEnd=Math.min(G,y.value.length);else{var Q=y.ownerDocument||document,H=Q&&Q.defaultView||window;if(H.getSelection){var q=H.getSelection(),_t=y.textContent.length,jt=Math.min(S.start,_t),ee=S.end===void 0?jt:Math.min(S.end,_t);!q.extend&&jt>ee&&(g=ee,ee=jt,jt=g);var A=Ya(y,jt),T=Ya(y,ee);if(A&&T&&(q.rangeCount!==1||q.anchorNode!==A.node||q.anchorOffset!==A.offset||q.focusNode!==T.node||q.focusOffset!==T.offset)){var D=Q.createRange();D.setStart(A.node,A.offset),q.removeAllRanges(),jt>ee?(q.addRange(D),q.extend(T.node,T.offset)):(D.setEnd(T.node,T.offset),q.addRange(D))}}}}for(Q=[],q=y;q=q.parentNode;)q.nodeType===1&&Q.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<Q.length;y++){var I=Q[y];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Xr=!!tf,ef=tf=null}finally{Qt=o,tt.p=s,z.T=n}}t.current=e,Ae=2}}function Ih(){if(Ae===2){Ae=0;var t=ra,e=Qs,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=z.T,z.T=null;var s=tt.p;tt.p=2;var o=Qt;Qt|=4;try{xh(t,e.alternate,e)}finally{Qt=o,tt.p=s,z.T=n}}Ae=3}}function Xh(){if(Ae===4||Ae===3){Ae=0,Co();var t=ra,e=Qs,n=An,s=Lh;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Ae=5:(Ae=0,Qs=ra=null,Qh(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(oa=null),bt(n),e=e.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Ln,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=z.T,o=tt.p,tt.p=2,z.T=null;try{for(var r=t.onRecoverableError,g=0;g<s.length;g++){var y=s[g];r(y.value,{componentStack:y.stack})}}finally{z.T=e,tt.p=o}}(An&3)!==0&&Rr(),ln(t),o=t.pendingLanes,(n&261930)!==0&&(o&42)!==0?t===qc?eo++:(eo=0,qc=t):eo=0,io(0)}}function Qh(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Bl(e)))}function Rr(){return Vh(),Ih(),Xh(),Kh()}function Kh(){if(Ae!==5)return!1;var t=ra,e=Hc;Hc=0;var n=bt(An),s=z.T,o=tt.p;try{tt.p=32>n?32:n,z.T=null,n=Zc,Zc=null;var r=ra,g=An;if(Ae=0,Qs=ra=null,An=0,(Qt&6)!==0)throw Error(m(331));var y=Qt;if(Qt|=4,Mh(r.current),Ch(r,r.current,g,n),Qt=y,io(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Ln,r)}catch{}return!0}finally{tt.p=o,z.T=s,Qh(t,e)}}function Jh(t,e,n){e=a(n,e),e=yc(t.stateNode,e,2),t=ea(t,e,2),t!==null&&(rn(t,2),ln(t))}function Ft(t,e,n){if(t.tag===3)Jh(t,t,n);else for(;e!==null;){if(e.tag===3){Jh(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(oa===null||!oa.has(s))){t=a(n,t),n=Fd(2),s=ea(e,n,2),s!==null&&(Wd(n,s,e,t),rn(s,2),ln(s));break}}e=e.return}}function Yc(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Mg;var o=new Set;s.set(e,o)}else o=s.get(e),o===void 0&&(o=new Set,s.set(e,o));o.has(n)||(Bc=!0,o.add(n),t=Rg.bind(null,t,e,n),e.then(t,t))}function Rg(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ne===t&&(qt&n)===n&&(me===4||me===3&&(qt&62914560)===qt&&300>Ye()-Ar?(Qt&2)===0&&Ks(t,0):kc|=n,Xs===qt&&(Xs=0)),ln(t)}function Fh(t,e){e===0&&(e=Ao()),t=Ci(t,e),t!==null&&(rn(t,e),ln(t))}function Bg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fh(t,n)}function kg(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(m(314))}s!==null&&s.delete(e),Fh(t,n)}function Ug(t,e){return hs(t,e)}var Br=null,Fs=null,Vc=!1,kr=!1,Ic=!1,ca=0;function ln(t){t!==Fs&&t.next===null&&(Fs===null?Br=Fs=t:Fs=Fs.next=t),kr=!0,Vc||(Vc=!0,Zg())}function io(t,e){if(!Ic&&kr){Ic=!0;do for(var n=!1,s=Br;s!==null;){if(t!==0){var o=s.pendingLanes;if(o===0)var r=0;else{var g=s.suspendedLanes,y=s.pingedLanes;r=(1<<31-Ve(42|t)+1)-1,r&=o&~(g&~y),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,em(s,r))}else r=qt,r=ps(s,s===ne?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(r&3)===0||ja(s,r)||(n=!0,em(s,r));s=s.next}while(n);Ic=!1}}function Hg(){Wh()}function Wh(){kr=Vc=!1;var t=0;ca!==0&&Jg()&&(t=ca);for(var e=Ye(),n=null,s=Br;s!==null;){var o=s.next,r=$h(s,e);r===0?(s.next=null,n===null?Br=o:n.next=o,o===null&&(Fs=n)):(n=s,(t!==0||(r&3)!==0)&&(kr=!0)),s=o}Ae!==0&&Ae!==5||io(t),ca!==0&&(ca=0)}function $h(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,o=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var g=31-Ve(r),y=1<<g,S=o[g];S===-1?((y&n)===0||(y&s)!==0)&&(o[g]=Nu(y,e)):S<=e&&(t.expiredLanes|=y),r&=~y}if(e=ne,n=qt,n=ps(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&wa(s),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||ja(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&wa(s),bt(n)){case 2:case 8:n=rl;break;case 32:n=Sa;break;case 268435456:n=ul;break;default:n=Sa}return s=tm.bind(null,t),n=hs(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&wa(s),t.callbackPriority=2,t.callbackNode=null,2}function tm(t,e){if(Ae!==0&&Ae!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Rr()&&t.callbackNode!==n)return null;var s=qt;return s=ps(t,t===ne?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(Rh(t,s,e),$h(t,Ye()),t.callbackNode!=null&&t.callbackNode===n?tm.bind(null,t):null)}function em(t,e){if(Rr())return null;Rh(t,e,!0)}function Zg(){Wg(function(){(Qt&6)!==0?hs(ms,Hg):Wh()})}function Xc(){if(ca===0){var t=Bs;t===0&&(t=Ta,Ta<<=1,(Ta&261888)===0&&(Ta=256)),ca=t}return ca}function im(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Hn(""+t)}function nm(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function qg(t,e,n,s,o){if(e==="submit"&&n&&n.stateNode===o){var r=im((o[Me]||null).action),g=s.submitter;g&&(e=(e=g[Me]||null)?im(e.formAction):g.getAttribute("formAction"),e!==null&&(r=e,g=null));var y=new xs("action","action",null,s,o);t.push({event:y,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ca!==0){var S=g?nm(o,g):new FormData(o);hc(n,{pending:!0,data:S,method:o.method,action:r},null,S)}}else typeof r=="function"&&(y.preventDefault(),S=g?nm(o,g):new FormData(o),hc(n,{pending:!0,data:S,method:o.method,action:r},r,S))},currentTarget:o}]})}}for(var Qc=0;Qc<$i.length;Qc++){var Kc=$i[Qc],Pg=Kc.toLowerCase(),Gg=Kc[0].toUpperCase()+Kc.slice(1);ti(Pg,"on"+Gg)}ti(Xa,"onAnimationEnd"),ti(er,"onAnimationIteration"),ti(Qa,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(Uu,"onTransitionRun"),ti(ir,"onTransitionStart"),ti(Hu,"onTransitionCancel"),ti(Jn,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(no));function am(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],o=s.event;s=s.listeners;t:{var r=void 0;if(e)for(var g=s.length-1;0<=g;g--){var y=s[g],S=y.instance,R=y.currentTarget;if(y=y.listener,S!==r&&o.isPropagationStopped())break t;r=y,o.currentTarget=R;try{r(o)}catch(G){Ka(G)}o.currentTarget=null,r=S}else for(g=0;g<s.length;g++){if(y=s[g],S=y.instance,R=y.currentTarget,y=y.listener,S!==r&&o.isPropagationStopped())break t;r=y,o.currentTarget=R;try{r(o)}catch(G){Ka(G)}o.currentTarget=null,r=S}}}}function Ht(t,e){var n=e[Yi];n===void 0&&(n=e[Yi]=new Set);var s=t+"__bubble";n.has(s)||(sm(e,t,2,!1),n.add(s))}function Jc(t,e,n){var s=0;e&&(s|=4),sm(n,t,s,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Fc(t){if(!t[Ur]){t[Ur]=!0,Ro.forEach(function(n){n!=="selectionchange"&&(Yg.has(n)||Jc(n,!1,t),Jc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ur]||(e[Ur]=!0,Jc("selectionchange",!1,e))}}function sm(t,e,n,s){switch(Dm(e)){case 2:var o=_v;break;case 8:o=yv;break;default:o=hf}n=o.bind(null,e,n,t),o=void 0,!Ra||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),s?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Wc(t,e,n,s,o){var r=s;if((e&1)===0&&(e&2)===0&&s!==null)t:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var y=s.stateNode.containerInfo;if(y===o)break;if(g===4)for(g=s.return;g!==null;){var S=g.tag;if((S===3||S===4)&&g.stateNode.containerInfo===o)return;g=g.return}for(;y!==null;){if(g=cn(y),g===null)return;if(S=g.tag,S===5||S===6||S===26||S===27){s=r=g;continue t}y=y.parentNode}}s=s.return}xl(function(){var R=r,G=Da(n),Q=[];t:{var H=nr.get(t);if(H!==void 0){var q=xs,_t=t;switch(t){case"keypress":if(Ba(n)===0)break t;case"keydown":case"keyup":q=Go;break;case"focusin":_t="focus",q=Sl;break;case"focusout":_t="blur",q=Sl;break;case"beforeblur":case"afterblur":q=Sl;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Ou;break;case Xa:case er:case Qa:q=Nl;break;case Jn:q=Io;break;case"scroll":case"scrollend":q=Zt;break;case"wheel":q=pn;break;case"copy":case"cut":case"paste":q=Si;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Yo;break;case"toggle":case"beforetoggle":q=Ha}var jt=(e&4)!==0,ee=!jt&&(t==="scroll"||t==="scrollend"),A=jt?H!==null?H+"Capture":null:H;jt=[];for(var T=R,D;T!==null;){var I=T;if(D=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||D===null||A===null||(I=hn(T,A),I!=null&&jt.push(ao(T,I,D))),ee)break;T=T.return}0<jt.length&&(H=new q(H,_t,null,n,G),Q.push({event:H,listeners:jt}))}}if((e&7)===0){t:{if(H=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",H&&n!==ys&&(_t=n.relatedTarget||n.fromElement)&&(cn(_t)||_t[un]))break t;if((q||H)&&(H=G.window===G?G:(H=G.ownerDocument)?H.defaultView||H.parentWindow:window,q?(_t=n.relatedTarget||n.toElement,q=R,_t=_t?cn(_t):null,_t!==null&&(ee=x(_t),jt=_t.tag,_t!==ee||jt!==5&&jt!==27&&jt!==6)&&(_t=null)):(q=null,_t=R),q!==_t)){if(jt=Uo,I="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(jt=Yo,I="onPointerLeave",A="onPointerEnter",T="pointer"),ee=q==null?H:Vi(q),D=_t==null?H:Vi(_t),H=new jt(I,T+"leave",q,n,G),H.target=ee,H.relatedTarget=D,I=null,cn(G)===R&&(jt=new jt(A,T+"enter",_t,n,G),jt.target=D,jt.relatedTarget=ee,I=jt),ee=I,q&&_t)e:{for(jt=Vg,A=q,T=_t,D=0,I=A;I;I=jt(I))D++;I=0;for(var Tt=T;Tt;Tt=jt(Tt))I++;for(;0<D-I;)A=jt(A),D--;for(;0<I-D;)T=jt(T),I--;for(;D--;){if(A===T||T!==null&&A===T.alternate){jt=A;break e}A=jt(A),T=jt(T)}jt=null}else jt=null;q!==null&&lm(Q,H,q,jt,!1),_t!==null&&ee!==null&&lm(Q,ee,_t,jt,!0)}}t:{if(H=R?Vi(R):window,q=H.nodeName&&H.nodeName.toLowerCase(),q==="select"||q==="input"&&H.type==="file")var It=Ga;else if(Ni(H))if(Jo)It=ku;else{It=Bu;var xt=ki}else q=H.nodeName,!q||q.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?R&&La(R.elementType)&&(It=Ga):It=In;if(It&&(It=It(t,R))){Ko(Q,It,n,G);break t}xt&&xt(t,H,R),t==="focusout"&&R&&H.type==="number"&&R.memoizedProps.value!=null&&Di(H,"number",H.value)}switch(xt=R?Vi(R):window,t){case"focusin":(Ni(xt)||xt.contentEditable==="true")&&(Fi=xt,As=R,Ia=null);break;case"focusout":Ia=As=Fi=null;break;case"mousedown":Qn=!0;break;case"contextmenu":case"mouseup":case"dragend":Qn=!1,$o(Q,n,G);break;case"selectionchange":if(js)break;case"keydown":case"keyup":$o(Q,n,G)}var Rt;if(ws)t:{switch(t){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Gn?Qo(t,n)&&(Pt="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Pt="onCompositionStart");Pt&&(Ss&&n.locale!=="ko"&&(Gn||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Gn&&(Rt=Qi()):(wi=G,mn="value"in wi?wi.value:wi.textContent,Gn=!0)),xt=Hr(R,Pt),0<xt.length&&(Pt=new Tl(Pt,t,null,n,G),Q.push({event:Pt,listeners:xt}),Rt?Pt.data=Rt:(Rt=Al(n),Rt!==null&&(Pt.data=Rt)))),(Rt=Du?di(t,n):Yn(t,n))&&(Pt=Hr(R,"onBeforeInput"),0<Pt.length&&(xt=new Tl("onBeforeInput","beforeinput",null,n,G),Q.push({event:xt,listeners:Pt}),xt.data=Rt)),qg(Q,t,R,n,G)}am(Q,e)})}function ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hr(t,e){for(var n=e+"Capture",s=[];t!==null;){var o=t,r=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||r===null||(o=hn(t,n),o!=null&&s.unshift(ao(t,o,r)),o=hn(t,e),o!=null&&s.push(ao(t,o,r))),t.tag===3)return s;t=t.return}return[]}function Vg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function lm(t,e,n,s,o){for(var r=e._reactName,g=[];n!==null&&n!==s;){var y=n,S=y.alternate,R=y.stateNode;if(y=y.tag,S!==null&&S===s)break;y!==5&&y!==26&&y!==27||R===null||(S=R,o?(R=hn(n,r),R!=null&&g.unshift(ao(n,R,S))):o||(R=hn(n,r),R!=null&&g.push(ao(n,R,S)))),n=n.return}g.length!==0&&t.push({event:e,listeners:g})}var Ig=/\r\n?/g,Xg=/\u0000|\uFFFD/g;function om(t){return(typeof t=="string"?t:""+t).replace(Ig,`
`).replace(Xg,"")}function rm(t,e){return e=om(e),om(t)===e}function te(t,e,n,s,o,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||bi(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&bi(t,""+s);break;case"className":Wt(t,"class",s);break;case"tabIndex":Wt(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Wt(t,n,s);break;case"style":vs(t,s,r);break;case"data":if(e!=="object"){Wt(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Hn(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&te(t,e,"name",o.name,o,null),te(t,e,"formEncType",o.formEncType,o,null),te(t,e,"formMethod",o.formMethod,o,null),te(t,e,"formTarget",o.formTarget,o,null)):(te(t,e,"encType",o.encType,o,null),te(t,e,"method",o.method,o,null),te(t,e,"target",o.target,o,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Hn(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=We);break;case"onScroll":s!=null&&Ht("scroll",t);break;case"onScrollEnd":s!=null&&Ht("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(m(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(m(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Hn(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":Ht("beforetoggle",t),Ht("toggle",t),Bt(t,"popover",s);break;case"xlinkActuate":Fe(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Fe(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Fe(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Fe(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Fe(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Fe(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Fe(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Fe(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Fe(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Bt(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=_s.get(n)||n,Bt(t,n,s))}}function $c(t,e,n,s,o,r){switch(n){case"style":vs(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(m(61));if(n=s.__html,n!=null){if(o.children!=null)throw Error(m(60));t.innerHTML=n}}break;case"children":typeof s=="string"?bi(t,s):(typeof s=="number"||typeof s=="bigint")&&bi(t,""+s);break;case"onScroll":s!=null&&Ht("scroll",t);break;case"onScrollEnd":s!=null&&Ht("scrollend",t);break;case"onClick":s!=null&&(t.onclick=We);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bo.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),r=t[Me]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,o),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,o);break t}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Bt(t,n,s)}}}function Ue(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",t),Ht("load",t);var s=!1,o=!1,r;for(r in n)if(n.hasOwnProperty(r)){var g=n[r];if(g!=null)switch(r){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(m(137,e));default:te(t,e,r,g,n,null)}}o&&te(t,e,"srcSet",n.srcSet,n,null),s&&te(t,e,"src",n.src,n,null);return;case"input":Ht("invalid",t);var y=r=g=o=null,S=null,R=null;for(s in n)if(n.hasOwnProperty(s)){var G=n[s];if(G!=null)switch(s){case"name":o=G;break;case"type":g=G;break;case"checked":S=G;break;case"defaultChecked":R=G;break;case"value":r=G;break;case"defaultValue":y=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(m(137,e));break;default:te(t,e,s,G,n,null)}}Oa(t,r,y,S,R,g,o,!1);return;case"select":Ht("invalid",t),s=g=r=null;for(o in n)if(n.hasOwnProperty(o)&&(y=n[o],y!=null))switch(o){case"value":r=y;break;case"defaultValue":g=y;break;case"multiple":s=y;default:te(t,e,o,y,n,null)}e=r,n=g,t.multiple=!!s,e!=null?ie(t,!!s,e,!1):n!=null&&ie(t,!!s,n,!0);return;case"textarea":Ht("invalid",t),r=o=s=null;for(g in n)if(n.hasOwnProperty(g)&&(y=n[g],y!=null))switch(g){case"value":s=y;break;case"defaultValue":o=y;break;case"children":r=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(m(91));break;default:te(t,e,g,y,n,null)}kn(t,s,o,r);return;case"option":for(S in n)n.hasOwnProperty(S)&&(s=n[S],s!=null)&&(S==="selected"?t.selected=s&&typeof s!="function"&&typeof s!="symbol":te(t,e,S,s,n,null));return;case"dialog":Ht("beforetoggle",t),Ht("toggle",t),Ht("cancel",t),Ht("close",t);break;case"iframe":case"object":Ht("load",t);break;case"video":case"audio":for(s=0;s<no.length;s++)Ht(no[s],t);break;case"image":Ht("error",t),Ht("load",t);break;case"details":Ht("toggle",t);break;case"embed":case"source":case"link":Ht("error",t),Ht("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in n)if(n.hasOwnProperty(R)&&(s=n[R],s!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(m(137,e));default:te(t,e,R,s,n,null)}return;default:if(La(e)){for(G in n)n.hasOwnProperty(G)&&(s=n[G],s!==void 0&&$c(t,e,G,s,n,void 0));return}}for(y in n)n.hasOwnProperty(y)&&(s=n[y],s!=null&&te(t,e,y,s,n,null))}function Qg(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,r=null,g=null,y=null,S=null,R=null,G=null;for(q in n){var Q=n[q];if(n.hasOwnProperty(q)&&Q!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":S=Q;default:s.hasOwnProperty(q)||te(t,e,q,null,s,Q)}}for(var H in s){var q=s[H];if(Q=n[H],s.hasOwnProperty(H)&&(q!=null||Q!=null))switch(H){case"type":r=q;break;case"name":o=q;break;case"checked":R=q;break;case"defaultChecked":G=q;break;case"value":g=q;break;case"defaultValue":y=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(m(137,e));break;default:q!==Q&&te(t,e,H,q,s,Q)}}vl(t,g,y,S,R,G,r,o);return;case"select":q=g=y=H=null;for(r in n)if(S=n[r],n.hasOwnProperty(r)&&S!=null)switch(r){case"value":break;case"multiple":q=S;default:s.hasOwnProperty(r)||te(t,e,r,null,s,S)}for(o in s)if(r=s[o],S=n[o],s.hasOwnProperty(o)&&(r!=null||S!=null))switch(o){case"value":H=r;break;case"defaultValue":y=r;break;case"multiple":g=r;default:r!==S&&te(t,e,o,r,s,S)}e=y,n=g,s=q,H!=null?ie(t,!!n,H,!1):!!s!=!!n&&(e!=null?ie(t,!!n,e,!0):ie(t,!!n,n?[]:"",!1));return;case"textarea":q=H=null;for(y in n)if(o=n[y],n.hasOwnProperty(y)&&o!=null&&!s.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:te(t,e,y,null,s,o)}for(g in s)if(o=s[g],r=n[g],s.hasOwnProperty(g)&&(o!=null||r!=null))switch(g){case"value":H=o;break;case"defaultValue":q=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(m(91));break;default:o!==r&&te(t,e,g,o,s,r)}Xi(t,H,q);return;case"option":for(var _t in n)H=n[_t],n.hasOwnProperty(_t)&&H!=null&&!s.hasOwnProperty(_t)&&(_t==="selected"?t.selected=!1:te(t,e,_t,null,s,H));for(S in s)H=s[S],q=n[S],s.hasOwnProperty(S)&&H!==q&&(H!=null||q!=null)&&(S==="selected"?t.selected=H&&typeof H!="function"&&typeof H!="symbol":te(t,e,S,H,s,q));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var jt in n)H=n[jt],n.hasOwnProperty(jt)&&H!=null&&!s.hasOwnProperty(jt)&&te(t,e,jt,null,s,H);for(R in s)if(H=s[R],q=n[R],s.hasOwnProperty(R)&&H!==q&&(H!=null||q!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(m(137,e));break;default:te(t,e,R,H,s,q)}return;default:if(La(e)){for(var ee in n)H=n[ee],n.hasOwnProperty(ee)&&H!==void 0&&!s.hasOwnProperty(ee)&&$c(t,e,ee,void 0,s,H);for(G in s)H=s[G],q=n[G],!s.hasOwnProperty(G)||H===q||H===void 0&&q===void 0||$c(t,e,G,H,s,q);return}}for(var A in n)H=n[A],n.hasOwnProperty(A)&&H!=null&&!s.hasOwnProperty(A)&&te(t,e,A,null,s,H);for(Q in s)H=s[Q],q=n[Q],!s.hasOwnProperty(Q)||H===q||H==null&&q==null||te(t,e,Q,H,s,q)}function um(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var o=n[s],r=o.transferSize,g=o.initiatorType,y=o.duration;if(r&&y&&um(g)){for(g=0,y=o.responseEnd,s+=1;s<n.length;s++){var S=n[s],R=S.startTime;if(R>y)break;var G=S.transferSize,Q=S.initiatorType;G&&um(Q)&&(S=S.responseEnd,g+=G*(S<y?1:(y-R)/(S-R)))}if(--s,e+=8*(r+g)/(o.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var tf=null,ef=null;function Zr(t){return t.nodeType===9?t:t.ownerDocument}function cm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fm(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function nf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var af=null;function Jg(){var t=window.event;return t&&t.type==="popstate"?t===af?!1:(af=t,!0):(af=null,!1)}var dm=typeof setTimeout=="function"?setTimeout:void 0,Fg=typeof clearTimeout=="function"?clearTimeout:void 0,hm=typeof Promise=="function"?Promise:void 0,Wg=typeof queueMicrotask=="function"?queueMicrotask:typeof hm<"u"?function(t){return hm.resolve(null).then(t).catch($g)}:dm;function $g(t){setTimeout(function(){throw t})}function fa(t){return t==="head"}function mm(t,e){var n=e,s=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(o),el(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")so(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,so(n);for(var r=n.firstChild;r;){var g=r.nextSibling,y=r.nodeName;r[Aa]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=g}}else n==="body"&&so(t.ownerDocument.body);n=o}while(n);el(e)}function pm(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function sf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":sf(n),hl(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function tv(t,e,n,s){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Aa])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Mi(t.nextSibling),t===null)break}return null}function ev(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Mi(t.nextSibling),t===null))return null;return t}function gm(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Mi(t.nextSibling),t===null))return null;return t}function lf(t){return t.data==="$?"||t.data==="$~"}function of(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function iv(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var rf=null;function vm(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Mi(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function _m(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function ym(t,e,n){switch(e=Zr(n),t){case"html":if(t=e.documentElement,!t)throw Error(m(452));return t;case"head":if(t=e.head,!t)throw Error(m(453));return t;case"body":if(t=e.body,!t)throw Error(m(454));return t;default:throw Error(m(451))}}function so(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);hl(t)}var zi=new Map,xm=new Set;function qr(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mn=tt.d;tt.d={f:nv,r:av,D:sv,C:lv,L:ov,m:rv,X:cv,S:uv,M:fv};function nv(){var t=Mn.f(),e=Or();return t||e}function av(t){var e=Dn(t);e!==null&&e.tag===5&&e.type==="form"?kd(e):Mn.r(t)}var Ws=typeof document>"u"?null:document;function bm(t,e,n){var s=Ws;if(s&&typeof e=="string"&&e){var o=ae(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),xm.has(o)||(xm.add(o),t={rel:t,crossOrigin:n,href:e},s.querySelector(o)===null&&(e=s.createElement("link"),Ue(e,"link",t),be(e),s.head.appendChild(e)))}}function sv(t){Mn.D(t),bm("dns-prefetch",t,null)}function lv(t,e){Mn.C(t,e),bm("preconnect",t,e)}function ov(t,e,n){Mn.L(t,e,n);var s=Ws;if(s&&t&&e){var o='link[rel="preload"][as="'+ae(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+ae(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+ae(n.imageSizes)+'"]')):o+='[href="'+ae(t)+'"]';var r=o;switch(e){case"style":r=$s(t);break;case"script":r=tl(t)}zi.has(r)||(t=E({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),zi.set(r,t),s.querySelector(o)!==null||e==="style"&&s.querySelector(lo(r))||e==="script"&&s.querySelector(oo(r))||(e=s.createElement("link"),Ue(e,"link",t),be(e),s.head.appendChild(e)))}}function rv(t,e){Mn.m(t,e);var n=Ws;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+ae(s)+'"][href="'+ae(t)+'"]',r=o;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=tl(t)}if(!zi.has(r)&&(t=E({rel:"modulepreload",href:t},e),zi.set(r,t),n.querySelector(o)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(oo(r)))return}s=n.createElement("link"),Ue(s,"link",t),be(s),n.head.appendChild(s)}}}function uv(t,e,n){Mn.S(t,e,n);var s=Ws;if(s&&t){var o=Rn(s).hoistableStyles,r=$s(t);e=e||"default";var g=o.get(r);if(!g){var y={loading:0,preload:null};if(g=s.querySelector(lo(r)))y.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":e},n),(n=zi.get(r))&&uf(t,n);var S=g=s.createElement("link");be(S),Ue(S,"link",t),S._p=new Promise(function(R,G){S.onload=R,S.onerror=G}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Pr(g,e,s)}g={type:"stylesheet",instance:g,count:1,state:y},o.set(r,g)}}}function cv(t,e){Mn.X(t,e);var n=Ws;if(n&&t){var s=Rn(n).hoistableScripts,o=tl(t),r=s.get(o);r||(r=n.querySelector(oo(o)),r||(t=E({src:t,async:!0},e),(e=zi.get(o))&&cf(t,e),r=n.createElement("script"),be(r),Ue(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(o,r))}}function fv(t,e){Mn.M(t,e);var n=Ws;if(n&&t){var s=Rn(n).hoistableScripts,o=tl(t),r=s.get(o);r||(r=n.querySelector(oo(o)),r||(t=E({src:t,async:!0,type:"module"},e),(e=zi.get(o))&&cf(t,e),r=n.createElement("script"),be(r),Ue(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(o,r))}}function wm(t,e,n,s){var o=(o=Y.current)?qr(o):null;if(!o)throw Error(m(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=$s(n.href),n=Rn(o).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=$s(n.href);var r=Rn(o).hoistableStyles,g=r.get(t);if(g||(o=o.ownerDocument||o,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,g),(r=o.querySelector(lo(t)))&&!r._p&&(g.instance=r,g.state.loading=5),zi.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zi.set(t,n),r||dv(o,t,n,g.state))),e&&s===null)throw Error(m(528,""));return g}if(e&&s!==null)throw Error(m(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=tl(n),n=Rn(o).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(m(444,t))}}function $s(t){return'href="'+ae(t)+'"'}function lo(t){return'link[rel="stylesheet"]['+t+"]"}function Sm(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function dv(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Ue(e,"link",n),be(e),t.head.appendChild(e))}function tl(t){return'[src="'+ae(t)+'"]'}function oo(t){return"script[async]"+t}function Nm(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+ae(n.href)+'"]');if(s)return e.instance=s,be(s),s;var o=E({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),be(s),Ue(s,"style",o),Pr(s,n.precedence,t),e.instance=s;case"stylesheet":o=$s(n.href);var r=t.querySelector(lo(o));if(r)return e.state.loading|=4,e.instance=r,be(r),r;s=Sm(n),(o=zi.get(o))&&uf(s,o),r=(t.ownerDocument||t).createElement("link"),be(r);var g=r;return g._p=new Promise(function(y,S){g.onload=y,g.onerror=S}),Ue(r,"link",s),e.state.loading|=4,Pr(r,n.precedence,t),e.instance=r;case"script":return r=tl(n.src),(o=t.querySelector(oo(r)))?(e.instance=o,be(o),o):(s=n,(o=zi.get(r))&&(s=E({},n),cf(s,o)),t=t.ownerDocument||t,o=t.createElement("script"),be(o),Ue(o,"link",s),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(m(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(s=e.instance,e.state.loading|=4,Pr(s,n.precedence,t));return e.instance}function Pr(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=s.length?s[s.length-1]:null,r=o,g=0;g<s.length;g++){var y=s[g];if(y.dataset.precedence===e)r=y;else if(r!==o)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function uf(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function cf(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Gr=null;function Tm(t,e,n){if(Gr===null){var s=new Map,o=Gr=new Map;o.set(n,s)}else o=Gr,s=o.get(n),s||(s=new Map,o.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var r=n[o];if(!(r[Aa]||r[xe]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var g=r.getAttribute(e)||"";g=t+g;var y=s.get(g);y?y.push(r):s.set(g,[r])}}return s}function Em(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function hv(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;return e.rel==="stylesheet"?(t=e.disabled,typeof e.precedence=="string"&&t==null):!0;case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Cm(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function mv(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=$s(s.href),r=e.querySelector(lo(o));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Yr.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,be(r);return}r=e.ownerDocument||e,s=Sm(s),(o=zi.get(o))&&uf(s,o),r=r.createElement("link"),be(r);var g=r;g._p=new Promise(function(y,S){g.onload=y,g.onerror=S}),Ue(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=Yr.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var ff=0;function pv(t,e){return t.stylesheets&&t.count===0&&Ir(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Ir(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&ff===0&&(ff=62500*Kg());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ir(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>ff?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(o)}}:null}function Yr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ir(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Vr=null;function Ir(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Vr=new Map,e.forEach(gv,t),Vr=null,Yr.call(t))}function gv(t,e){if(!(e.state.loading&4)){var n=Vr.get(t);if(n)var s=n.get(null);else{n=new Map,Vr.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<o.length;r++){var g=o[r];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(n.set(g.dataset.precedence,g),s=g)}s&&n.set(null,s)}o=e.instance,g=o.getAttribute("data-precedence"),r=n.get(g)||s,r===s&&n.set(null,o),n.set(g,o),this.count++,s=Yr.bind(this),o.addEventListener("load",s),o.addEventListener("error",s),r?r.parentNode.insertBefore(o,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var ro={$$typeof:lt,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function vv(t,e,n,s,o,r,g,y,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.hiddenUpdates=cl(null),this.identifierPrefix=s,this.onUncaughtError=o,this.onCaughtError=r,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function jm(t,e,n,s,o,r,g,y,S,R,G,Q){return t=new vv(t,e,n,g,S,R,G,Q,y),e=1,r===!0&&(e|=24),r=Pe(3,null,null,e),t.current=r,r.stateNode=t,e=Gu(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},Xu(r),t}function Am(t){return t?(t=gn,t):gn}function Mm(t,e,n,s,o,r){o=Am(o),s.context===null?s.context=o:s.pendingContext=o,s=ta(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=ea(t,s,e),n!==null&&(oi(n,t,e),Zl(n,t,e))}function zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function df(t,e){zm(t,e),(t=t.alternate)&&zm(t,e)}function Om(t){if(t.tag===13||t.tag===31){var e=Ci(t,67108864);e!==null&&oi(e,t,67108864),df(t,67108864)}}function Lm(t){if(t.tag===13||t.tag===31){var e=vi();e=Je(e);var n=Ci(t,e);n!==null&&oi(n,t,e),df(t,e)}}var Xr=!0;function _v(t,e,n,s){var o=z.T;z.T=null;var r=tt.p;try{tt.p=2,hf(t,e,n,s)}finally{tt.p=r,z.T=o}}function yv(t,e,n,s){var o=z.T;z.T=null;var r=tt.p;try{tt.p=8,hf(t,e,n,s)}finally{tt.p=r,z.T=o}}function hf(t,e,n,s){if(Xr){var o=mf(s);if(o===null)Wc(t,e,s,Qr,n),Rm(t,s);else if(bv(o,t,e,n,s))s.stopPropagation();else if(Rm(t,s),e&4&&-1<xv.indexOf(t)){for(;o!==null;){var r=Dn(o);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var g=on(r.pendingLanes);if(g!==0){var y=r;for(y.pendingLanes|=2,y.entangledLanes|=2;g;){var S=1<<31-Ve(g);y.entanglements[1]|=S,g&=~S}ln(r),(Qt&6)===0&&(Mr=Ye()+500,io(0))}}break;case 31:case 13:y=Ci(r,2),y!==null&&oi(y,r,2),Or(),df(r,2)}if(r=mf(s),r===null&&Wc(t,e,s,Qr,n),r===o)break;o=r}o!==null&&s.stopPropagation()}else Wc(t,e,s,null,n)}}function mf(t){return t=Da(t),pf(t)}var Qr=null;function pf(t){if(Qr=null,t=cn(t),t!==null){var e=x(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=b(e),t!==null)return t;t=null}else if(n===31){if(t=k(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Qr=t,null}function Dm(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yu()){case ms:return 2;case rl:return 8;case Sa:case xu:return 32;case ul:return 268435456;default:return 32}default:return 32}}var gf=!1,da=null,ha=null,ma=null,uo=new Map,co=new Map,pa=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rm(t,e){switch(t){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function fo(t,e,n,s,o,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[o]},e!==null&&(e=Dn(e),e!==null&&Om(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function bv(t,e,n,s,o){switch(e){case"focusin":return da=fo(da,t,e,n,s,o),!0;case"dragenter":return ha=fo(ha,t,e,n,s,o),!0;case"mouseover":return ma=fo(ma,t,e,n,s,o),!0;case"pointerover":var r=o.pointerId;return uo.set(r,fo(uo.get(r)||null,t,e,n,s,o)),!0;case"gotpointercapture":return r=o.pointerId,co.set(r,fo(co.get(r)||null,t,e,n,s,o)),!0}return!1}function Bm(t){var e=cn(t.target);if(e!==null){var n=x(e);if(n!==null){if(e=n.tag,e===13){if(e=b(n),e!==null){t.blockedOn=e,dl(t.priority,function(){Lm(n)});return}}else if(e===31){if(e=k(n),e!==null){t.blockedOn=e,dl(t.priority,function(){Lm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mf(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);ys=s,n.target.dispatchEvent(s),ys=null}else return e=Dn(n),e!==null&&Om(e),t.blockedOn=n,!1;e.shift()}return!0}function km(t,e,n){Kr(t)&&n.delete(e)}function wv(){gf=!1,da!==null&&Kr(da)&&(da=null),ha!==null&&Kr(ha)&&(ha=null),ma!==null&&Kr(ma)&&(ma=null),uo.forEach(km),co.forEach(km)}function Jr(t,e){t.blockedOn===e&&(t.blockedOn=null,gf||(gf=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,wv)))}var Fr=null;function Um(t){Fr!==t&&(Fr=t,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){Fr===t&&(Fr=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],o=t[e+2];if(typeof s!="function"){if(pf(s||n)===null)continue;break}var r=Dn(n);r!==null&&(t.splice(e,3),e-=3,hc(r,{pending:!0,data:o,method:n.method,action:s},s,o))}}))}function el(t){function e(S){return Jr(S,t)}da!==null&&Jr(da,t),ha!==null&&Jr(ha,t),ma!==null&&Jr(ma,t),uo.forEach(e),co.forEach(e);for(var n=0;n<pa.length;n++){var s=pa[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<pa.length&&(n=pa[0],n.blockedOn===null);)Bm(n),n.blockedOn===null&&pa.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var o=n[s],r=n[s+1],g=o[Me]||null;if(typeof r=="function")g||Um(n);else if(g){var y=null;if(r&&r.hasAttribute("formAction")){if(o=r,g=r[Me]||null)y=g.formAction;else if(pf(o)!==null)continue}else y=g.action;typeof y=="function"?n[s+1]=y:(n.splice(s,3),s-=3),Um(n)}}}function Hm(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(g){return o=g})},focusReset:"manual",scroll:"manual"})}function e(){o!==null&&(o(),o=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),o!==null&&(o(),o=null)}}}function vf(t){this._internalRoot=t}Wr.prototype.render=vf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(m(409));var n=e.current,s=vi();Mm(n,s,t,e,null,null)},Wr.prototype.unmount=vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mm(t.current,2,null,t,null,null),Or(),e[un]=null}};function Wr(t){this._internalRoot=t}Wr.prototype.unstable_scheduleHydration=function(t){if(t){var e=fl();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pa.length&&e!==0&&e<pa[n].priority;n++);pa.splice(n,0,t),n===0&&Bm(t)}};var Zm=h.version;if(Zm!=="19.2.4")throw Error(m(527,Zm,"19.2.4"));tt.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(m(188)):(t=Object.keys(t).join(","),Error(m(268,t)));return t=N(e),t=t!==null?O(t):null,t=t===null?null:t.stateNode,t};var Sv={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$r.isDisabled&&$r.supportsFiber)try{Ln=$r.inject(Sv),De=$r}catch{}}return mo.createRoot=function(t,e){if(!v(t))throw Error(m(299));var n=!1,s="",o=Xd,r=Qd,g=Kd;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(g=e.onRecoverableError)),e=jm(t,1,!1,null,null,n,s,null,o,r,g,Hm),t[un]=e.current,Fc(t),new vf(e)},mo.hydrateRoot=function(t,e,n){if(!v(t))throw Error(m(299));var s=!1,o="",r=Xd,g=Qd,y=Kd,S=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.formState!==void 0&&(S=n.formState)),e=jm(t,1,!0,e,n??null,s,o,S,r,g,y,Hm),e.context=Am(null),n=e.current,s=vi(),s=Je(s),o=ta(s),o.callback=null,ea(n,o,s),n=s,e.current.lanes=n,rn(e,n),ln(e),t[un]=e.current,Fc(t),new Wr(e)},mo.version="19.2.4",mo}var Qm;function l0(){if(Qm)return bf.exports;Qm=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(h){console.error(h)}}return f(),bf.exports=s0(),bf.exports}var o0=l0();const r0="modulepreload",u0=function(f){return"/"+f},Km={},Gf=function(h,d,m){let v=Promise.resolve();if(d&&d.length>0){let C=function(N){return Promise.all(N.map(O=>Promise.resolve(O).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),k=b?.nonce||b?.getAttribute("nonce");v=C(d.map(N=>{if(N=u0(N),N in Km)return;Km[N]=!0;const O=N.endsWith(".css"),E=O?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${N}"]${E}`))return;const Z=document.createElement("link");if(Z.rel=O?"stylesheet":r0,O||(Z.as="script"),Z.crossOrigin="",Z.href=N,k&&Z.setAttribute("nonce",k),document.head.appendChild(Z),O)return new Promise((P,V)=>{Z.addEventListener("load",P),Z.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${N}`)))})}))}function x(b){const k=new Event("vite:preloadError",{cancelable:!0});if(k.payload=b,window.dispatchEvent(k),!k.defaultPrevented)throw b}return v.then(b=>{for(const k of b||[])k.status==="rejected"&&x(k.reason);return h().catch(x)})},c0="https://zvhoxioxlnupzvihamts.supabase.co",f0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp2aG94aW94bG51cHp2aWhhbXRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2ODExNTcsImV4cCI6MjA4NTI1NzE1N30.0aR3ipzyRAmvAh-lQwDaMxHH2azoH3PlBLxz0-JSwVk",et=Mv(c0,f0);async function d0(){return"Notification"in window?await Notification.requestPermission():"denied"}async function h0(){if(!("serviceWorker"in navigator))return null;try{const h=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return h||null}catch(f){return console.error("Failed to subscribe to push:",f),null}}function m0(f,h){Notification.permission==="granted"&&("serviceWorker"in navigator?navigator.serviceWorker.ready.then(d=>{d.showNotification(f,h)}).catch(()=>{new Notification(f,h)}):new Notification(f,h))}const Qp=j.createContext({}),Ze=()=>j.useContext(Qp),p0=({children:f})=>{const[h,d]=j.useState(null),[m,v]=j.useState(null),[x,b]=j.useState(null),[k,C]=j.useState(null),[N,O]=j.useState(!0),[E,Z]=j.useState(null);j.useEffect(()=>{et.auth.getSession().then(({data:{session:it}})=>{d(it?.user??null),it?.user?P(it.user.id,it.user.email):O(!1)});const{data:{subscription:mt}}=et.auth.onAuthStateChange((it,nt)=>{d(nt?.user??null),nt?.user?P(nt.user.id):(v(null),O(!1))});return()=>mt.unsubscribe()},[]),j.useEffect(()=>{if(!h?.id)return;const mt=et.channel(`profile:${h.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${h.id}`},it=>{v(it.new)}).subscribe();return()=>et.removeChannel(mt)},[h?.id]),j.useEffect(()=>{if(!h?.id)return;const mt=et.channel(`notifications:${h.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${h.id}`},it=>{Z(it.new)}).subscribe();return()=>et.removeChannel(mt)},[h?.id]),j.useEffect(()=>{if(!k?.id)return;const mt=et.channel(`partner_profile:${k.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${k.id}`},it=>{C(nt=>({...nt,...it.new}))}).subscribe();return()=>et.removeChannel(mt)},[k?.id]),j.useEffect(()=>{if(!x?.id)return;const mt=et.channel(`couple:${x.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"couples",filter:`id=eq.${x.id}`},it=>{b(nt=>({...nt,...it.new}))}).subscribe();return()=>et.removeChannel(mt)},[x?.id]);const P=async(mt,it)=>{try{let{data:nt,error:F}=await et.from("profiles").select("*").eq("id",mt).single();if(F&&F.code==="PGRST116"){const{data:{user:at}}=await et.auth.getUser(),pt=at?.user_metadata?.username||it?.split("@")[0]||"User",{data:rt,error:z}=await et.from("profiles").insert([{id:mt,username:pt}]).select().single();if(z)throw z;nt=rt}else if(F)throw F;if(v(nt),nt?.couple_id){const{data:at}=await et.from("couples").select("*").eq("id",nt.couple_id).single();if(b(at),at){const pt=at.partner_a===mt?at.partner_b:at.partner_a;if(pt){const{data:rt}=await et.from("profiles").select("*").eq("id",pt).single();C(rt)}}}else b(null),C(null)}catch(nt){console.error("Error in fetchProfile:",nt)}finally{O(!1)}},V=async mt=>{const{error:it}=await et.auth.resend({type:"signup",email:mt,options:{emailRedirectTo:window.location.origin}});if(it)throw it},B=async()=>{const{error:mt}=await et.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if(mt)throw mt},W=async(mt,it)=>{const{error:nt}=await et.auth.signInWithPassword({email:mt,password:it});if(nt)throw nt},J=async(mt,it,nt,F)=>{const{data:at,error:pt}=await et.auth.signUp({email:mt,password:it,options:{data:{username:nt}}});if(pt)throw pt;if(!at.session)throw new Error("Email confirmation is still enabled. Please disable it in Supabase Dashboard: Authentication  Providers  Email  Confirm email (OFF)");let rt=null;if(F&&at.user){const z=F.name.split(".").pop(),tt=`${at.user.id}/avatar.${z}`,{error:K}=await et.storage.from("avatars").upload(tt,F,{cacheControl:"3600",upsert:!0});if(K)throw console.error("Avatar upload error:",K),new Error("Failed to upload profile picture. Please try again.");const{data:{publicUrl:At}}=et.storage.from("avatars").getPublicUrl(tt);rt=At}if(at.user){const{error:z}=await et.from("profiles").insert([{id:at.user.id,username:nt,avatar_url:rt}]);z&&console.error("Profile creation error:",z)}},$=async()=>{const{error:mt}=await et.auth.signOut();if(mt)throw mt},lt=async mt=>{try{const{error:it}=await et.from("profiles").update(mt).eq("id",h.id);if(it)throw it;v(nt=>({...nt,...mt}))}catch(it){throw console.error("Error updating profile:",it),it}},ot=async mt=>{const{error:it}=await et.auth.updateUser({password:mt});if(it)throw it},[Et,ht]=j.useState(!1);j.useEffect(()=>{Notification.permission==="granted"&&ht(!0)},[]);const yt={user:h,profile:m,couple:x,partnerProfile:k,loading:N,resendConfirmationEmail:V,signInWithGoogle:B,signInWithEmail:W,signUpWithEmail:J,signOut:$,updateProfile:lt,updatePassword:ot,toggleNotifications:async()=>{Et?ht(!1):await d0()==="granted"?(ht(!0),h0().catch(console.error),m0("Notifications Enabled! ",{body:"You will now receive love notes and updates.",icon:"/pwa-192x192.png"})):alert("Permission denied. Please check browser settings.")},notificationsEnabled:Et,notification:E,showNotification:(mt,it,nt="system")=>{Z({title:mt,message:it,type:nt,id:Date.now()})},removeNotification:()=>Z(null),isProfileComplete:()=>m&&m.username&&m.avatar_url};return u.jsx(Qp.Provider,{value:yt,children:f})},va=({active:f,children:h,className:d=""})=>{const[m,v]=j.useState(f);return j.useEffect(()=>{f&&!m&&v(!0)},[f,m]),m?u.jsx("div",{style:{display:f?"block":"none"},className:`h-full ${f?"animate-in fade-in zoom-in duration-300":""} ${d}`,children:h}):null},ya=({children:f})=>u.jsx(St.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.4,ease:[.22,1,.36,1]},className:"h-full",children:f}),Kp=yi.memo(({theme:f})=>{const h=f?.palette||["#EC4899","#DB2777","#F472B6","#BE185D"],d=f?.gradient||"bg-gradient-to-br from-slate-950 via-black to-slate-900",[m,v]=j.useState({x:0,y:0}),x=j.useCallback(()=>({x:Math.random()*80-40,y:Math.random()*80-40}),[]);j.useEffect(()=>{v(x())},[x]);const b=j.useMemo(()=>({size:"w-[60rem] h-[60rem]",initialX:"calc(50% - 30rem)",initialY:"calc(50% - 30rem)"}),[]);return u.jsxs("div",{className:`fixed inset-0 overflow-hidden pointer-events-none -z-50 transition-colors duration-1000 ${d}`,children:[u.jsx("div",{className:"absolute inset-0 bg-black/30"}),u.jsx("div",{className:"absolute inset-0 opacity-60 blur-3xl",children:u.jsx(St.div,{className:"absolute inset-0 flex items-center justify-center pointer-events-none",animate:{x:`${m.x}%`,y:`${m.y}%`},transition:{duration:25,ease:"easeInOut"},onAnimationComplete:()=>{v(x())},children:u.jsx(St.div,{className:`mix-blend-screen ${b.size}`,initial:{borderRadius:"60% 40% 30% 70% / 60% 30% 70% 40%"},animate:{scale:[1,1.2,.9,1.1,1],rotate:[0,90,180,270,360],borderRadius:["60% 40% 30% 70% / 60% 30% 70% 40%","30% 60% 70% 40% / 50% 60% 30% 60%","70% 30% 50% 50% / 30% 50% 70% 50%","60% 40% 30% 70% / 60% 30% 70% 40%"],backgroundColor:h},transition:{rotate:{duration:60,repeat:1/0,ease:"linear"},scale:{duration:20,repeat:1/0,ease:"easeInOut"},borderRadius:{duration:15,repeat:1/0,ease:"easeInOut"},backgroundColor:{duration:10,repeat:1/0,ease:"linear"}}})})}),u.jsx("div",{className:"absolute inset-0 opacity-[0.04]",style:{backgroundImage:'url("data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E")'}})]})});Kp.displayName="AtmosphericBackground";const Jp=yi.memo(()=>{const f=j.useRef(null);return j.useEffect(()=>{const h=f.current,d=h.getContext("2d");let m;const v=()=>{h.width=window.innerWidth,h.height=window.innerHeight};window.addEventListener("resize",v),v();const x=[],b=50;class k{constructor(){this.x=Math.random()*h.width,this.y=Math.random()*h.height,this.size=Math.random()*3+1,this.speedX=Math.random()*1-.5,this.speedY=Math.random()*1-.5,this.opacity=Math.random()*.5+.2}update(){this.x+=this.speedX,this.y+=this.speedY,this.x>h.width&&(this.x=0),this.x<0&&(this.x=h.width),this.y>h.height&&(this.y=0),this.y<0&&(this.y=h.height)}draw(){d.fillStyle=`rgba(255, 215, 0, ${this.opacity})`,d.beginPath(),d.arc(this.x,this.y,this.size,0,Math.PI*2),d.fill()}}for(let N=0;N<b;N++)x.push(new k);const C=()=>{d.clearRect(0,0,h.width,h.height),x.forEach(N=>{N.update(),N.draw()}),m=requestAnimationFrame(C)};return C(),()=>{window.removeEventListener("resize",v),cancelAnimationFrame(m)}},[]),u.jsx("canvas",{ref:f,className:"absolute inset-0 pointer-events-none z-0 mix-blend-screen"})});Jp.displayName="GoldenParticles";function g0(){const{user:f,notification:h,removeNotification:d,showNotification:m}=Ze(),[v,x]=j.useState(!1),[b,k]=j.useState([]),[C,N]=j.useState(0),O=j.useRef(null),E=async()=>{const{data:B}=await et.from("notifications").select("*").eq("user_id",f.id).order("created_at",{ascending:!1}).limit(10);B&&(k(B),N(B.filter(W=>!W.is_read).length))};j.useEffect(()=>{f&&E()},[f,v]),j.useEffect(()=>{h&&(k(B=>[h,...B]),N(B=>B+1))},[h]);const Z=async B=>{k(W=>W.map(J=>J.id===B?{...J,is_read:!0}:J)),N(W=>Math.max(0,W-1)),await et.from("notifications").update({is_read:!0}).eq("id",B)},P=async()=>{k(B=>B.map(W=>({...W,is_read:!0}))),N(0),await et.from("notifications").update({is_read:!0}).eq("user_id",f.id)},V=async(B,W)=>{B.stopPropagation(),k(J=>J.filter($=>$.id!==W)),await et.from("notifications").delete().eq("id",W)};return j.useEffect(()=>{const B=W=>{O.current&&!O.current.contains(W.target)&&(x(!1),h&&d())};return v&&document.addEventListener("mousedown",B),()=>{document.removeEventListener("mousedown",B)}},[v,h]),u.jsxs("div",{className:"relative z-50",ref:O,children:[u.jsxs("button",{onClick:()=>x(!v),className:"relative p-3 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 transition-all group",children:[u.jsx(al,{className:`w-5 h-5 ${C>0?"text-white":"text-white/60 group-hover:text-white"}`}),C>0&&u.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-[#1a0a0f]"})]}),u.jsx(ri,{children:v&&u.jsxs(St.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:"absolute right-0 top-14 w-80 bg-[#1a0a0f]/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden",children:[u.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center justify-between",children:[u.jsx("h3",{className:"text-sm font-bold text-white",children:"Notifications"}),b.length>0&&u.jsx("button",{onClick:P,className:"text-[10px] text-love-400 hover:text-love-300 font-medium uppercase tracking-wider",children:"Mark all read"})]}),u.jsx("div",{className:"max-h-[60vh] overflow-y-auto scrollbar-hide p-2 space-y-1",children:b.length===0?u.jsxs("div",{className:"py-8 text-center text-white/30 text-xs",children:[u.jsx(al,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No new notifications"]}):b.map(B=>u.jsxs("div",{onClick:()=>Z(B.id),className:`p-3 rounded-xl flex gap-3 transition-colors cursor-pointer group relative overflow-hidden ${B.is_read?"opacity-60 hover:opacity-100 hover:bg-white/5":"bg-white/5 hover:bg-white/10"}`,children:[u.jsxs("div",{className:`p-2 rounded-full h-fit flex-shrink-0 ${B.type==="heartbeat"?"bg-pink-500/20 text-pink-400":B.type==="radio"?"bg-indigo-500/20 text-indigo-400":"bg-blue-500/20 text-blue-400"}`,children:[B.type==="heartbeat"&&u.jsx(Gi,{className:"w-4 h-4"}),B.type==="radio"&&u.jsx(nl,{className:"w-4 h-4"}),B.type!=="heartbeat"&&B.type!=="radio"&&u.jsx(Df,{className:"w-4 h-4"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:`text-xs font-bold leading-tight ${B.is_read?"text-white/70":"text-white"}`,children:B.title}),u.jsx("span",{className:"text-[10px] text-white/30 whitespace-nowrap ml-2",children:new Date(B.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-xs text-white/50 mt-1 line-clamp-2 leading-relaxed",children:B.message})]}),u.jsx("button",{onClick:W=>V(W,B.id),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-red-500/20 text-red-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-500/30",children:u.jsx(_i,{className:"w-3 h-3"})})]},B.id))})]})})]})}const Nf=[{id:"happy",icon:Hf,label:"Happy",color:"text-yellow-400",bg:"bg-yellow-400/20"},{id:"sad",icon:Hp,label:"Sad",color:"text-blue-400",bg:"bg-blue-400/20"},{id:"romantic",icon:Gi,label:"Romantic",color:"text-pink-500",bg:"bg-pink-500/20"},{id:"tired",icon:cs,label:"Tired",color:"text-purple-400",bg:"bg-purple-400/20"},{id:"energetic",icon:sl,label:"Energetic",color:"text-orange-400",bg:"bg-orange-400/20"},{id:"cozy",icon:Zp,label:"Cozy",color:"text-amber-700",bg:"bg-amber-700/20"},{id:"gloomy",icon:qp,label:"Gloomy",color:"text-gray-400",bg:"bg-gray-400/20"}];function v0(){const{profile:f}=Ze(),[h,d]=j.useState(null),[m,v]=j.useState(!1);j.useEffect(()=>{f?.mood&&d(Nf.find(b=>b.id===f.mood)||Nf[0])},[f]);const x=async b=>{d(b),v(!1);try{const{error:k}=await et.from("profiles").update({mood:b.id}).eq("id",f.id);if(k)throw k}catch(k){console.error("Error updating mood:",k)}};return u.jsxs("div",{className:"w-full",children:[u.jsxs("div",{onClick:()=>v(!m),className:"relative overflow-hidden liquid-glass p-4 rounded-2xl flex items-center justify-between cursor-pointer active:scale-95 transition-transform group",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`p-3 rounded-full ${h?.bg||"bg-white/5"} transition-colors duration-300`,children:h?u.jsx(h.icon,{className:`w-6 h-6 ${h.color}`}):u.jsx(Hf,{className:"w-6 h-6 text-white/50"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-bold group-hover:text-white/60 transition-colors",children:"Current Mood"}),u.jsx("p",{className:"text-lg font-medium",children:h?.label||"How are you?"})]})]}),u.jsx("div",{className:"text-xs text-white/30 group-hover:text-white/50 transition-colors",children:"Tap to change"})]}),u.jsx(ri,{children:m&&u.jsx(St.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:[.22,1,.36,1]},className:"overflow-hidden",children:u.jsx("div",{className:"grid grid-cols-4 gap-2 mt-4 p-2",children:Nf.map(b=>u.jsxs(St.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x(b),className:`flex flex-col items-center gap-2 p-3 rounded-xl transition-colors ${h?.id===b.id?"bg-white/10":"hover:bg-white/5"}`,children:[u.jsx(b.icon,{className:`w-6 h-6 ${b.color}`}),u.jsx("span",{className:"text-[10px] text-white/60",children:b.label})]},b.id))})})})]})}const _0=({id:f,onComplete:h})=>{const d=Math.random()*360,m=50+Math.random()*100,v=Math.cos(d*(Math.PI/180))*m,x=Math.sin(d*(Math.PI/180))*m;return u.jsx(St.div,{initial:{x:0,y:0,scale:.2,opacity:1,rotate:0},animate:{x:v,y:x,scale:0,opacity:0},transition:{duration:.8,ease:"easeOut"},onAnimationComplete:()=>h(f),className:"absolute pointer-events-none top-1/2 left-1/2 -ml-2 -mt-2",children:u.jsx(Gi,{className:"w-4 h-4 text-pink-400 fill-pink-400"})})};function y0(){const{profile:f,couple:h}=Ze(),[d,m]=j.useState(null),[v,x]=j.useState(!1),[b,k]=j.useState(0),[C,N]=j.useState([]);j.useEffect(()=>{const J=setInterval(()=>{k($=>Math.max(0,$-.5))},100);return()=>clearInterval(J)},[]),j.useEffect(()=>{if(!f?.couple_id)return;const J=et.channel(`heartbeat:${f.couple_id}`).on("broadcast",{event:"heartbeat"},$=>{$.sender_id!==f.id&&(m(Date.now()),navigator.vibrate&&navigator.vibrate([50,40,150]))}).subscribe();return()=>{et.removeChannel(J)}},[f?.couple_id,f?.id]);const O=async()=>{if(!f?.couple_id||!h)return;x(!0),navigator.vibrate&&navigator.vibrate(20),await et.channel(`heartbeat:${f.couple_id}`).send({type:"broadcast",event:"heartbeat",payload:{sender_id:f.id,timestamp:new Date}});const J=h.partner_a===f.id?h.partner_b:h.partner_a;J&&await et.from("notifications").insert([{user_id:J,type:"heartbeat",title:`Heartbeat from ${f?.username||"Partner"} `,message:"Your partner is thinking of you right now.",metadata:{type:"heartbeat"}}]),setTimeout(()=>x(!1),200)},E=()=>{k(lt=>Math.min(lt+2,10));const J=6+Math.floor(Math.random()*4),$=Array.from({length:J}).map(lt=>({id:Math.random().toString(36).substr(2,9)}));N(lt=>[...lt,...$]),O()},Z=J=>{N($=>$.filter(lt=>lt.id!==J))},P={idle:{scale:1,transition:{type:"spring",stiffness:100,damping:20}},beating:{scale:[1,1.25,1,1.3,1],transition:{duration:.8,times:[0,.15,.3,.45,1],repeat:2,ease:"easeInOut"}},sending:{scale:.85,transition:{type:"spring",stiffness:500,damping:15}}},V=d&&Date.now()-d<3e3,B=40+b*5,W=b>5?"text-white":"text-love-100";return u.jsxs("div",{className:"relative flex flex-col items-center justify-center py-12 overflow-visible",children:[u.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:u.jsx(St.div,{animate:{scale:[1,1.1+b/20,1],opacity:[.1,.15+b/50,.1]},transition:{duration:4-b/5,repeat:1/0,ease:"easeInOut"},className:"bg-love-500 rounded-full blur-3xl transition-all duration-500",style:{width:`${12+b/2}rem`,height:`${12+b/2}rem`}})}),u.jsx(ri,{children:V&&u.jsxs(u.Fragment,{children:[u.jsx(St.div,{initial:{scale:.8,opacity:.6},animate:{scale:2.8,opacity:0},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute w-24 h-24 border-[3px] border-love-400 rounded-full z-0"},d),u.jsx(St.div,{initial:{scale:.8,opacity:.4},animate:{scale:3.5,opacity:0},exit:{opacity:0},transition:{duration:1.8,delay:.1,ease:"easeOut"},className:"absolute w-24 h-24 border border-love-300 rounded-full z-0"},d+"-echo")]})}),u.jsx("div",{className:"absolute inset-0 pointer-events-none z-20",children:C.map(J=>u.jsx(_0,{id:J.id,onComplete:Z},J.id))}),u.jsxs(St.button,{variants:P,animate:v?"sending":V?"beating":"idle",whileTap:{scale:.85},onClick:E,className:"relative z-10 rounded-full flex items-center justify-center group transition-all duration-300 shadow-2xl",style:{width:"6rem",height:"6rem",background:`linear-gradient(135deg, ${b>5?"#f43f5e":"#ec4899"}, ${b>8?"#be123c":"#db2777"})`,boxShadow:`0 0 ${B}px rgba(236, 72, 153, ${.4+b/30})`},children:[u.jsx("div",{className:"absolute inset-0 rounded-full bg-white opacity-0 group-hover:opacity-20 transition-opacity"}),u.jsx(St.div,{animate:V?{rotate:[0,-15,15,0]}:{},transition:{duration:.4},children:u.jsx(Gi,{className:`w-12 h-12 ${W} fill-white/20 transition-colors duration-300`,strokeWidth:2.5})}),u.jsx(ri,{children:(V||b>0)&&u.jsx(St.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0},className:"absolute bottom-5",children:u.jsx(zv,{className:"w-5 h-5 text-white/60 animate-pulse"})})})]}),u.jsx(ri,{mode:"wait",children:V?u.jsxs(St.p,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0},className:"mt-8 text-xs font-bold text-love-200 tracking-[0.2em] uppercase flex items-center gap-2 drop-shadow-lg",children:[u.jsx(Gi,{className:"w-3 h-3 fill-love-500 animate-ping"}),"Connected"]},"feeling"):u.jsx(St.p,{initial:{opacity:0},animate:{opacity:.6},exit:{opacity:0},className:"mt-8 text-[10px] font-medium text-white/30 tracking-[0.2em] uppercase",children:"Tap to vibe"},"idle")})]})}function Fp(f,h){const d=j.useRef(h);j.useEffect(function(){h!==d.current&&f.attributionControl!=null&&(d.current!=null&&f.attributionControl.removeAttribution(d.current),h!=null&&f.attributionControl.addAttribution(h)),d.current=h},[f,h])}const x0=1;function b0(f){return Object.freeze({__version:x0,map:f})}function Wp(f,h){return Object.freeze({...f,...h})}const Yf=j.createContext(null);function mu(){const f=j.use(Yf);if(f==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return f}function $p(f){function h(d,m){const{instance:v,context:x}=f(d).current;j.useImperativeHandle(m,()=>v);const{children:b}=d;return b==null?null:yi.createElement(Yf,{value:x},b)}return j.forwardRef(h)}function w0(f){function h(d,m){const[v,x]=j.useState(!1),{instance:b}=f(d,x).current;j.useImperativeHandle(m,()=>b),j.useEffect(function(){v&&b.update()},[b,v,d.children]);const k=b._contentNode;return k?Cv.createPortal(d.children,k):null}return j.forwardRef(h)}function S0(f){function h(d,m){const{instance:v}=f(d).current;return j.useImperativeHandle(m,()=>v),null}return j.forwardRef(h)}function Vf(f,h){const d=j.useRef(void 0);j.useEffect(function(){return h!=null&&f.instance.on(h),d.current=h,function(){d.current!=null&&f.instance.off(d.current),d.current=null}},[f,h])}function pu(f,h){const d=f.pane??h.pane;return d?{...f,pane:d}:f}function N0(f,h){return function(m,v){const x=mu(),b=f(pu(m,x),x);return Fp(x.map,m.attribution),Vf(b.current,m.eventHandlers),h(b.current,x,m,v),b}}var go={exports:{}};var T0=go.exports,Jm;function E0(){return Jm||(Jm=1,(function(f,h){(function(d,m){m(h)})(T0,(function(d){var m="1.9.4";function v(i){var a,l,c,p;for(l=1,c=arguments.length;l<c;l++){p=arguments[l];for(a in p)i[a]=p[a]}return i}var x=Object.create||(function(){function i(){}return function(a){return i.prototype=a,new i}})();function b(i,a){var l=Array.prototype.slice;if(i.bind)return i.bind.apply(i,l.call(arguments,1));var c=l.call(arguments,2);return function(){return i.apply(a,c.length?c.concat(l.call(arguments)):arguments)}}var k=0;function C(i){return"_leaflet_id"in i||(i._leaflet_id=++k),i._leaflet_id}function N(i,a,l){var c,p,_,w;return w=function(){c=!1,p&&(_.apply(l,p),p=!1)},_=function(){c?p=arguments:(i.apply(l,arguments),setTimeout(w,a),c=!0)},_}function O(i,a,l){var c=a[1],p=a[0],_=c-p;return i===c&&l?i:((i-p)%_+_)%_+p}function E(){return!1}function Z(i,a){if(a===!1)return i;var l=Math.pow(10,a===void 0?6:a);return Math.round(i*l)/l}function P(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function V(i){return P(i).split(/\s+/)}function B(i,a){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?x(i.options):{});for(var l in a)i.options[l]=a[l];return i.options}function W(i,a,l){var c=[];for(var p in i)c.push(encodeURIComponent(l?p.toUpperCase():p)+"="+encodeURIComponent(i[p]));return(!a||a.indexOf("?")===-1?"?":"&")+c.join("&")}var J=/\{ *([\w_ -]+) *\}/g;function $(i,a){return i.replace(J,function(l,c){var p=a[c];if(p===void 0)throw new Error("No value provided for variable "+l);return typeof p=="function"&&(p=p(a)),p})}var lt=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ot(i,a){for(var l=0;l<i.length;l++)if(i[l]===a)return l;return-1}var Et="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ht(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Nt=0;function yt(i){var a=+new Date,l=Math.max(0,16-(a-Nt));return Nt=a+l,window.setTimeout(i,l)}var mt=window.requestAnimationFrame||ht("RequestAnimationFrame")||yt,it=window.cancelAnimationFrame||ht("CancelAnimationFrame")||ht("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function nt(i,a,l){if(l&&mt===yt)i.call(a);else return mt.call(window,b(i,a))}function F(i){i&&it.call(window,i)}var at={__proto__:null,extend:v,create:x,bind:b,get lastId(){return k},stamp:C,throttle:N,wrapNum:O,falseFn:E,formatNum:Z,trim:P,splitWords:V,setOptions:B,getParamString:W,template:$,isArray:lt,indexOf:ot,emptyImageUrl:Et,requestFn:mt,cancelFn:it,requestAnimFrame:nt,cancelAnimFrame:F};function pt(){}pt.extend=function(i){var a=function(){B(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=a.__super__=this.prototype,c=x(l);c.constructor=a,a.prototype=c;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(a[p]=this[p]);return i.statics&&v(a,i.statics),i.includes&&(rt(i.includes),v.apply(null,[c].concat(i.includes))),v(c,i),delete c.statics,delete c.includes,c.options&&(c.options=l.options?x(l.options):{},v(c.options,i.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,w=c._initHooks.length;_<w;_++)c._initHooks[_].call(this)}},a},pt.include=function(i){var a=this.prototype.options;return v(this.prototype,i),i.options&&(this.prototype.options=a,this.mergeOptions(i.options)),this},pt.mergeOptions=function(i){return v(this.prototype.options,i),this},pt.addInitHook=function(i){var a=Array.prototype.slice.call(arguments,1),l=typeof i=="function"?i:function(){this[i].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function rt(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=lt(i)?i:[i];for(var a=0;a<i.length;a++)i[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var z={on:function(i,a,l){if(typeof i=="object")for(var c in i)this._on(c,i[c],a);else{i=V(i);for(var p=0,_=i.length;p<_;p++)this._on(i[p],a,l)}return this},off:function(i,a,l){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var c in i)this._off(c,i[c],a);else{i=V(i);for(var p=arguments.length===1,_=0,w=i.length;_<w;_++)p?this._off(i[_]):this._off(i[_],a,l)}return this},_on:function(i,a,l,c){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(i,a,l)===!1){l===this&&(l=void 0);var p={fn:a,ctx:l};c&&(p.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(p)}},_off:function(i,a,l){var c,p,_;if(this._events&&(c=this._events[i],!!c)){if(arguments.length===1){if(this._firingCount)for(p=0,_=c.length;p<_;p++)c[p].fn=E;delete this._events[i];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var w=this._listens(i,a,l);if(w!==!1){var M=c[w];this._firingCount&&(M.fn=E,this._events[i]=c=c.slice()),c.splice(w,1)}}},fire:function(i,a,l){if(!this.listens(i,l))return this;var c=v({},a,{type:i,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var p=this._events[i];if(p){this._firingCount=this._firingCount+1||1;for(var _=0,w=p.length;_<w;_++){var M=p[_],U=M.fn;M.once&&this.off(i,U,M.ctx),U.call(M.ctx||this,c)}this._firingCount--}}return l&&this._propagateEvent(c),this},listens:function(i,a,l,c){typeof i!="string"&&console.warn('"string" type argument expected');var p=a;typeof a!="function"&&(c=!!a,p=void 0,l=void 0);var _=this._events&&this._events[i];if(_&&_.length&&this._listens(i,p,l)!==!1)return!0;if(c){for(var w in this._eventParents)if(this._eventParents[w].listens(i,a,l,c))return!0}return!1},_listens:function(i,a,l){if(!this._events)return!1;var c=this._events[i]||[];if(!a)return!!c.length;l===this&&(l=void 0);for(var p=0,_=c.length;p<_;p++)if(c[p].fn===a&&c[p].ctx===l)return p;return!1},once:function(i,a,l){if(typeof i=="object")for(var c in i)this._on(c,i[c],a,!0);else{i=V(i);for(var p=0,_=i.length;p<_;p++)this._on(i[p],a,l,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[C(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[C(i)],this},_propagateEvent:function(i){for(var a in this._eventParents)this._eventParents[a].fire(i.type,v({layer:i.target,propagatedFrom:i.target},i),!0)}};z.addEventListener=z.on,z.removeEventListener=z.clearAllEventListeners=z.off,z.addOneTimeEventListener=z.once,z.fireEvent=z.fire,z.hasEventListeners=z.listens;var tt=pt.extend(z);function K(i,a,l){this.x=l?Math.round(i):i,this.y=l?Math.round(a):a}var At=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(i){return this.clone()._add(st(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(st(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new K(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new K(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=At(this.x),this.y=At(this.y),this},distanceTo:function(i){i=st(i);var a=i.x-this.x,l=i.y-this.y;return Math.sqrt(a*a+l*l)},equals:function(i){return i=st(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=st(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+Z(this.x)+", "+Z(this.y)+")"}};function st(i,a,l){return i instanceof K?i:lt(i)?new K(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new K(i.x,i.y):new K(i,a,l)}function zt(i,a){if(i)for(var l=a?[i,a]:i,c=0,p=l.length;c<p;c++)this.extend(l[c])}zt.prototype={extend:function(i){var a,l;if(!i)return this;if(i instanceof K||typeof i[0]=="number"||"x"in i)a=l=st(i);else if(i=ft(i),a=i.min,l=i.max,!a||!l)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=l.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(i){return st((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return st(this.min.x,this.max.y)},getTopRight:function(){return st(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var a,l;return typeof i[0]=="number"||i instanceof K?i=st(i):i=ft(i),i instanceof zt?(a=i.min,l=i.max):a=l=i,a.x>=this.min.x&&l.x<=this.max.x&&a.y>=this.min.y&&l.y<=this.max.y},intersects:function(i){i=ft(i);var a=this.min,l=this.max,c=i.min,p=i.max,_=p.x>=a.x&&c.x<=l.x,w=p.y>=a.y&&c.y<=l.y;return _&&w},overlaps:function(i){i=ft(i);var a=this.min,l=this.max,c=i.min,p=i.max,_=p.x>a.x&&c.x<l.x,w=p.y>a.y&&c.y<l.y;return _&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var a=this.min,l=this.max,c=Math.abs(a.x-l.x)*i,p=Math.abs(a.y-l.y)*i;return ft(st(a.x-c,a.y-p),st(l.x+c,l.y+p))},equals:function(i){return i?(i=ft(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ft(i,a){return!i||i instanceof zt?i:new zt(i,a)}function ut(i,a){if(i)for(var l=a?[i,a]:i,c=0,p=l.length;c<p;c++)this.extend(l[c])}ut.prototype={extend:function(i){var a=this._southWest,l=this._northEast,c,p;if(i instanceof Ct)c=i,p=i;else if(i instanceof ut){if(c=i._southWest,p=i._northEast,!c||!p)return this}else return i?this.extend(Y(i)||gt(i)):this;return!a&&!l?(this._southWest=new Ct(c.lat,c.lng),this._northEast=new Ct(p.lat,p.lng)):(a.lat=Math.min(c.lat,a.lat),a.lng=Math.min(c.lng,a.lng),l.lat=Math.max(p.lat,l.lat),l.lng=Math.max(p.lng,l.lng)),this},pad:function(i){var a=this._southWest,l=this._northEast,c=Math.abs(a.lat-l.lat)*i,p=Math.abs(a.lng-l.lng)*i;return new ut(new Ct(a.lat-c,a.lng-p),new Ct(l.lat+c,l.lng+p))},getCenter:function(){return new Ct((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ct(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ct(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Ct||"lat"in i?i=Y(i):i=gt(i);var a=this._southWest,l=this._northEast,c,p;return i instanceof ut?(c=i.getSouthWest(),p=i.getNorthEast()):c=p=i,c.lat>=a.lat&&p.lat<=l.lat&&c.lng>=a.lng&&p.lng<=l.lng},intersects:function(i){i=gt(i);var a=this._southWest,l=this._northEast,c=i.getSouthWest(),p=i.getNorthEast(),_=p.lat>=a.lat&&c.lat<=l.lat,w=p.lng>=a.lng&&c.lng<=l.lng;return _&&w},overlaps:function(i){i=gt(i);var a=this._southWest,l=this._northEast,c=i.getSouthWest(),p=i.getNorthEast(),_=p.lat>a.lat&&c.lat<l.lat,w=p.lng>a.lng&&c.lng<l.lng;return _&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,a){return i?(i=gt(i),this._southWest.equals(i.getSouthWest(),a)&&this._northEast.equals(i.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function gt(i,a){return i instanceof ut?i:new ut(i,a)}function Ct(i,a,l){if(isNaN(i)||isNaN(a))throw new Error("Invalid LatLng object: ("+i+", "+a+")");this.lat=+i,this.lng=+a,l!==void 0&&(this.alt=+l)}Ct.prototype={equals:function(i,a){if(!i)return!1;i=Y(i);var l=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return l<=(a===void 0?1e-9:a)},toString:function(i){return"LatLng("+Z(this.lat,i)+", "+Z(this.lng,i)+")"},distanceTo:function(i){return vt.distance(this,Y(i))},wrap:function(){return vt.wrapLatLng(this)},toBounds:function(i){var a=180*i/40075017,l=a/Math.cos(Math.PI/180*this.lat);return gt([this.lat-a,this.lng-l],[this.lat+a,this.lng+l])},clone:function(){return new Ct(this.lat,this.lng,this.alt)}};function Y(i,a,l){return i instanceof Ct?i:lt(i)&&typeof i[0]!="object"?i.length===3?new Ct(i[0],i[1],i[2]):i.length===2?new Ct(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Ct(i.lat,"lng"in i?i.lng:i.lon,i.alt):a===void 0?null:new Ct(i,a,l)}var dt={latLngToPoint:function(i,a){var l=this.projection.project(i),c=this.scale(a);return this.transformation._transform(l,c)},pointToLatLng:function(i,a){var l=this.scale(a),c=this.transformation.untransform(i,l);return this.projection.unproject(c)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var a=this.projection.bounds,l=this.scale(i),c=this.transformation.transform(a.min,l),p=this.transformation.transform(a.max,l);return new zt(c,p)},infinite:!1,wrapLatLng:function(i){var a=this.wrapLng?O(i.lng,this.wrapLng,!0):i.lng,l=this.wrapLat?O(i.lat,this.wrapLat,!0):i.lat,c=i.alt;return new Ct(l,a,c)},wrapLatLngBounds:function(i){var a=i.getCenter(),l=this.wrapLatLng(a),c=a.lat-l.lat,p=a.lng-l.lng;if(c===0&&p===0)return i;var _=i.getSouthWest(),w=i.getNorthEast(),M=new Ct(_.lat-c,_.lng-p),U=new Ct(w.lat-c,w.lng-p);return new ut(M,U)}},vt=v({},dt,{wrapLng:[-180,180],R:6371e3,distance:function(i,a){var l=Math.PI/180,c=i.lat*l,p=a.lat*l,_=Math.sin((a.lat-i.lat)*l/2),w=Math.sin((a.lng-i.lng)*l/2),M=_*_+Math.cos(c)*Math.cos(p)*w*w,U=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M));return this.R*U}}),Gt=6378137,pe={R:Gt,MAX_LATITUDE:85.0511287798,project:function(i){var a=Math.PI/180,l=this.MAX_LATITUDE,c=Math.max(Math.min(l,i.lat),-l),p=Math.sin(c*a);return new K(this.R*i.lng*a,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(i){var a=180/Math.PI;return new Ct((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*a,i.x*a/this.R)},bounds:(function(){var i=Gt*Math.PI;return new zt([-i,-i],[i,i])})()};function ye(i,a,l,c){if(lt(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=a,this._c=l,this._d=c}ye.prototype={transform:function(i,a){return this._transform(i.clone(),a)},_transform:function(i,a){return a=a||1,i.x=a*(this._a*i.x+this._b),i.y=a*(this._c*i.y+this._d),i},untransform:function(i,a){return a=a||1,new K((i.x/a-this._b)/this._a,(i.y/a-this._d)/this._c)}};function ce(i,a,l,c){return new ye(i,a,l,c)}var ge=v({},vt,{code:"EPSG:3857",projection:pe,transformation:(function(){var i=.5/(Math.PI*pe.R);return ce(i,.5,-i,.5)})()}),Ke=v({},ge,{code:"EPSG:900913"});function re(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ee(i,a){var l="",c,p,_,w,M,U;for(c=0,_=i.length;c<_;c++){for(M=i[c],p=0,w=M.length;p<w;p++)U=M[p],l+=(p?"L":"M")+U.x+" "+U.y;l+=a?bt.svg?"z":"x":""}return l||"M0 0"}var On=document.documentElement.style,xi="ActiveXObject"in window,ds=xi&&!document.addEventListener,hs="msLaunchUri"in navigator&&!("documentMode"in document),wa=Je("webkit"),Eo=Je("android"),Co=Je("android 2")||Je("android 3"),Ye=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),yu=Eo&&Je("Google")&&Ye<537&&!("AudioNode"in window),ms=!!window.opera,rl=!hs&&Je("chrome"),Sa=Je("gecko")&&!wa&&!ms&&!xi,xu=!rl&&Je("safari"),ul=Je("phantom"),jo="OTransition"in On,bu=navigator.platform.indexOf("Win")===0,Ln=xi&&"transition"in On,De="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Co,Oi="MozPerspective"in On,Ve=!window.L_DISABLE_3D&&(Ln||De||Oi)&&!jo&&!ul,Na=typeof orientation<"u"||Je("mobile"),wu=Na&&wa,Su=Na&&De,Ta=!window.PointerEvent&&window.MSPointerEvent,Ea=!!(window.PointerEvent||Ta),Ca="ontouchstart"in window||!!window.TouchEvent,on=!window.L_NO_TOUCH&&(Ca||Ea),ps=Na&&ms,ja=Na&&Sa,Nu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ao=(function(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",E,a),window.removeEventListener("testPassiveEventSupport",E,a)}catch{}return i})(),cl=(function(){return!!document.createElement("canvas").getContext})(),rn=!!(document.createElementNS&&re("svg").createSVGRect),Tu=!!rn&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Mo=!rn&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var a=i.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}})(),zo=navigator.platform.indexOf("Mac")===0,Oo=navigator.platform.indexOf("Linux")===0;function Je(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var bt={ie:xi,ielt9:ds,edge:hs,webkit:wa,android:Eo,android23:Co,androidStock:yu,opera:ms,chrome:rl,gecko:Sa,safari:xu,phantom:ul,opera12:jo,win:bu,ie3d:Ln,webkit3d:De,gecko3d:Oi,any3d:Ve,mobile:Na,mobileWebkit:wu,mobileWebkit3d:Su,msPointer:Ta,pointer:Ea,touch:on,touchNative:Ca,mobileOpera:ps,mobileGecko:ja,retina:Nu,passiveEvents:Ao,canvas:cl,svg:rn,vml:Mo,inlineSvg:Tu,mac:zo,linux:Oo},fl=bt.msPointer?"MSPointerDown":"pointerdown",dl=bt.msPointer?"MSPointerMove":"pointermove",Li=bt.msPointer?"MSPointerUp":"pointerup",xe=bt.msPointer?"MSPointerCancel":"pointercancel",Me={touchstart:fl,touchmove:dl,touchend:Li,touchcancel:xe},un={touchstart:Rn,touchmove:Vi,touchend:Vi,touchcancel:Vi},Yi={},Lo=!1;function Eu(i,a,l){return a==="touchstart"&&Dn(),un[a]?(l=un[a].bind(this,l),i.addEventListener(Me[a],l,!1),l):(console.warn("wrong event specified:",a),E)}function Do(i,a,l){if(!Me[a]){console.warn("wrong event specified:",a);return}i.removeEventListener(Me[a],l,!1)}function Aa(i){Yi[i.pointerId]=i}function hl(i){Yi[i.pointerId]&&(Yi[i.pointerId]=i)}function cn(i){delete Yi[i.pointerId]}function Dn(){Lo||(document.addEventListener(fl,Aa,!0),document.addEventListener(dl,hl,!0),document.addEventListener(Li,cn,!0),document.addEventListener(xe,cn,!0),Lo=!0)}function Vi(i,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var l in Yi)a.touches.push(Yi[l]);a.changedTouches=[a],i(a)}}function Rn(i,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&fe(a),Vi(i,a)}function be(i){var a={},l,c;for(c in i)l=i[c],a[c]=l&&l.bind?l.bind(i):l;return i=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Ro=200;function Bo(i,a){i.addEventListener("dblclick",a);var l=0,c;function p(_){if(_.detail!==1){c=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var w=Ba(_);if(!(w.some(function(U){return U instanceof HTMLLabelElement&&U.attributes.for})&&!w.some(function(U){return U instanceof HTMLInputElement||U instanceof HTMLSelectElement}))){var M=Date.now();M-l<=Ro?(c++,c===2&&a(be(_))):c=1,l=M}}}return i.addEventListener("click",p),{dblclick:a,simDblclick:p}}function fn(i,a){i.removeEventListener("dblclick",a.dblclick),i.removeEventListener("click",a.simDblclick)}var Ii=Oa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ma=Oa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ml=Ma==="webkitTransition"||Ma==="OTransition"?Ma+"End":"transitionend";function pl(i){return typeof i=="string"?document.getElementById(i):i}function za(i,a){var l=i.style[a]||i.currentStyle&&i.currentStyle[a];if((!l||l==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(i,null);l=c?c[a]:null}return l==="auto"?null:l}function Bt(i,a,l){var c=document.createElement(i);return c.className=a||"",l&&l.appendChild(c),c}function Wt(i){var a=i.parentNode;a&&a.removeChild(i)}function Fe(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ce(i){var a=i.parentNode;a&&a.lastChild!==i&&a.appendChild(i)}function dn(i){var a=i.parentNode;a&&a.firstChild!==i&&a.insertBefore(i,a.firstChild)}function gl(i,a){if(i.classList!==void 0)return i.classList.contains(a);var l=gs(i);return l.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(l)}function Ot(i,a){if(i.classList!==void 0)for(var l=V(a),c=0,p=l.length;c<p;c++)i.classList.add(l[c]);else if(!gl(i,a)){var _=gs(i);Bn(i,(_?_+" ":"")+a)}}function le(i,a){i.classList!==void 0?i.classList.remove(a):Bn(i,P((" "+gs(i)+" ").replace(" "+a+" "," ")))}function Bn(i,a){i.className.baseVal===void 0?i.className=a:i.className.baseVal=a}function gs(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function ae(i,a){"opacity"in i.style?i.style.opacity=a:"filter"in i.style&&vl(i,a)}function vl(i,a){var l=!1,c="DXImageTransform.Microsoft.Alpha";try{l=i.filters.item(c)}catch{if(a===1)return}a=Math.round(a*100),l?(l.Enabled=a!==100,l.Opacity=a):i.style.filter+=" progid:"+c+"(opacity="+a+")"}function Oa(i){for(var a=document.documentElement.style,l=0;l<i.length;l++)if(i[l]in a)return i[l];return!1}function Di(i,a,l){var c=a||new K(0,0);i.style[Ii]=(bt.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(l?" scale("+l+")":"")}function ie(i,a){i._leaflet_pos=a,bt.any3d?Di(i,a):(i.style.left=a.x+"px",i.style.top=a.y+"px")}function Xi(i){return i._leaflet_pos||new K(0,0)}var kn,bi,_l;if("onselectstart"in document)kn=function(){Mt(window,"selectstart",fe)},bi=function(){Kt(window,"selectstart",fe)};else{var Un=Oa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);kn=function(){if(Un){var i=document.documentElement.style;_l=i[Un],i[Un]="none"}},bi=function(){Un&&(document.documentElement.style[Un]=_l,_l=void 0)}}function vs(){Mt(window,"dragstart",fe)}function La(){Kt(window,"dragstart",fe)}var _s,yl;function Hn(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(We(),_s=i,yl=i.style.outlineStyle,i.style.outlineStyle="none",Mt(window,"keydown",We))}function We(){_s&&(_s.style.outlineStyle=yl,_s=void 0,yl=void 0,Kt(window,"keydown",We))}function ys(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Da(i){var a=i.getBoundingClientRect();return{x:a.width/i.offsetWidth||1,y:a.height/i.offsetHeight||1,boundingClientRect:a}}var Zn={__proto__:null,TRANSFORM:Ii,TRANSITION:Ma,TRANSITION_END:ml,get:pl,getStyle:za,create:Bt,remove:Wt,empty:Fe,toFront:Ce,toBack:dn,hasClass:gl,addClass:Ot,removeClass:le,setClass:Bn,getClass:gs,setOpacity:ae,testProp:Oa,setTransform:Di,setPosition:ie,getPosition:Xi,get disableTextSelection(){return kn},get enableTextSelection(){return bi},disableImageDrag:vs,enableImageDrag:La,preventOutline:Hn,restoreOutline:We,getSizedParentNode:ys,getScale:Da};function Mt(i,a,l,c){if(a&&typeof a=="object")for(var p in a)ci(i,p,a[p],l);else{a=V(a);for(var _=0,w=a.length;_<w;_++)ci(i,a[_],l,c)}return this}var ui="_leaflet_events";function Kt(i,a,l,c){if(arguments.length===1)xl(i),delete i[ui];else if(a&&typeof a=="object")for(var p in a)Ra(i,p,a[p],l);else if(a=V(a),arguments.length===2)xl(i,function(M){return ot(a,M)!==-1});else for(var _=0,w=a.length;_<w;_++)Ra(i,a[_],l,c);return this}function xl(i,a){for(var l in i[ui]){var c=l.split(/\d/)[0];(!a||a(c))&&Ra(i,c,null,null,l)}}var hn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ci(i,a,l,c){var p=a+C(l)+(c?"_"+C(c):"");if(i[ui]&&i[ui][p])return this;var _=function(M){return l.call(c||i,M||window.event)},w=_;!bt.touchNative&&bt.pointer&&a.indexOf("touch")===0?_=Eu(i,a,_):bt.touch&&a==="dblclick"?_=Bo(i,_):"addEventListener"in i?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?i.addEventListener(hn[a]||a,_,bt.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(_=function(M){M=M||window.event,Ri(i,M)&&w(M)},i.addEventListener(hn[a],_,!1)):i.addEventListener(a,w,!1):i.attachEvent("on"+a,_),i[ui]=i[ui]||{},i[ui][p]=_}function Ra(i,a,l,c,p){p=p||a+C(l)+(c?"_"+C(c):"");var _=i[ui]&&i[ui][p];if(!_)return this;!bt.touchNative&&bt.pointer&&a.indexOf("touch")===0?Do(i,a,_):bt.touch&&a==="dblclick"?fn(i,_):"removeEventListener"in i?i.removeEventListener(hn[a]||a,_,!1):i.detachEvent("on"+a,_),i[ui][p]=null}function fi(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function wi(i){return ci(i,"wheel",fi),this}function mn(i){return Mt(i,"mousedown touchstart dblclick contextmenu",fi),i._leaflet_disable_click=!0,this}function fe(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Qi(i){return fe(i),fi(i),this}function Ba(i){if(i.composedPath)return i.composedPath();for(var a=[],l=i.target;l;)a.push(l),l=l.parentNode;return a}function ka(i,a){if(!a)return new K(i.clientX,i.clientY);var l=Da(a),c=l.boundingClientRect;return new K((i.clientX-c.left)/l.x-a.clientLeft,(i.clientY-c.top)/l.y-a.clientTop)}var ko=bt.linux&&bt.chrome?window.devicePixelRatio:bt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Re(i){return bt.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/ko:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Ri(i,a){var l=a.relatedTarget;if(!l)return!0;try{for(;l&&l!==i;)l=l.parentNode}catch{return!1}return l!==i}var xs={__proto__:null,on:Mt,off:Kt,stopPropagation:fi,disableScrollPropagation:wi,disableClickPropagation:mn,preventDefault:fe,stop:Qi,getPropagationPath:Ba,getMousePosition:ka,getWheelDelta:Re,isExternalTarget:Ri,addListener:Mt,removeListener:Kt},qn=tt.extend({run:function(i,a,l,c){this.stop(),this._el=i,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=Xi(i),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=nt(this._animate,this),this._step()},_step:function(i){var a=+new Date-this._startTime,l=this._duration*1e3;a<l?this._runFrame(this._easeOut(a/l),i):(this._runFrame(1),this._complete())},_runFrame:function(i,a){var l=this._startPos.add(this._offset.multiplyBy(i));a&&l._round(),ie(this._el,l),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Zt=tt.extend({options:{crs:ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,a){a=B(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=b(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(Y(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ma&&bt.any3d&&!bt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,ml,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,a,l){if(a=a===void 0?this._zoom:this._limitZoom(a),i=this._limitCenter(Y(i),a,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=v({animate:l.animate},l.zoom),l.pan=v({animate:l.animate,duration:l.duration},l.pan));var c=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,a,l.zoom):this._tryAnimatedPan(i,l.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(i,a,l.pan&&l.pan.noMoveStart),this},setZoom:function(i,a){return this._loaded?this.setView(this.getCenter(),i,{zoom:a}):(this._zoom=i,this)},zoomIn:function(i,a){return i=i||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,a)},zoomOut:function(i,a){return i=i||(bt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,a)},setZoomAround:function(i,a,l){var c=this.getZoomScale(a),p=this.getSize().divideBy(2),_=i instanceof K?i:this.latLngToContainerPoint(i),w=_.subtract(p).multiplyBy(1-1/c),M=this.containerPointToLatLng(p.add(w));return this.setView(M,a,{zoom:l})},_getBoundsCenterZoom:function(i,a){a=a||{},i=i.getBounds?i.getBounds():gt(i);var l=st(a.paddingTopLeft||a.padding||[0,0]),c=st(a.paddingBottomRight||a.padding||[0,0]),p=this.getBoundsZoom(i,!1,l.add(c));if(p=typeof a.maxZoom=="number"?Math.min(a.maxZoom,p):p,p===1/0)return{center:i.getCenter(),zoom:p};var _=c.subtract(l).divideBy(2),w=this.project(i.getSouthWest(),p),M=this.project(i.getNorthEast(),p),U=this.unproject(w.add(M).divideBy(2).add(_),p);return{center:U,zoom:p}},fitBounds:function(i,a){if(i=gt(i),!i.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(i,a);return this.setView(l.center,l.zoom,a)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,a){return this.setView(i,this._zoom,{pan:a})},panBy:function(i,a){if(i=st(i).round(),a=a||{},!i.x&&!i.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){Ot(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,l,a.duration||.25,a.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,a,l){if(l=l||{},l.animate===!1||!bt.any3d)return this.setView(i,a,l);this._stop();var c=this.project(this.getCenter()),p=this.project(i),_=this.getSize(),w=this._zoom;i=Y(i),a=a===void 0?w:a;var M=Math.max(_.x,_.y),U=M*this.getZoomScale(w,a),X=p.distanceTo(c)||1,ct=1.42,wt=ct*ct;function Dt(ue){var Hi=ue?-1:1,_n=ue?U:M,Rl=U*U-M*M+Hi*wt*wt*X*X,$a=2*_n*wt*X,ts=Rl/$a,an=Math.sqrt(ts*ts+1)-ts,Zi=an<1e-9?-18:Math.log(an);return Zi}function je(ue){return(Math.exp(ue)-Math.exp(-ue))/2}function de(ue){return(Math.exp(ue)+Math.exp(-ue))/2}function Xe(ue){return je(ue)/de(ue)}var Yt=Dt(0);function Vt(ue){return M*(de(Yt)/de(Yt+ct*ue))}function kt(ue){return M*(de(Yt)*Xe(Yt+ct*ue)-je(Yt))/wt}function en(ue){return 1-Math.pow(1-ue,1.5)}var ii=Date.now(),Ds=(Dt(1)-Yt)/ct,nn=l.duration?1e3*l.duration:1e3*Ds*.8;function Dl(){var ue=(Date.now()-ii)/nn,Hi=en(ue)*Ds;ue<=1?(this._flyToFrame=nt(Dl,this),this._move(this.unproject(c.add(p.subtract(c).multiplyBy(kt(Hi)/X)),w),this.getScaleZoom(M/Vt(Hi),w),{flyTo:!0})):this._move(i,a)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),Dl.call(this),this},flyToBounds:function(i,a){var l=this._getBoundsCenterZoom(i,a);return this.flyTo(l.center,l.zoom,a)},setMaxBounds:function(i){return i=gt(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var a=this.options.minZoom;return this.options.minZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var a=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,a){this._enforcingBounds=!0;var l=this.getCenter(),c=this._limitCenter(l,this._zoom,gt(i));return l.equals(c)||this.panTo(c,a),this._enforcingBounds=!1,this},panInside:function(i,a){a=a||{};var l=st(a.paddingTopLeft||a.padding||[0,0]),c=st(a.paddingBottomRight||a.padding||[0,0]),p=this.project(this.getCenter()),_=this.project(i),w=this.getPixelBounds(),M=ft([w.min.add(l),w.max.subtract(c)]),U=M.getSize();if(!M.contains(_)){this._enforcingBounds=!0;var X=_.subtract(M.getCenter()),ct=M.extend(_).getSize().subtract(U);p.x+=X.x<0?-ct.x:ct.x,p.y+=X.y<0?-ct.y:ct.y,this.panTo(this.unproject(p),a),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=v({animate:!1,pan:!0},i===!0?{animate:!0}:i);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),c=a.divideBy(2).round(),p=l.divideBy(2).round(),_=c.subtract(p);return!_.x&&!_.y?this:(i.animate&&i.pan?this.panBy(_):(i.pan&&this._rawPanBy(_),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(b(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=v({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=b(this._handleGeolocationResponse,this),l=b(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,l,i):navigator.geolocation.getCurrentPosition(a,l,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var a=i.code,l=i.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var a=i.coords.latitude,l=i.coords.longitude,c=new Ct(a,l),p=c.toBounds(i.coords.accuracy*2),_=this._locateOptions;if(_.setView){var w=this.getBoundsZoom(p);this.setView(c,_.maxZoom?Math.min(w,_.maxZoom):w)}var M={latlng:c,bounds:p,timestamp:i.timestamp};for(var U in i.coords)typeof i.coords[U]=="number"&&(M[U]=i.coords[U]);this.fire("locationfound",M)}},addHandler:function(i,a){if(!a)return this;var l=this[i]=new a(this);return this._handlers.push(l),this.options[i]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Wt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,a){var l="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),c=Bt("div",l,a||this._mapPane);return i&&(this._panes[i]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),a=this.unproject(i.getBottomLeft()),l=this.unproject(i.getTopRight());return new ut(a,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,a,l){i=gt(i),l=st(l||[0,0]);var c=this.getZoom()||0,p=this.getMinZoom(),_=this.getMaxZoom(),w=i.getNorthWest(),M=i.getSouthEast(),U=this.getSize().subtract(l),X=ft(this.project(M,c),this.project(w,c)).getSize(),ct=bt.any3d?this.options.zoomSnap:1,wt=U.x/X.x,Dt=U.y/X.y,je=a?Math.max(wt,Dt):Math.min(wt,Dt);return c=this.getScaleZoom(je,c),ct&&(c=Math.round(c/(ct/100))*(ct/100),c=a?Math.ceil(c/ct)*ct:Math.floor(c/ct)*ct),Math.max(p,Math.min(_,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,a){var l=this._getTopLeftPoint(i,a);return new zt(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,a){var l=this.options.crs;return a=a===void 0?this._zoom:a,l.scale(i)/l.scale(a)},getScaleZoom:function(i,a){var l=this.options.crs;a=a===void 0?this._zoom:a;var c=l.zoom(i*l.scale(a));return isNaN(c)?1/0:c},project:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(Y(i),a)},unproject:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(st(i),a)},layerPointToLatLng:function(i){var a=st(i).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(i){var a=this.project(Y(i))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Y(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(gt(i))},distance:function(i,a){return this.options.crs.distance(Y(i),Y(a))},containerPointToLayerPoint:function(i){return st(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return st(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var a=this.containerPointToLayerPoint(st(i));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Y(i)))},mouseEventToContainerPoint:function(i){return ka(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var a=this._container=pl(i);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mt(a,"scroll",this._onScroll,this),this._containerId=C(a)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&bt.any3d,Ot(i,"leaflet-container"+(bt.touch?" leaflet-touch":"")+(bt.retina?" leaflet-retina":"")+(bt.ielt9?" leaflet-oldie":"")+(bt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=za(i,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ie(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ot(i.markerPane,"leaflet-zoom-hide"),Ot(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,a,l){ie(this._mapPane,new K(0,0));var c=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var p=this._zoom!==a;this._moveStart(p,l)._move(i,a)._moveEnd(p),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(i,a){return i&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(i,a,l,c){a===void 0&&(a=this._zoom);var p=this._zoom!==a;return this._zoom=a,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),c?l&&l.pinch&&this.fire("zoom",l):((p||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){ie(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[C(this._container)]=this;var a=i?Kt:Mt;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),bt.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,a){for(var l=[],c,p=a==="mouseout"||a==="mouseover",_=i.target||i.srcElement,w=!1;_;){if(c=this._targets[C(_)],c&&(a==="click"||a==="preclick")&&this._draggableMoved(c)){w=!0;break}if(c&&c.listens(a,!0)&&(p&&!Ri(_,i)||(l.push(c),p))||_===this._container)break;_=_.parentNode}return!l.length&&!w&&!p&&this.listens(a,!0)&&(l=[this]),l},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var a=i.target||i.srcElement;if(!(!this._loaded||a._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(a))){var l=i.type;l==="mousedown"&&Hn(a),this._fireDOMEvent(i,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,a,l){if(i.type==="click"){var c=v({},i);c.type="preclick",this._fireDOMEvent(c,c.type,l)}var p=this._findEventTargets(i,a);if(l){for(var _=[],w=0;w<l.length;w++)l[w].listens(a,!0)&&_.push(l[w]);p=_.concat(p)}if(p.length){a==="contextmenu"&&fe(i);var M=p[0],U={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var X=M.getLatLng&&(!M._radius||M._radius<=10);U.containerPoint=X?this.latLngToContainerPoint(M.getLatLng()):this.mouseEventToContainerPoint(i),U.layerPoint=this.containerPointToLayerPoint(U.containerPoint),U.latlng=X?M.getLatLng():this.layerPointToLatLng(U.layerPoint)}for(w=0;w<p.length;w++)if(p[w].fire(a,U,!0),U.originalEvent._stopped||p[w].options.bubblingMouseEvents===!1&&ot(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,a=this._handlers.length;i<a;i++)this._handlers[i].disable()},whenReady:function(i,a){return this._loaded?i.call(a||this,{target:this}):this.on("load",i,a),this},_getMapPanePos:function(){return Xi(this._mapPane)||new K(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,a){var l=i&&a!==void 0?this._getNewPixelOrigin(i,a):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,a){var l=this.getSize()._divideBy(2);return this.project(i,a)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,a,l){var c=this._getNewPixelOrigin(l,a);return this.project(i,a)._subtract(c)},_latLngBoundsToNewLayerBounds:function(i,a,l){var c=this._getNewPixelOrigin(l,a);return ft([this.project(i.getSouthWest(),a)._subtract(c),this.project(i.getNorthWest(),a)._subtract(c),this.project(i.getSouthEast(),a)._subtract(c),this.project(i.getNorthEast(),a)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,a,l){if(!l)return i;var c=this.project(i,a),p=this.getSize().divideBy(2),_=new zt(c.subtract(p),c.add(p)),w=this._getBoundsOffset(_,l,a);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?i:this.unproject(c.add(w),a)},_limitOffset:function(i,a){if(!a)return i;var l=this.getPixelBounds(),c=new zt(l.min.add(i),l.max.add(i));return i.add(this._getBoundsOffset(c,a))},_getBoundsOffset:function(i,a,l){var c=ft(this.project(a.getNorthEast(),l),this.project(a.getSouthWest(),l)),p=c.min.subtract(i.min),_=c.max.subtract(i.max),w=this._rebound(p.x,-_.x),M=this._rebound(p.y,-_.y);return new K(w,M)},_rebound:function(i,a){return i+a>0?Math.round(i-a)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(a))},_limitZoom:function(i){var a=this.getMinZoom(),l=this.getMaxZoom(),c=bt.any3d?this.options.zoomSnap:1;return c&&(i=Math.round(i/c)*c),Math.max(a,Math.min(l,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){le(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,a){var l=this._getCenterOffset(i)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,a),!0)},_createAnimProxy:function(){var i=this._proxy=Bt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(a){var l=Ii,c=this._proxy.style[l];Di(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),c===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),a=this.getZoom();Di(this._proxy,this.project(i,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,a,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(a),p=this._getCenterOffset(i)._divideBy(1-1/c);return l.animate!==!0&&!this.getSize().contains(p)?!1:(nt(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(i,a,!0)},this),!0)},_animateZoom:function(i,a,l,c){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=a,Ot(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:a,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(b(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&le(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bl(i,a){return new Zt(i,a)}var Ie=pt.extend({options:{position:"topright"},initialize:function(i){B(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var a=this._map;return a&&a.removeControl(this),this.options.position=i,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var a=this._container=this.onAdd(i),l=this.getPosition(),c=i._controlCorners[l];return Ot(a,"leaflet-control"),l.indexOf("bottom")!==-1?c.insertBefore(a,c.firstChild):c.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Bi=function(i){return new Ie(i)};Zt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},a="leaflet-",l=this._controlContainer=Bt("div",a+"control-container",this._container);function c(p,_){var w=a+p+" "+a+_;i[p+_]=Bt("div",w,l)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Wt(this._controlCorners[i]);Wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ua=Ie.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,a,l,c){return l<c?-1:c<l?1:0}},initialize:function(i,a,l){B(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in i)this._addLayer(i[c],c);for(c in a)this._addLayer(a[c],c,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ie.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,a){return this._addLayer(i,a),this._map?this._update():this},addOverlay:function(i,a){return this._addLayer(i,a,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var a=this._getLayer(C(i));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){Ot(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ot(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):le(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return le(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",a=this._container=Bt("div",i),l=this.options.collapsed;a.setAttribute("aria-haspopup",!0),mn(a),wi(a);var c=this._section=Bt("section",i+"-list");l&&(this._map.on("click",this.collapse,this),Mt(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=Bt("a",i+"-toggle",a);p.href="#",p.title="Layers",p.setAttribute("role","button"),Mt(p,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){fe(_),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=Bt("div",i+"-base",c),this._separator=Bt("div",i+"-separator",c),this._overlaysList=Bt("div",i+"-overlays",c),a.appendChild(c)},_getLayer:function(i){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&C(this._layers[a].layer)===i)return this._layers[a]},_addLayer:function(i,a,l){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:a,overlay:l}),this.options.sortLayers&&this._layers.sort(b(function(c,p){return this.options.sortFunction(c.layer,p.layer,c.name,p.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fe(this._baseLayersList),Fe(this._overlaysList),this._layerControlInputs=[];var i,a,l,c,p=0;for(l=0;l<this._layers.length;l++)c=this._layers[l],this._addItem(c),a=a||c.overlay,i=i||!c.overlay,p+=c.overlay?0:1;return this.options.hideSingleBase&&(i=i&&p>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=a&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var a=this._getLayer(C(i.target)),l=a.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;l&&this._map.fire(l,a)},_createRadioElement:function(i,a){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(a?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=l,c.firstChild},_addItem:function(i){var a=document.createElement("label"),l=this._map.hasLayer(i.layer),c;i.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=l):c=this._createRadioElement("leaflet-base-layers_"+C(this),l),this._layerControlInputs.push(c),c.layerId=C(i.layer),Mt(c,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+i.name;var _=document.createElement("span");a.appendChild(_),_.appendChild(c),_.appendChild(p);var w=i.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,a,l,c=[],p=[];this._handlingClick=!0;for(var _=i.length-1;_>=0;_--)a=i[_],l=this._getLayer(a.layerId).layer,a.checked?c.push(l):a.checked||p.push(l);for(_=0;_<p.length;_++)this._map.hasLayer(p[_])&&this._map.removeLayer(p[_]);for(_=0;_<c.length;_++)this._map.hasLayer(c[_])||this._map.addLayer(c[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,a,l,c=this._map.getZoom(),p=i.length-1;p>=0;p--)a=i[p],l=this._getLayer(a.layerId).layer,a.disabled=l.options.minZoom!==void 0&&c<l.options.minZoom||l.options.maxZoom!==void 0&&c>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Mt(i,"click",fe),this.expand();var a=this;setTimeout(function(){Kt(i,"click",fe),a._preventClick=!1})}}),Uo=function(i,a,l){return new Ua(i,a,l)},wl=Ie.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var a="leaflet-control-zoom",l=Bt("div",a+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,a+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,a+"-out",l,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,a,l,c,p){var _=Bt("a",l,c);return _.innerHTML=i,_.href="#",_.title=a,_.setAttribute("role","button"),_.setAttribute("aria-label",a),mn(_),Mt(_,"click",Qi),Mt(_,"click",p,this),Mt(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var i=this._map,a="leaflet-disabled";le(this._zoomInButton,a),le(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ot(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ot(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Zt.mergeOptions({zoomControl:!0}),Zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wl,this.addControl(this.zoomControl))});var Cu=function(i){return new wl(i)},Ho=Ie.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var a="leaflet-control-scale",l=Bt("div",a),c=this.options;return this._addScales(c,a+"-line",l),i.on(c.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),l},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,a,l){i.metric&&(this._mScale=Bt("div",a,l)),i.imperial&&(this._iScale=Bt("div",a,l))},_update:function(){var i=this._map,a=i.getSize().y/2,l=i.distance(i.containerPointToLatLng([0,a]),i.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(l)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var a=this._getRoundNum(i),l=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,l,a/i)},_updateImperial:function(i){var a=i*3.2808399,l,c,p;a>5280?(l=a/5280,c=this._getRoundNum(l),this._updateScale(this._iScale,c+" mi",c/l)):(p=this._getRoundNum(a),this._updateScale(this._iScale,p+" ft",p/a))},_updateScale:function(i,a,l){i.style.width=Math.round(this.options.maxWidth*l)+"px",i.innerHTML=a},_getRoundNum:function(i){var a=Math.pow(10,(Math.floor(i)+"").length-1),l=i/a;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,a*l}}),Sl=function(i){return new Ho(i)},ju='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Nl=Ie.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(bt.inlineSvg?ju+" ":"")+"Leaflet</a>"},initialize:function(i){B(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Bt("div","leaflet-control-attribution"),mn(this._container);for(var a in i._layers)i._layers[a].getAttribution&&this.addAttribution(i._layers[a].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var a in this._attributions)this._attributions[a]&&i.push(a);var l=[];this.options.prefix&&l.push(this.options.prefix),i.length&&l.push(i.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Zt.mergeOptions({attributionControl:!0}),Zt.addInitHook(function(){this.options.attributionControl&&new Nl().addTo(this)});var Au=function(i){return new Nl(i)};Ie.Layers=Ua,Ie.Zoom=wl,Ie.Scale=Ho,Ie.Attribution=Nl,Bi.layers=Uo,Bi.zoom=Cu,Bi.scale=Sl,Bi.attribution=Au;var Si=pt.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Si.addTo=function(i,a){return i.addHandler(a,this),this};var Mu={Events:z},Tl=bt.touch?"touchstart mousedown":"mousedown",Ki=tt.extend({options:{clickTolerance:3},initialize:function(i,a,l,c){B(this,c),this._element=i,this._dragStartTarget=a||i,this._preventOutline=l},enable:function(){this._enabled||(Mt(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ki._dragging===this&&this.finishDrag(!0),Kt(this._dragStartTarget,Tl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!gl(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Ki._dragging===this&&this.finishDrag();return}if(!(Ki._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Ki._dragging=this,this._preventOutline&&Hn(this._element),vs(),kn(),!this._moving)){this.fire("down");var a=i.touches?i.touches[0]:i,l=ys(this._element);this._startPoint=new K(a.clientX,a.clientY),this._startPos=Xi(this._element),this._parentScale=Da(l);var c=i.type==="mousedown";Mt(document,c?"mousemove":"touchmove",this._onMove,this),Mt(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var a=i.touches&&i.touches.length===1?i.touches[0]:i,l=new K(a.clientX,a.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,fe(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ot(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ot(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),ie(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){le(document.body,"leaflet-dragging"),this._lastTarget&&(le(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Kt(document,"mousemove touchmove",this._onMove,this),Kt(document,"mouseup touchend touchcancel",this._onUp,this),La(),bi();var a=this._moved&&this._moving;this._moving=!1,Ki._dragging=!1,a&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Zo(i,a,l){var c,p=[1,4,2,8],_,w,M,U,X,ct,wt,Dt;for(_=0,ct=i.length;_<ct;_++)i[_]._code=pn(i[_],a);for(M=0;M<4;M++){for(wt=p[M],c=[],_=0,ct=i.length,w=ct-1;_<ct;w=_++)U=i[_],X=i[w],U._code&wt?X._code&wt||(Dt=bs(X,U,wt,a,l),Dt._code=pn(Dt,a),c.push(Dt)):(X._code&wt&&(Dt=bs(X,U,wt,a,l),Dt._code=pn(Dt,a),c.push(Dt)),c.push(U));i=c}return i}function qo(i,a){var l,c,p,_,w,M,U,X,ct;if(!i||i.length===0)throw new Error("latlngs not passed");$e(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var wt=Y([0,0]),Dt=gt(i),je=Dt.getNorthWest().distanceTo(Dt.getSouthWest())*Dt.getNorthEast().distanceTo(Dt.getNorthWest());je<1700&&(wt=El(i));var de=i.length,Xe=[];for(l=0;l<de;l++){var Yt=Y(i[l]);Xe.push(a.project(Y([Yt.lat-wt.lat,Yt.lng-wt.lng])))}for(M=U=X=0,l=0,c=de-1;l<de;c=l++)p=Xe[l],_=Xe[c],w=p.y*_.x-_.y*p.x,U+=(p.x+_.x)*w,X+=(p.y+_.y)*w,M+=w*3;M===0?ct=Xe[0]:ct=[U/M,X/M];var Vt=a.unproject(st(ct));return Y([Vt.lat+wt.lat,Vt.lng+wt.lng])}function El(i){for(var a=0,l=0,c=0,p=0;p<i.length;p++){var _=Y(i[p]);a+=_.lat,l+=_.lng,c++}return Y([a/c,l/c])}var Cl={__proto__:null,clipPolygon:Zo,polygonCenter:qo,centroid:El};function Po(i,a){if(!a||!i.length)return i.slice();var l=a*a;return i=Ou(i,l),i=Yo(i,l),i}function Go(i,a,l){return Math.sqrt(Ha(i,a,l,!0))}function zu(i,a,l){return Ha(i,a,l)}function Yo(i,a){var l=i.length,c=typeof Uint8Array<"u"?Uint8Array:Array,p=new c(l);p[0]=p[l-1]=1,jl(i,p,a,0,l-1);var _,w=[];for(_=0;_<l;_++)p[_]&&w.push(i[_]);return w}function jl(i,a,l,c,p){var _=0,w,M,U;for(M=c+1;M<=p-1;M++)U=Ha(i[M],i[c],i[p],!0),U>_&&(w=M,_=U);_>l&&(a[w]=1,jl(i,a,l,c,w),jl(i,a,l,w,p))}function Ou(i,a){for(var l=[i[0]],c=1,p=0,_=i.length;c<_;c++)Lu(i[c],i[p])>a&&(l.push(i[c]),p=c);return p<_-1&&l.push(i[_-1]),l}var Vo;function Io(i,a,l,c,p){var _=c?Vo:pn(i,l),w=pn(a,l),M,U,X;for(Vo=w;;){if(!(_|w))return[i,a];if(_&w)return!1;M=_||w,U=bs(i,a,M,l,p),X=pn(U,l),M===_?(i=U,_=X):(a=U,w=X)}}function bs(i,a,l,c,p){var _=a.x-i.x,w=a.y-i.y,M=c.min,U=c.max,X,ct;return l&8?(X=i.x+_*(U.y-i.y)/w,ct=U.y):l&4?(X=i.x+_*(M.y-i.y)/w,ct=M.y):l&2?(X=U.x,ct=i.y+w*(U.x-i.x)/_):l&1&&(X=M.x,ct=i.y+w*(M.x-i.x)/_),new K(X,ct,p)}function pn(i,a){var l=0;return i.x<a.min.x?l|=1:i.x>a.max.x&&(l|=2),i.y<a.min.y?l|=4:i.y>a.max.y&&(l|=8),l}function Lu(i,a){var l=a.x-i.x,c=a.y-i.y;return l*l+c*c}function Ha(i,a,l,c){var p=a.x,_=a.y,w=l.x-p,M=l.y-_,U=w*w+M*M,X;return U>0&&(X=((i.x-p)*w+(i.y-_)*M)/U,X>1?(p=l.x,_=l.y):X>0&&(p+=w*X,_+=M*X)),w=i.x-p,M=i.y-_,c?w*w+M*M:new K(p,_)}function $e(i){return!lt(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function ws(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$e(i)}function Pn(i,a){var l,c,p,_,w,M,U,X;if(!i||i.length===0)throw new Error("latlngs not passed");$e(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ct=Y([0,0]),wt=gt(i),Dt=wt.getNorthWest().distanceTo(wt.getSouthWest())*wt.getNorthEast().distanceTo(wt.getNorthWest());Dt<1700&&(ct=El(i));var je=i.length,de=[];for(l=0;l<je;l++){var Xe=Y(i[l]);de.push(a.project(Y([Xe.lat-ct.lat,Xe.lng-ct.lng])))}for(l=0,c=0;l<je-1;l++)c+=de[l].distanceTo(de[l+1])/2;if(c===0)X=de[0];else for(l=0,_=0;l<je-1;l++)if(w=de[l],M=de[l+1],p=w.distanceTo(M),_+=p,_>c){U=(_-c)/p,X=[M.x-U*(M.x-w.x),M.y-U*(M.y-w.y)];break}var Yt=a.unproject(st(X));return Y([Yt.lat+ct.lat,Yt.lng+ct.lng])}var Du={__proto__:null,simplify:Po,pointToSegmentDistance:Go,closestPointOnSegment:zu,clipSegment:Io,_getEdgeIntersection:bs,_getBitCode:pn,_sqClosestPointOnSegment:Ha,isFlat:$e,_flat:ws,polylineCenter:Pn},Ss={project:function(i){return new K(i.lng,i.lat)},unproject:function(i){return new Ct(i.y,i.x)},bounds:new zt([-180,-90],[180,90])},Ns={R:6378137,R_MINOR:6356752314245179e-9,bounds:new zt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var a=Math.PI/180,l=this.R,c=i.lat*a,p=this.R_MINOR/l,_=Math.sqrt(1-p*p),w=_*Math.sin(c),M=Math.tan(Math.PI/4-c/2)/Math.pow((1-w)/(1+w),_/2);return c=-l*Math.log(Math.max(M,1e-10)),new K(i.lng*a*l,c)},unproject:function(i){for(var a=180/Math.PI,l=this.R,c=this.R_MINOR/l,p=Math.sqrt(1-c*c),_=Math.exp(-i.y/l),w=Math.PI/2-2*Math.atan(_),M=0,U=.1,X;M<15&&Math.abs(U)>1e-7;M++)X=p*Math.sin(w),X=Math.pow((1-X)/(1+X),p/2),U=Math.PI/2-2*Math.atan(_*X)-w,w+=U;return new Ct(w*a,i.x*a/l)}},Xo={__proto__:null,LonLat:Ss,Mercator:Ns,SphericalMercator:pe},Qo=v({},vt,{code:"EPSG:3395",projection:Ns,transformation:(function(){var i=.5/(Math.PI*Ns.R);return ce(i,.5,-i,.5)})()}),Al=v({},vt,{code:"EPSG:4326",projection:Ss,transformation:ce(1/180,1,-1/180,.5)}),Gn=v({},dt,{projection:Ss,transformation:ce(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,a){var l=a.lng-i.lng,c=a.lat-i.lat;return Math.sqrt(l*l+c*c)},infinite:!0});dt.Earth=vt,dt.EPSG3395=Qo,dt.EPSG3857=ge,dt.EPSG900913=Ke,dt.EPSG4326=Al,dt.Simple=Gn;var di=tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[C(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[C(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var a=i.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var l=this.getEvents();a.on(l,this),this.once("remove",function(){a.off(l,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Zt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var a=C(i);return this._layers[a]?this:(this._layers[a]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var a=C(i);return this._layers[a]?(this._loaded&&i.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return C(i)in this._layers},eachLayer:function(i,a){for(var l in this._layers)i.call(a,this._layers[l]);return this},_addLayers:function(i){i=i?lt(i)?i:[i]:[];for(var a=0,l=i.length;a<l;a++)this.addLayer(i[a])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[C(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var a=C(i);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,a=-1/0,l=this._getZoomSpan();for(var c in this._zoomBoundLayers){var p=this._zoomBoundLayers[c].options;i=p.minZoom===void 0?i:Math.min(i,p.minZoom),a=p.maxZoom===void 0?a:Math.max(a,p.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=i===1/0?void 0:i,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yn=di.extend({initialize:function(i,a){B(this,a),this._layers={};var l,c;if(i)for(l=0,c=i.length;l<c;l++)this.addLayer(i[l])},addLayer:function(i){var a=this.getLayerId(i);return this._layers[a]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var a=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(i){var a=typeof i=="number"?i:this.getLayerId(i);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var a=Array.prototype.slice.call(arguments,1),l,c;for(l in this._layers)c=this._layers[l],c[i]&&c[i].apply(c,a);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,a){for(var l in this._layers)i.call(a,this._layers[l]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return C(i)}}),Ru=function(i,a){return new Yn(i,a)},Ni=Yn.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Yn.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Yn.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new ut;for(var a in this._layers){var l=this._layers[a];i.extend(l.getBounds?l.getBounds():l.getLatLng())}return i}}),Ko=function(i,a){return new Ni(i,a)},Ti=pt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){B(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,a){var l=this._getIconUrl(i);if(!l){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(l,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(c,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(i,a){var l=this.options,c=l[a+"Size"];typeof c=="number"&&(c=[c,c]);var p=st(c),_=st(a==="shadow"&&l.shadowAnchor||l.iconAnchor||p&&p.divideBy(2,!0));i.className="leaflet-marker-"+a+" "+(l.className||""),_&&(i.style.marginLeft=-_.x+"px",i.style.marginTop=-_.y+"px"),p&&(i.style.width=p.x+"px",i.style.height=p.y+"px")},_createImg:function(i,a){return a=a||document.createElement("img"),a.src=i,a},_getIconUrl:function(i){return bt.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Za(i){return new Ti(i)}var qa=Ti.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof qa.imagePath!="string"&&(qa.imagePath=this._detectIconPath()),(this.options.imagePath||qa.imagePath)+Ti.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var a=function(l,c,p){var _=c.exec(l);return _&&_[p]};return i=a(i,/^url\((['"])?(.+)\1\)$/,2),i&&a(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Bt("div","leaflet-default-icon-path",document.body),a=za(i,"background-image")||za(i,"backgroundImage");if(document.body.removeChild(i),a=this._stripUrl(a),a)return a;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),Pa=Si.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Ki(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ot(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&le(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var a=this._marker,l=a._map,c=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,_=Xi(a._icon),w=l.getPixelBounds(),M=l.getPixelOrigin(),U=ft(w.min._subtract(M).add(p),w.max._subtract(M).subtract(p));if(!U.contains(_)){var X=st((Math.max(U.max.x,_.x)-U.max.x)/(w.max.x-U.max.x)-(Math.min(U.min.x,_.x)-U.min.x)/(w.min.x-U.min.x),(Math.max(U.max.y,_.y)-U.max.y)/(w.max.y-U.max.y)-(Math.min(U.min.y,_.y)-U.min.y)/(w.min.y-U.min.y)).multiplyBy(c);l.panBy(X,{animate:!1}),this._draggable._newPos._add(X),this._draggable._startPos._add(X),ie(a._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=nt(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=nt(this._adjustPan.bind(this,i)))},_onDrag:function(i){var a=this._marker,l=a._shadow,c=Xi(a._icon),p=a._map.layerPointToLatLng(c);l&&ie(l,c),a._latlng=p,i.latlng=p,i.oldLatLng=this._oldLatLng,a.fire("move",i).fire("drag",i)},_onDragEnd:function(i){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ga=di.extend({options:{icon:new qa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,a){B(this,a),this._latlng=Y(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var a=this._latlng;return this._latlng=Y(i),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=i.icon.createIcon(this._icon),c=!1;l!==this._icon&&(this._icon&&this._removeIcon(),c=!0,i.title&&(l.title=i.title),l.tagName==="IMG"&&(l.alt=i.alt||"")),Ot(l,a),i.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(l,"focus",this._panOnFocus,this);var p=i.icon.createShadow(this._shadow),_=!1;p!==this._shadow&&(this._removeShadow(),_=!0),p&&(Ot(p,a),p.alt=""),this._shadow=p,i.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&_&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Kt(this._icon,"focus",this._panOnFocus,this),Wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Wt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&ie(this._icon,i),this._shadow&&ie(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(Ot(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pa)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pa(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&ae(this._icon,i),this._shadow&&ae(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var a=this.options.icon.options,l=a.iconSize?st(a.iconSize):st(0,0),c=a.iconAnchor?st(a.iconAnchor):st(0,0);i.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:l.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Jo(i,a){return new Ga(i,a)}var Ei=di.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return B(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vn=Ei.extend({options:{fill:!0,radius:10},initialize:function(i,a){B(this,a),this._latlng=Y(i),this._radius=this.options.radius},setLatLng:function(i){var a=this._latlng;return this._latlng=Y(i),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var a=i&&i.radius||this._radius;return Ei.prototype.setStyle.call(this,i),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,a=this._radiusY||i,l=this._clickTolerance(),c=[i+l,a+l];this._pxBounds=new zt(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Fo(i,a){return new Vn(i,a)}var Ts=Vn.extend({initialize:function(i,a,l){if(typeof a=="number"&&(a=v({},l,{radius:a})),B(this,a),this._latlng=Y(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new ut(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Ei.prototype.setStyle,_project:function(){var i=this._latlng.lng,a=this._latlng.lat,l=this._map,c=l.options.crs;if(c.distance===vt.distance){var p=Math.PI/180,_=this._mRadius/vt.R/p,w=l.project([a+_,i]),M=l.project([a-_,i]),U=w.add(M).divideBy(2),X=l.unproject(U).lat,ct=Math.acos((Math.cos(_*p)-Math.sin(a*p)*Math.sin(X*p))/(Math.cos(a*p)*Math.cos(X*p)))/p;(isNaN(ct)||ct===0)&&(ct=_/Math.cos(Math.PI/180*a)),this._point=U.subtract(l.getPixelOrigin()),this._radius=isNaN(ct)?0:U.x-l.project([X,i-ct]).x,this._radiusY=U.y-w.y}else{var wt=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(wt).x}this._updateBounds()}});function Wo(i,a,l){return new Ts(i,a,l)}var ki=Ei.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,a){B(this,a),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var a=1/0,l=null,c=Ha,p,_,w=0,M=this._parts.length;w<M;w++)for(var U=this._parts[w],X=1,ct=U.length;X<ct;X++){p=U[X-1],_=U[X];var wt=c(i,p,_,!0);wt<a&&(a=wt,l=c(i,p,_))}return l&&(l.distance=Math.sqrt(a)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,a){return a=a||this._defaultShape(),i=Y(i),a.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new ut,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return $e(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var a=[],l=$e(i),c=0,p=i.length;c<p;c++)l?(a[c]=Y(i[c]),this._bounds.extend(a[c])):a[c]=this._convertLatLngs(i[c]);return a},_project:function(){var i=new zt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),a=new K(i,i);this._rawPxBounds&&(this._pxBounds=new zt([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(i,a,l){var c=i[0]instanceof Ct,p=i.length,_,w;if(c){for(w=[],_=0;_<p;_++)w[_]=this._map.latLngToLayerPoint(i[_]),l.extend(w[_]);a.push(w)}else for(_=0;_<p;_++)this._projectLatlngs(i[_],a,l)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,l,c,p,_,w,M,U;for(l=0,p=0,_=this._rings.length;l<_;l++)for(U=this._rings[l],c=0,w=U.length;c<w-1;c++)M=Io(U[c],U[c+1],i,c,!0),M&&(a[p]=a[p]||[],a[p].push(M[0]),(M[1]!==U[c+1]||c===w-2)&&(a[p].push(M[1]),p++))}},_simplifyPoints:function(){for(var i=this._parts,a=this.options.smoothFactor,l=0,c=i.length;l<c;l++)i[l]=Po(i[l],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,a){var l,c,p,_,w,M,U=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(l=0,_=this._parts.length;l<_;l++)for(M=this._parts[l],c=0,w=M.length,p=w-1;c<w;p=c++)if(!(!a&&c===0)&&Go(i,M[p],M[c])<=U)return!0;return!1}});function Bu(i,a){return new ki(i,a)}ki._flat=ws;var In=ki.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var a=ki.prototype._convertLatLngs.call(this,i),l=a.length;return l>=2&&a[0]instanceof Ct&&a[0].equals(a[l-1])&&a.pop(),a},_setLatLngs:function(i){ki.prototype._setLatLngs.call(this,i),$e(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $e(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,a=this.options.weight,l=new K(a,a);if(i=new zt(i.min.subtract(l),i.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,p=this._rings.length,_;c<p;c++)_=Zo(this._rings[c],i,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var a=!1,l,c,p,_,w,M,U,X;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(_=0,U=this._parts.length;_<U;_++)for(l=this._parts[_],w=0,X=l.length,M=X-1;w<X;M=w++)c=l[w],p=l[M],c.y>i.y!=p.y>i.y&&i.x<(p.x-c.x)*(i.y-c.y)/(p.y-c.y)+c.x&&(a=!a);return a||ki.prototype._containsPoint.call(this,i,!0)}});function ku(i,a){return new In(i,a)}var Ui=Ni.extend({initialize:function(i,a){B(this,a),this._layers={},i&&this.addData(i)},addData:function(i){var a=lt(i)?i:i.features,l,c,p;if(a){for(l=0,c=a.length;l<c;l++)p=a[l],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var _=this.options;if(_.filter&&!_.filter(i))return this;var w=ze(i,_);return w?(w.feature=js(i),w.defaultOptions=w.options,this.resetStyle(w),_.onEachFeature&&_.onEachFeature(i,w),this.addLayer(w)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=v({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(a){this._setLayerStyle(a,i)},this)},_setLayerStyle:function(i,a){i.setStyle&&(typeof a=="function"&&(a=a(i.feature)),i.setStyle(a))}});function ze(i,a){var l=i.type==="Feature"?i.geometry:i,c=l?l.coordinates:null,p=[],_=a&&a.pointToLayer,w=a&&a.coordsToLatLng||Es,M,U,X,ct;if(!c&&!l)return null;switch(l.type){case"Point":return M=w(c),Xn(_,i,M,a);case"MultiPoint":for(X=0,ct=c.length;X<ct;X++)M=w(c[X]),p.push(Xn(_,i,M,a));return new Ni(p);case"LineString":case"MultiLineString":return U=Ya(c,l.type==="LineString"?0:1,w),new ki(U,a);case"Polygon":case"MultiPolygon":return U=Ya(c,l.type==="Polygon"?1:2,w),new In(U,a);case"GeometryCollection":for(X=0,ct=l.geometries.length;X<ct;X++){var wt=ze({geometry:l.geometries[X],type:"Feature",properties:i.properties},a);wt&&p.push(wt)}return new Ni(p);case"FeatureCollection":for(X=0,ct=l.features.length;X<ct;X++){var Dt=ze(l.features[X],a);Dt&&p.push(Dt)}return new Ni(p);default:throw new Error("Invalid GeoJSON object.")}}function Xn(i,a,l,c){return i?i(a,l):new Ga(l,c&&c.markersInheritOptions&&c)}function Es(i){return new Ct(i[1],i[0],i[2])}function Ya(i,a,l){for(var c=[],p=0,_=i.length,w;p<_;p++)w=a?Ya(i[p],a-1,l):(l||Es)(i[p]),c.push(w);return c}function Cs(i,a){return i=Y(i),i.alt!==void 0?[Z(i.lng,a),Z(i.lat,a),Z(i.alt,a)]:[Z(i.lng,a),Z(i.lat,a)]}function Va(i,a,l,c){for(var p=[],_=0,w=i.length;_<w;_++)p.push(a?Va(i[_],$e(i[_])?0:a-1,l,c):Cs(i[_],c));return!a&&l&&p.length>0&&p.push(p[0].slice()),p}function Ji(i,a){return i.feature?v({},i.feature,{geometry:a}):js(a)}function js(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Fi={toGeoJSON:function(i){return Ji(this,{type:"Point",coordinates:Cs(this.getLatLng(),i)})}};Ga.include(Fi),Ts.include(Fi),Vn.include(Fi),ki.include({toGeoJSON:function(i){var a=!$e(this._latlngs),l=Va(this._latlngs,a?1:0,!1,i);return Ji(this,{type:(a?"Multi":"")+"LineString",coordinates:l})}}),In.include({toGeoJSON:function(i){var a=!$e(this._latlngs),l=a&&!$e(this._latlngs[0]),c=Va(this._latlngs,l?2:a?1:0,!0,i);return a||(c=[c]),Ji(this,{type:(l?"Multi":"")+"Polygon",coordinates:c})}}),Yn.include({toMultiPoint:function(i){var a=[];return this.eachLayer(function(l){a.push(l.toGeoJSON(i).geometry.coordinates)}),Ji(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(i){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(i);var l=a==="GeometryCollection",c=[];return this.eachLayer(function(p){if(p.toGeoJSON){var _=p.toGeoJSON(i);if(l)c.push(_.geometry);else{var w=js(_);w.type==="FeatureCollection"?c.push.apply(c,w.features):c.push(w)}}}),l?Ji(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function As(i,a){return new Ui(i,a)}var Ia=As,Qn=di.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,a,l){this._url=i,this._bounds=gt(a),B(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ot(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ce(this._image),this},bringToBack:function(){return this._map&&dn(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=gt(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",a=this._image=i?this._url:Bt("img");if(Ot(a,"leaflet-image-layer"),this._zoomAnimated&&Ot(a,"leaflet-zoom-animated"),this.options.className&&Ot(a,this.options.className),a.onselectstart=E,a.onmousemove=E,a.onload=b(this.fire,this,"load"),a.onerror=b(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(i){var a=this._map.getZoomScale(i.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Di(this._image,l,a)},_reset:function(){var i=this._image,a=new zt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=a.getSize();ie(i,a.min),i.style.width=l.x+"px",i.style.height=l.y+"px"},_updateOpacity:function(){ae(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),$o=function(i,a,l){return new Qn(i,a,l)},Wi=Qn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",a=this._image=i?this._url:Bt("video");if(Ot(a,"leaflet-image-layer"),this._zoomAnimated&&Ot(a,"leaflet-zoom-animated"),this.options.className&&Ot(a,this.options.className),a.onselectstart=E,a.onmousemove=E,a.onloadeddata=b(this.fire,this,"load"),i){for(var l=a.getElementsByTagName("source"),c=[],p=0;p<l.length;p++)c.push(l[p].src);this._url=l.length>0?c:[a.src];return}lt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var w=Bt("source");w.src=this._url[_],a.appendChild(w)}}});function Kn(i,a,l){return new Wi(i,a,l)}var Ms=Qn.extend({_initImage:function(){var i=this._image=this._url;Ot(i,"leaflet-image-layer"),this._zoomAnimated&&Ot(i,"leaflet-zoom-animated"),this.options.className&&Ot(i,this.options.className),i.onselectstart=E,i.onmousemove=E}});function tr(i,a,l){return new Ms(i,a,l)}var Oe=di.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,a){i&&(i instanceof Ct||lt(i))?(this._latlng=Y(i),B(this,a)):(B(this,i),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&ae(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&ae(this._container,1),this.bringToFront(),this.options.interactive&&(Ot(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(ae(this._container,0),this._removeTimeout=setTimeout(b(Wt,void 0,this._container),200)):Wt(this._container),this.options.interactive&&(le(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Y(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ce(this._container),this},bringToBack:function(){return this._map&&dn(this._container),this},_prepareOpen:function(i){var a=this._source;if(!a._map)return!1;if(a instanceof Ni){a=null;var l=this._source._layers;for(var c in l)if(l[c]._map){a=l[c];break}if(!a)return!1;this._source=a}if(!i)if(a.getCenter)i=a.getCenter();else if(a.getLatLng)i=a.getLatLng();else if(a.getBounds)i=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")i.innerHTML=a;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),a=st(this.options.offset),l=this._getAnchor();this._zoomAnimated?ie(this._container,i.add(l)):a=a.add(i).add(l);var c=this._containerBottom=-a.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=c+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});Zt.include({_initOverlay:function(i,a,l,c){var p=a;return p instanceof i||(p=new i(c).setContent(a)),l&&p.setLatLng(l),p}}),di.include({_initOverlay:function(i,a,l,c){var p=l;return p instanceof i?(B(p,c),p._source=this):(p=a&&!c?a:new i(c,this),p.setContent(l)),p}});var Xa=Oe.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Oe.prototype.openOn.call(this,i)},onAdd:function(i){Oe.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ei||this._source.on("preclick",fi))},onRemove:function(i){Oe.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ei||this._source.off("preclick",fi))},getEvents:function(){var i=Oe.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",a=this._container=Bt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=Bt("div",i+"-content-wrapper",a);if(this._contentNode=Bt("div",i+"-content",l),mn(a),wi(this._contentNode),Mt(a,"contextmenu",fi),this._tipContainer=Bt("div",i+"-tip-container",a),this._tip=Bt("div",i+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=Bt("a",i+"-close-button",a);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(c,"click",function(p){fe(p),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,a=i.style;a.width="",a.whiteSpace="nowrap";var l=i.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),a.width=l+1+"px",a.whiteSpace="",a.height="";var c=i.offsetHeight,p=this.options.maxHeight,_="leaflet-popup-scrolled";p&&c>p?(a.height=p+"px",Ot(i,_)):le(i,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),l=this._getAnchor();ie(this._container,a.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,a=parseInt(za(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+a,c=this._containerWidth,p=new K(this._containerLeft,-l-this._containerBottom);p._add(Xi(this._container));var _=i.layerPointToContainerPoint(p),w=st(this.options.autoPanPadding),M=st(this.options.autoPanPaddingTopLeft||w),U=st(this.options.autoPanPaddingBottomRight||w),X=i.getSize(),ct=0,wt=0;_.x+c+U.x>X.x&&(ct=_.x+c-X.x+U.x),_.x-ct-M.x<0&&(ct=_.x-M.x),_.y+l+U.y>X.y&&(wt=_.y+l-X.y+U.y),_.y-wt-M.y<0&&(wt=_.y-M.y),(ct||wt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ct,wt]))}},_getAnchor:function(){return st(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),er=function(i,a){return new Xa(i,a)};Zt.mergeOptions({closePopupOnClick:!0}),Zt.include({openPopup:function(i,a,l){return this._initOverlay(Xa,i,a,l).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),di.include({bindPopup:function(i,a){return this._popup=this._initOverlay(Xa,this._popup,i,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Ni||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Qi(i);var a=i.layer||i.target;if(this._popup._source===a&&!(a instanceof Ei)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=a,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Qa=Oe.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Oe.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Oe.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Oe.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",a=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Bt("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+C(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var a,l,c=this._map,p=this._container,_=c.latLngToContainerPoint(c.getCenter()),w=c.layerPointToContainerPoint(i),M=this.options.direction,U=p.offsetWidth,X=p.offsetHeight,ct=st(this.options.offset),wt=this._getAnchor();M==="top"?(a=U/2,l=X):M==="bottom"?(a=U/2,l=0):M==="center"?(a=U/2,l=X/2):M==="right"?(a=0,l=X/2):M==="left"?(a=U,l=X/2):w.x<_.x?(M="right",a=0,l=X/2):(M="left",a=U+(ct.x+wt.x)*2,l=X/2),i=i.subtract(st(a,l,!0)).add(ct).add(wt),le(p,"leaflet-tooltip-right"),le(p,"leaflet-tooltip-left"),le(p,"leaflet-tooltip-top"),le(p,"leaflet-tooltip-bottom"),Ot(p,"leaflet-tooltip-"+M),ie(p,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&ae(this._container,i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(a)},_getAnchor:function(){return st(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Uu=function(i,a){return new Qa(i,a)};Zt.include({openTooltip:function(i,a,l){return this._initOverlay(Qa,i,a,l).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),di.include({bindTooltip:function(i,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qa,this._tooltip,i,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var a=i?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[a](l),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Ni||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&(Mt(a,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Mt(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var a=i.latlng,l,c;this._tooltip.options.sticky&&i.originalEvent&&(l=this._map.mouseEventToContainerPoint(i.originalEvent),c=this._map.containerPointToLayerPoint(l),a=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(a)}});var ir=Ti.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var a=i&&i.tagName==="DIV"?i:document.createElement("div"),l=this.options;if(l.html instanceof Element?(Fe(a),a.appendChild(l.html)):a.innerHTML=l.html!==!1?l.html:"",l.bgPos){var c=st(l.bgPos);a.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function Hu(i){return new ir(i)}Ti.Default=qa;var Jn=di.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){B(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Wt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ce(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=N(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof K?i:new K(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var a=this.getPane().children,l=-i(-1/0,1/0),c=0,p=a.length,_;c<p;c++)_=a[c].style.zIndex,a[c]!==this._container&&_&&(l=i(l,+_));isFinite(l)&&(this.options.zIndex=l+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!bt.ielt9){ae(this._container,this.options.opacity);var i=+new Date,a=!1,l=!1;for(var c in this._tiles){var p=this._tiles[c];if(!(!p.current||!p.loaded)){var _=Math.min(1,(i-p.loaded)/200);ae(p.el,_),_<1?a=!0:(p.active?l=!0:this._onOpaqueTile(p),p.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),a&&(F(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=Bt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,a=this.options.maxZoom;if(i!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===i?(this._levels[l].el.style.zIndex=a-Math.abs(i-l),this._onUpdateLevel(l)):(Wt(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var c=this._levels[i],p=this._map;return c||(c=this._levels[i]={},c.el=Bt("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=a,c.origin=p.project(p.unproject(p.getPixelOrigin()),i).round(),c.zoom=i,this._setZoomTransform(c,p.getCenter(),p.getZoom()),E(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var i,a,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)a=this._tiles[i],a.retain=a.current;for(i in this._tiles)if(a=this._tiles[i],a.current&&!a.active){var c=a.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var a in this._tiles)this._tiles[a].coords.z===i&&this._removeTile(a)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Wt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,a,l,c){var p=Math.floor(i/2),_=Math.floor(a/2),w=l-1,M=new K(+p,+_);M.z=+w;var U=this._tileCoordsToKey(M),X=this._tiles[U];return X&&X.active?(X.retain=!0,!0):(X&&X.loaded&&(X.retain=!0),w>c?this._retainParent(p,_,w,c):!1)},_retainChildren:function(i,a,l,c){for(var p=2*i;p<2*i+2;p++)for(var _=2*a;_<2*a+2;_++){var w=new K(p,_);w.z=l+1;var M=this._tileCoordsToKey(w),U=this._tiles[M];if(U&&U.active){U.retain=!0;continue}else U&&U.loaded&&(U.retain=!0);l+1<c&&this._retainChildren(p,_,l+1,c)}},_resetView:function(i){var a=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var a=this.options;return a.minNativeZoom!==void 0&&i<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<i?a.maxNativeZoom:i},_setView:function(i,a,l,c){var p=Math.round(a);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var _=this.options.updateWhenZooming&&p!==this._tileZoom;(!c||_)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(i),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(i,a)},_setZoomTransforms:function(i,a){for(var l in this._levels)this._setZoomTransform(this._levels[l],i,a)},_setZoomTransform:function(i,a,l){var c=this._map.getZoomScale(l,i.zoom),p=i.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(a,l)).round();bt.any3d?Di(i.el,p,c):ie(i.el,p)},_resetGrid:function(){var i=this._map,a=i.options.crs,l=this._tileSize=this.getTileSize(),c=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,a.wrapLng[0]],c).x/l.x),Math.ceil(i.project([0,a.wrapLng[1]],c).x/l.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([a.wrapLat[0],0],c).y/l.x),Math.ceil(i.project([a.wrapLat[1],0],c).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var a=this._map,l=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),c=a.getZoomScale(l,this._tileZoom),p=a.project(i,this._tileZoom).floor(),_=a.getSize().divideBy(c*2);return new zt(p.subtract(_),p.add(_))},_update:function(i){var a=this._map;if(a){var l=this._clampZoom(a.getZoom());if(i===void 0&&(i=a.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(i),p=this._pxBoundsToTileRange(c),_=p.getCenter(),w=[],M=this.options.keepBuffer,U=new zt(p.getBottomLeft().subtract([M,-M]),p.getTopRight().add([M,-M]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var X in this._tiles){var ct=this._tiles[X].coords;(ct.z!==this._tileZoom||!U.contains(new K(ct.x,ct.y)))&&(this._tiles[X].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(i,l);return}for(var wt=p.min.y;wt<=p.max.y;wt++)for(var Dt=p.min.x;Dt<=p.max.x;Dt++){var je=new K(Dt,wt);if(je.z=this._tileZoom,!!this._isValidTile(je)){var de=this._tiles[this._tileCoordsToKey(je)];de?de.current=!0:w.push(je)}}if(w.sort(function(Yt,Vt){return Yt.distanceTo(_)-Vt.distanceTo(_)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xe=document.createDocumentFragment();for(Dt=0;Dt<w.length;Dt++)this._addTile(w[Dt],Xe);this._level.el.appendChild(Xe)}}}},_isValidTile:function(i){var a=this._map.options.crs;if(!a.infinite){var l=this._globalTileRange;if(!a.wrapLng&&(i.x<l.min.x||i.x>l.max.x)||!a.wrapLat&&(i.y<l.min.y||i.y>l.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(i);return gt(this.options.bounds).overlaps(c)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var a=this._map,l=this.getTileSize(),c=i.scaleBy(l),p=c.add(l),_=a.unproject(c,i.z),w=a.unproject(p,i.z);return[_,w]},_tileCoordsToBounds:function(i){var a=this._tileCoordsToNwSe(i),l=new ut(a[0],a[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var a=i.split(":"),l=new K(+a[0],+a[1]);return l.z=+a[2],l},_removeTile:function(i){var a=this._tiles[i];a&&(Wt(a.el),delete this._tiles[i],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ot(i,"leaflet-tile");var a=this.getTileSize();i.style.width=a.x+"px",i.style.height=a.y+"px",i.onselectstart=E,i.onmousemove=E,bt.ielt9&&this.options.opacity<1&&ae(i,this.options.opacity)},_addTile:function(i,a){var l=this._getTilePos(i),c=this._tileCoordsToKey(i),p=this.createTile(this._wrapCoords(i),b(this._tileReady,this,i));this._initTile(p),this.createTile.length<2&&nt(b(this._tileReady,this,i,null,p)),ie(p,l),this._tiles[c]={el:p,coords:i,current:!0},a.appendChild(p),this.fire("tileloadstart",{tile:p,coords:i})},_tileReady:function(i,a,l){a&&this.fire("tileerror",{error:a,tile:l,coords:i});var c=this._tileCoordsToKey(i);l=this._tiles[c],l&&(l.loaded=+new Date,this._map._fadeAnimated?(ae(l.el,0),F(this._fadeFrame),this._fadeFrame=nt(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),a||(Ot(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),bt.ielt9||!this._map._fadeAnimated?nt(this._pruneTiles,this):setTimeout(b(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var a=new K(this._wrapX?O(i.x,this._wrapX):i.x,this._wrapY?O(i.y,this._wrapY):i.y);return a.z=i.z,a},_pxBoundsToTileRange:function(i){var a=this.getTileSize();return new zt(i.min.unscaleBy(a).floor(),i.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function nr(i){return new Jn(i)}var $i=Jn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,a){this._url=i,a=B(this,a),a.detectRetina&&bt.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,a){return this._url===i&&a===void 0&&(a=!0),this._url=i,a||this.redraw(),this},createTile:function(i,a){var l=document.createElement("img");return Mt(l,"load",b(this._tileOnLoad,this,a,l)),Mt(l,"error",b(this._tileOnError,this,a,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(i),l},getTileUrl:function(i){var a={r:bt.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-i.y;this.options.tms&&(a.y=l),a["-y"]=l}return $(this._url,v(a,this.options))},_tileOnLoad:function(i,a){bt.ielt9?setTimeout(b(i,this,null,a),0):i(null,a)},_tileOnError:function(i,a,l){var c=this.options.errorTileUrl;c&&a.getAttribute("src")!==c&&(a.src=c),i(l,a)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,a=this.options.maxZoom,l=this.options.zoomReverse,c=this.options.zoomOffset;return l&&(i=a-i),i+c},_getSubdomain:function(i){var a=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var i,a;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(a=this._tiles[i].el,a.onload=E,a.onerror=E,!a.complete)){a.src=Et;var l=this._tiles[i].coords;Wt(a),delete this._tiles[i],this.fire("tileabort",{tile:a,coords:l})}},_removeTile:function(i){var a=this._tiles[i];if(a)return a.el.setAttribute("src",Et),Jn.prototype._removeTile.call(this,i)},_tileReady:function(i,a,l){if(!(!this._map||l&&l.getAttribute("src")===Et))return Jn.prototype._tileReady.call(this,i,a,l)}});function ti(i,a){return new $i(i,a)}var Ka=$i.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,a){this._url=i;var l=v({},this.defaultWmsParams);for(var c in a)c in this.options||(l[c]=a[c]);a=B(this,a);var p=a.detectRetina&&bt.retina?2:1,_=this.getTileSize();l.width=_.x*p,l.height=_.y*p,this.wmsParams=l},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,$i.prototype.onAdd.call(this,i)},getTileUrl:function(i){var a=this._tileCoordsToNwSe(i),l=this._crs,c=ft(l.project(a[0]),l.project(a[1])),p=c.min,_=c.max,w=(this._wmsVersion>=1.3&&this._crs===Al?[p.y,p.x,_.y,_.x]:[p.x,p.y,_.x,_.y]).join(","),M=$i.prototype.getTileUrl.call(this,i);return M+W(this.wmsParams,M,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(i,a){return v(this.wmsParams,i),a||this.redraw(),this}});function ei(i,a){return new Ka(i,a)}$i.WMS=Ka,ti.wms=ei;var qe=di.extend({options:{padding:.1},initialize:function(i){B(this,i),C(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ot(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,a){var l=this._map.getZoomScale(a,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,a),_=c.multiplyBy(-l).add(p).subtract(this._map._getNewPixelOrigin(i,a));bt.any3d?Di(this._container,_,l):ie(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,a=this._map.getSize(),l=this._map.containerPointToLayerPoint(a.multiplyBy(-i)).round();this._bounds=new zt(l,l.add(a.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zs=qe.extend({options:{tolerance:0},getEvents:function(){var i=qe.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qe.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Mt(i,"mousemove",this._onMouseMove,this),Mt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,Wt(this._container),Kt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var a in this._layers)i=this._layers[a],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qe.prototype._update.call(this);var i=this._bounds,a=this._container,l=i.getSize(),c=bt.retina?2:1;ie(a,i.min),a.width=c*l.x,a.height=c*l.y,a.style.width=l.x+"px",a.style.height=l.y+"px",bt.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){qe.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[C(i)]=i;var a=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var a=i._order,l=a.next,c=a.prev;l?l.prev=c:this._drawLast=c,c?c.next=l:this._drawFirst=l,delete i._order,delete this._layers[C(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var a=i.options.dashArray.split(/[, ]+/),l=[],c,p;for(p=0;p<a.length;p++){if(c=Number(a[p]),isNaN(c))return;l.push(c)}i.options._dashArray=l}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||nt(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var a=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new zt,this._redrawBounds.extend(i._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(i._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var a=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,a=this._redrawBounds;if(this._ctx.save(),a){var l=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)i=c.layer,(!a||i._pxBounds&&i._pxBounds.intersects(a))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,a){if(this._drawing){var l,c,p,_,w=i._parts,M=w.length,U=this._ctx;if(M){for(U.beginPath(),l=0;l<M;l++){for(c=0,p=w[l].length;c<p;c++)_=w[l][c],U[c?"lineTo":"moveTo"](_.x,_.y);a&&U.closePath()}this._fillStroke(U,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var a=i._point,l=this._ctx,c=Math.max(Math.round(i._radius),1),p=(Math.max(Math.round(i._radiusY),1)||c)/c;p!==1&&(l.save(),l.scale(1,p)),l.beginPath(),l.arc(a.x,a.y/p,c,0,Math.PI*2,!1),p!==1&&l.restore(),this._fillStroke(l,i)}},_fillStroke:function(i,a){var l=a.options;l.fill&&(i.globalAlpha=l.fillOpacity,i.fillStyle=l.fillColor||l.color,i.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),i.globalAlpha=l.opacity,i.lineWidth=l.weight,i.strokeStyle=l.color,i.lineCap=l.lineCap,i.lineJoin=l.lineJoin,i.stroke())},_onClick:function(i){for(var a=this._map.mouseEventToLayerPoint(i),l,c,p=this._drawFirst;p;p=p.next)l=p.layer,l.options.interactive&&l._containsPoint(a)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(l))&&(c=l);this._fireEvent(c?[c]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,a)}},_handleMouseOut:function(i){var a=this._hoveredLayer;a&&(le(this._container,"leaflet-interactive"),this._fireEvent([a],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,a){if(!this._mouseHoverThrottled){for(var l,c,p=this._drawFirst;p;p=p.next)l=p.layer,l.options.interactive&&l._containsPoint(a)&&(c=l);c!==this._hoveredLayer&&(this._handleMouseOut(i),c&&(Ot(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(b(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,a,l){this._map._fireDOMEvent(a,l||a.type,i)},_bringToFront:function(i){var a=i._order;if(a){var l=a.next,c=a.prev;if(l)l.prev=c;else return;c?c.next=l:l&&(this._drawFirst=l),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(i)}},_bringToBack:function(i){var a=i._order;if(a){var l=a.next,c=a.prev;if(c)c.next=l;else return;l?l.prev=c:c&&(this._drawLast=c),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(i)}}});function Ja(i){return bt.canvas?new zs(i):null}var tn=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ml={_initContainer:function(){this._container=Bt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qe.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var a=i._container=tn("shape");Ot(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",i._path=tn("path"),a.appendChild(i._path),this._updateStyle(i),this._layers[C(i)]=i},_addPath:function(i){var a=i._container;this._container.appendChild(a),i.options.interactive&&i.addInteractiveTarget(a)},_removePath:function(i){var a=i._container;Wt(a),i.removeInteractiveTarget(a),delete this._layers[C(i)]},_updateStyle:function(i){var a=i._stroke,l=i._fill,c=i.options,p=i._container;p.stroked=!!c.stroke,p.filled=!!c.fill,c.stroke?(a||(a=i._stroke=tn("stroke")),p.appendChild(a),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=lt(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=c.lineCap.replace("butt","flat"),a.joinstyle=c.lineJoin):a&&(p.removeChild(a),i._stroke=null),c.fill?(l||(l=i._fill=tn("fill")),p.appendChild(l),l.color=c.fillColor||c.color,l.opacity=c.fillOpacity):l&&(p.removeChild(l),i._fill=null)},_updateCircle:function(i){var a=i._point.round(),l=Math.round(i._radius),c=Math.round(i._radiusY||l);this._setPath(i,i._empty()?"M0 0":"AL "+a.x+","+a.y+" "+l+","+c+" 0,"+65535*360)},_setPath:function(i,a){i._path.v=a},_bringToFront:function(i){Ce(i._container)},_bringToBack:function(i){dn(i._container)}},Ci=bt.vml?tn:re,Fn=qe.extend({_initContainer:function(){this._container=Ci("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ci("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Wt(this._container),Kt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qe.prototype._update.call(this);var i=this._bounds,a=i.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,l.setAttribute("width",a.x),l.setAttribute("height",a.y)),ie(l,i.min),l.setAttribute("viewBox",[i.min.x,i.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(i){var a=i._path=Ci("path");i.options.className&&Ot(a,i.options.className),i.options.interactive&&Ot(a,"leaflet-interactive"),this._updateStyle(i),this._layers[C(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Wt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[C(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var a=i._path,l=i.options;a&&(l.stroke?(a.setAttribute("stroke",l.color),a.setAttribute("stroke-opacity",l.opacity),a.setAttribute("stroke-width",l.weight),a.setAttribute("stroke-linecap",l.lineCap),a.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?a.setAttribute("stroke-dasharray",l.dashArray):a.removeAttribute("stroke-dasharray"),l.dashOffset?a.setAttribute("stroke-dashoffset",l.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),l.fill?(a.setAttribute("fill",l.fillColor||l.color),a.setAttribute("fill-opacity",l.fillOpacity),a.setAttribute("fill-rule",l.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(i,a){this._setPath(i,Ee(i._parts,a))},_updateCircle:function(i){var a=i._point,l=Math.max(Math.round(i._radius),1),c=Math.max(Math.round(i._radiusY),1)||l,p="a"+l+","+c+" 0 1,0 ",_=i._empty()?"M0 0":"M"+(a.x-l)+","+a.y+p+l*2+",0 "+p+-l*2+",0 ";this._setPath(i,_)},_setPath:function(i,a){i._path.setAttribute("d",a)},_bringToFront:function(i){Ce(i._path)},_bringToBack:function(i){dn(i._path)}});bt.vml&&Fn.include(Ml);function Fa(i){return bt.svg||bt.vml?new Fn(i):null}Zt.include({getRenderer:function(i){var a=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var a=this._paneRenderers[i];return a===void 0&&(a=this._createRenderer({pane:i}),this._paneRenderers[i]=a),a},_createRenderer:function(i){return this.options.preferCanvas&&Ja(i)||Fa(i)}});var gn=In.extend({initialize:function(i,a){In.prototype.initialize.call(this,this._boundsToLatLngs(i),a)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=gt(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function Zu(i,a){return new gn(i,a)}Fn.create=Ci,Fn.pointsToPath=Ee,Ui.geometryToLayer=ze,Ui.coordsToLatLng=Es,Ui.coordsToLatLngs=Ya,Ui.latLngToCoords=Cs,Ui.latLngsToCoords=Va,Ui.getFeature=Ji,Ui.asFeature=js,Zt.mergeOptions({boxZoom:!0});var Pe=Si.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Kt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),kn(),vs(),this._startPoint=this._map.mouseEventToContainerPoint(i),Mt(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Bt("div","leaflet-zoom-box",this._container),Ot(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var a=new zt(this._point,this._startPoint),l=a.getSize();ie(this._box,a.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Wt(this._box),le(this._container,"leaflet-crosshair")),bi(),La(),Kt(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(b(this._resetState,this),0);var a=new ut(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Zt.addInitHook("addHandler","boxZoom",Pe),Zt.mergeOptions({doubleClickZoom:!0});var Os=Si.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var a=this._map,l=a.getZoom(),c=a.options.zoomDelta,p=i.originalEvent.shiftKey?l-c:l+c;a.options.doubleClickZoom==="center"?a.setZoom(p):a.setZoomAround(i.containerPoint,p)}});Zt.addInitHook("addHandler","doubleClickZoom",Os),Zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ji=Si.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Ki(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ot(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){le(this._map._container,"leaflet-grab"),le(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=gt(this._map.options.maxBounds);this._offsetLimit=ft(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var a=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(a),this._prunePositions(a)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,a){return i-(i-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;i.x<a.min.x&&(i.x=this._viscousLimit(i.x,a.min.x)),i.y<a.min.y&&(i.y=this._viscousLimit(i.y,a.min.y)),i.x>a.max.x&&(i.x=this._viscousLimit(i.x,a.max.x)),i.y>a.max.y&&(i.y=this._viscousLimit(i.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,a=Math.round(i/2),l=this._initialWorldOffset,c=this._draggable._newPos.x,p=(c-a+l)%i+a-l,_=(c+a+l)%i-a-l,w=Math.abs(p+l)<Math.abs(_+l)?p:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(i){var a=this._map,l=a.options,c=!l.inertia||i.noInertia||this._times.length<2;if(a.fire("dragend",i),c)a.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,w=l.easeLinearity,M=p.multiplyBy(w/_),U=M.distanceTo([0,0]),X=Math.min(l.inertiaMaxSpeed,U),ct=M.multiplyBy(X/U),wt=X/(l.inertiaDeceleration*w),Dt=ct.multiplyBy(-wt/2).round();!Dt.x&&!Dt.y?a.fire("moveend"):(Dt=a._limitOffset(Dt,a.options.maxBounds),nt(function(){a.panBy(Dt,{duration:wt,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});Zt.addInitHook("addHandler","dragging",ji),Zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zl=Si.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Mt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Kt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,a=document.documentElement,l=i.scrollTop||a.scrollTop,c=i.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(c,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var a=this._panKeys={},l=this.keyCodes,c,p;for(c=0,p=l.left.length;c<p;c++)a[l.left[c]]=[-1*i,0];for(c=0,p=l.right.length;c<p;c++)a[l.right[c]]=[i,0];for(c=0,p=l.down.length;c<p;c++)a[l.down[c]]=[0,i];for(c=0,p=l.up.length;c<p;c++)a[l.up[c]]=[0,-1*i]},_setZoomDelta:function(i){var a=this._zoomKeys={},l=this.keyCodes,c,p;for(c=0,p=l.zoomIn.length;c<p;c++)a[l.zoomIn[c]]=i;for(c=0,p=l.zoomOut.length;c<p;c++)a[l.zoomOut[c]]=-i},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Kt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var a=i.keyCode,l=this._map,c;if(a in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(c=this._panKeys[a],i.shiftKey&&(c=st(c).multiplyBy(3)),l.options.maxBounds&&(c=l._limitOffset(st(c),l.options.maxBounds)),l.options.worldCopyJump){var p=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(c)));l.panTo(p)}else l.panBy(c)}else if(a in this._zoomKeys)l.setZoom(l.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Qi(i)}}});Zt.addInitHook("addHandler","keyboard",zl),Zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wa=Si.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Kt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var a=Re(i),l=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var c=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(b(this._performZoom,this),c),Qi(i)},_performZoom:function(){var i=this._map,a=i.getZoom(),l=this._map.options.zoomSnap||0;i._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,_=l?Math.ceil(p/l)*l:p,w=i._limitZoom(a+(this._delta>0?_:-_))-a;this._delta=0,this._startTime=null,w&&(i.options.scrollWheelZoom==="center"?i.setZoom(a+w):i.setZoomAround(this._lastMousePos,a+w))}});Zt.addInitHook("addHandler","scrollWheelZoom",Wa);var vn=600;Zt.mergeOptions({tapHold:bt.touchNative&&bt.safari&&bt.mobile,tapTolerance:15});var Ls=Si.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Kt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var a=i.touches[0];this._startPos=this._newPos=new K(a.clientX,a.clientY),this._holdTimeout=setTimeout(b(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",fe),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),vn),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Kt(document,"touchend",fe),Kt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Kt(document,"touchend touchcancel contextmenu",this._cancel,this),Kt(document,"touchmove",this._onMove,this)},_onMove:function(i){var a=i.touches[0];this._newPos=new K(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,a){var l=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});l._simulated=!0,a.target.dispatchEvent(l)}});Zt.addInitHook("addHandler","tapHold",Ls),Zt.mergeOptions({touchZoom:bt.touch,bounceAtZoomLimits:!0});var Ol=Si.extend({addHooks:function(){Ot(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){le(this._map._container,"leaflet-touch-zoom"),Kt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var a=this._map;if(!(!i.touches||i.touches.length!==2||a._animatingZoom||this._zooming)){var l=a.mouseEventToContainerPoint(i.touches[0]),c=a.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(l.add(c)._divideBy(2))),this._startDist=l.distanceTo(c),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),fe(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var a=this._map,l=a.mouseEventToContainerPoint(i.touches[0]),c=a.mouseEventToContainerPoint(i.touches[1]),p=l.distanceTo(c)/this._startDist;if(this._zoom=a.getScaleZoom(p,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&p<1||this._zoom>a.getMaxZoom()&&p>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var _=l._add(c)._divideBy(2)._subtract(this._centerPoint);if(p===1&&_.x===0&&_.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var w=b(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=nt(w,this,!0),fe(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),Kt(document,"touchmove",this._onTouchMove,this),Kt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Zt.addInitHook("addHandler","touchZoom",Ol),Zt.BoxZoom=Pe,Zt.DoubleClickZoom=Os,Zt.Drag=ji,Zt.Keyboard=zl,Zt.ScrollWheelZoom=Wa,Zt.TapHold=Ls,Zt.TouchZoom=Ol,d.Bounds=zt,d.Browser=bt,d.CRS=dt,d.Canvas=zs,d.Circle=Ts,d.CircleMarker=Vn,d.Class=pt,d.Control=Ie,d.DivIcon=ir,d.DivOverlay=Oe,d.DomEvent=xs,d.DomUtil=Zn,d.Draggable=Ki,d.Evented=tt,d.FeatureGroup=Ni,d.GeoJSON=Ui,d.GridLayer=Jn,d.Handler=Si,d.Icon=Ti,d.ImageOverlay=Qn,d.LatLng=Ct,d.LatLngBounds=ut,d.Layer=di,d.LayerGroup=Yn,d.LineUtil=Du,d.Map=Zt,d.Marker=Ga,d.Mixin=Mu,d.Path=Ei,d.Point=K,d.PolyUtil=Cl,d.Polygon=In,d.Polyline=ki,d.Popup=Xa,d.PosAnimation=qn,d.Projection=Xo,d.Rectangle=gn,d.Renderer=qe,d.SVG=Fn,d.SVGOverlay=Ms,d.TileLayer=$i,d.Tooltip=Qa,d.Transformation=ye,d.Util=at,d.VideoOverlay=Wi,d.bind=b,d.bounds=ft,d.canvas=Ja,d.circle=Wo,d.circleMarker=Fo,d.control=Bi,d.divIcon=Hu,d.extend=v,d.featureGroup=Ko,d.geoJSON=As,d.geoJson=Ia,d.gridLayer=nr,d.icon=Za,d.imageOverlay=$o,d.latLng=Y,d.latLngBounds=gt,d.layerGroup=Ru,d.map=bl,d.marker=Jo,d.point=st,d.polygon=ku,d.polyline=Bu,d.popup=er,d.rectangle=Zu,d.setOptions=B,d.stamp=C,d.svg=Fa,d.svgOverlay=tr,d.tileLayer=ti,d.tooltip=Uu,d.transformation=ce,d.version=m,d.videoOverlay=Kn;var Ll=window.L;d.noConflict=function(){return window.L=Ll,this},window.L=d}))})(go,go.exports)),go.exports}var ol=E0();const No=hu(ol);function gu(f,h,d){return Object.freeze({instance:f,context:h,container:d})}function vu(f,h){return h==null?function(m,v){const x=j.useRef(void 0);return x.current||(x.current=f(m,v)),x}:function(m,v){const x=j.useRef(void 0);x.current||(x.current=f(m,v));const b=j.useRef(m),{instance:k}=x.current;return j.useEffect(function(){b.current!==m&&(h(k,m,b.current),b.current=m)},[k,m,h]),x}}function tg(f,h){j.useEffect(function(){return(h.layerContainer??h.map).addLayer(f.instance),function(){h.layerContainer?.removeLayer(f.instance),h.map.removeLayer(f.instance)}},[h,f])}function eg(f){return function(d){const m=mu(),v=f(pu(d,m),m);return Fp(m.map,d.attribution),Vf(v.current,d.eventHandlers),tg(v.current,m),v}}function C0(f,h){const d=j.useRef(void 0);j.useEffect(function(){if(h.pathOptions!==d.current){const v=h.pathOptions??{};f.instance.setStyle(v),d.current=v}},[f,h])}function j0(f){return function(d){const m=mu(),v=f(pu(d,m),m);return Vf(v.current,d.eventHandlers),tg(v.current,m),C0(v.current,d),v}}function A0(f,h){const d=vu(f,h),m=eg(d);return $p(m)}function M0(f,h){const d=vu(f),m=N0(d,h);return w0(m)}function z0(f,h){const d=vu(f,h),m=j0(d);return $p(m)}function O0(f,h){const d=vu(f,h),m=eg(d);return S0(m)}function L0(f,h,d){const{opacity:m,zIndex:v}=h;m!=null&&m!==d.opacity&&f.setOpacity(m),v!=null&&v!==d.zIndex&&f.setZIndex(v)}function ig(){return mu().map}function D0(f){const h=ig();return j.useEffect(function(){return h.on(f),function(){h.off(f)}},[h,f]),h}function R0({bounds:f,boundsOptions:h,center:d,children:m,className:v,id:x,placeholder:b,style:k,whenReady:C,zoom:N,...O},E){const[Z]=j.useState({className:v,id:x,style:k}),[P,V]=j.useState(null),B=j.useRef(void 0);j.useImperativeHandle(E,()=>P?.map??null,[P]);const W=j.useCallback($=>{if($!==null&&!B.current){const lt=new ol.Map($,O);B.current=lt,d!=null&&N!=null?lt.setView(d,N):f!=null&&lt.fitBounds(f,h),C!=null&&lt.whenReady(C),V(b0(lt))}},[]);j.useEffect(()=>()=>{P?.map.remove()},[P]);const J=P?yi.createElement(Yf,{value:P},m):b??null;return yi.createElement("div",{...Z,ref:W},J)}const B0=j.forwardRef(R0),Tf=A0(function({position:h,...d},m){const v=new ol.Marker(h,d);return gu(v,Wp(m,{overlayContainer:v}))},function(h,d,m){d.position!==m.position&&h.setLatLng(d.position),d.icon!=null&&d.icon!==m.icon&&h.setIcon(d.icon),d.zIndexOffset!=null&&d.zIndexOffset!==m.zIndexOffset&&h.setZIndexOffset(d.zIndexOffset),d.opacity!=null&&d.opacity!==m.opacity&&h.setOpacity(d.opacity),h.dragging!=null&&d.draggable!==m.draggable&&(d.draggable===!0?h.dragging.enable():h.dragging.disable())}),k0=z0(function({positions:h,...d},m){const v=new ol.Polyline(h,d);return gu(v,Wp(m,{overlayContainer:v}))},function(h,d,m){d.positions!==m.positions&&h.setLatLngs(d.positions)}),Fm=M0(function(h,d){const m=new ol.Popup(h,d.overlayContainer);return gu(m,d)},function(h,d,{position:m},v){j.useEffect(function(){const{instance:b}=h;function k(N){N.popup===b&&(b.update(),v(!0))}function C(N){N.popup===b&&v(!1)}return d.map.on({popupopen:k,popupclose:C}),d.overlayContainer==null?(m!=null&&b.setLatLng(m),b.openOn(d.map)):d.overlayContainer.bindPopup(b),function(){d.map.off({popupopen:k,popupclose:C}),d.overlayContainer?.unbindPopup(),d.map.removeLayer(b)}},[h,d,v,m])}),U0=O0(function({url:h,...d},m){const v=new ol.TileLayer(h,pu(d,m));return gu(v,m)},function(h,d,m){L0(h,d,m);const{url:v}=d;v!=null&&v!==m.url&&h.setUrl(v)}),H0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",Z0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",q0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";function Wm({isOpen:f,onClose:h,children:d,title:m}){return u.jsx(ri,{children:f&&u.jsxs(u.Fragment,{children:[u.jsx(St.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),u.jsxs(St.div,{drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:(v,x)=>{(x.offset.y>100||x.velocity.y>500)&&h()},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-[#1A1A1A] rounded-t-3xl border-t border-white/10 shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[u.jsx("div",{className:"w-full flex justify-center pt-4 pb-2 cursor-grab active:cursor-grabbing",children:u.jsx("div",{className:"w-12 h-1.5 bg-white/20 rounded-full"})}),u.jsxs("div",{className:"px-6 pb-4 flex justify-between items-center border-b border-white/5",children:[u.jsx("h3",{className:"text-lg font-bold text-white/90",children:m}),u.jsx("button",{onClick:h,className:"p-2 bg-white/5 rounded-full hover:bg-white/10 transition-colors",children:u.jsx(_i,{className:"w-5 h-5 text-white/50"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:d})]})]})})}delete No.Icon.Default.prototype._getIconUrl;No.Icon.Default.mergeOptions({iconRetinaUrl:H0,iconUrl:Z0,shadowUrl:q0});const P0=new No.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-violet.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),G0=new No.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Y0=new No.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function V0({isAdding:f,onAdd:h}){return D0({click(d){f&&h(d.latlng)}}),null}function I0({center:f}){const h=ig();return f&&h.setView(f),null}function X0(){const{profile:f,couple:h}=Ze(),[d,m]=j.useState(null),[v,x]=j.useState(null),[b,k]=j.useState(null),[C,N]=j.useState(!0),[O,E]=j.useState([]),[Z,P]=j.useState(!1),[V,B]=j.useState(null),[W,J]=j.useState(""),[$,lt]=j.useState(""),[ot,Et]=j.useState(null);j.useEffect(()=>{if(!navigator.geolocation){console.warn("Geolocation not supported, using fallback"),m({lat:33.6844,lng:73.0479});return}const it=navigator.geolocation.watchPosition(async nt=>{const{latitude:F,longitude:at}=nt.coords;m({lat:F,lng:at}),f&&await et.from("profiles").update({location:`POINT(${at} ${F})`}).eq("id",f.id)},nt=>{console.error("Geolocation error:",nt),d||m({lat:33.6844,lng:73.0479})},{enableHighAccuracy:!0,timeout:1e4});return()=>navigator.geolocation.clearWatch(it)},[f]),j.useEffect(()=>{if(!h?.id)return;const it=et.channel(`location:${h.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`couple_id=eq.${h.id}`},at=>{if(at.new.id!==f.id&&at.new.location){const pt=at.new.location.match(/\(([^)]+)\)/);if(pt){const[rt,z]=pt[1].split(" ").map(parseFloat);x({lat:z,lng:rt})}}}).subscribe();return(async()=>{const{data:at}=await et.from("profiles").select("location").eq("couple_id",h.id).neq("id",f.id).single();if(at?.location){const pt=at.location.match(/\(([^)]+)\)/);if(pt){const[rt,z]=pt[1].split(" ").map(parseFloat);x({lat:z,lng:rt})}}})(),(async()=>{const{data:at}=await et.from("hidden_events").select("*").eq("couple_id",h.id);if(at){const pt=at.map(rt=>{const z=rt.location.match(/\(([^)]+)\)/);if(z){const[tt,K]=z[1].split(" ").map(parseFloat);return{...rt,lat:K,lng:tt}}return null}).filter(Boolean);E(pt)}})(),()=>et.removeChannel(it)},[h,f]),j.useEffect(()=>{d&&v&&k(ht(d,v))},[d,v]);const ht=(it,nt)=>{const at=(nt.lat-it.lat)*Math.PI/180,pt=(nt.lng-it.lng)*Math.PI/180,rt=Math.sin(at/2)*Math.sin(at/2)+Math.cos(it.lat*Math.PI/180)*Math.cos(nt.lat*Math.PI/180)*Math.sin(pt/2)*Math.sin(pt/2);return(6371*(2*Math.atan2(Math.sqrt(rt),Math.sqrt(1-rt)))).toFixed(3)},Nt=it=>{B(it),P(!1)},yt=async()=>{if(!(!V||!W))try{const it=`POINT(${V.lng} ${V.lat})`,{data:nt,error:F}=await et.from("hidden_events").insert([{couple_id:h.id,creator_id:f.id,location:it,title:W,description:$,icon:"gift"}]).select().single();if(F)throw F;E([...O,{...nt,lat:V.lat,lng:V.lng}]),B(null),J(""),lt("")}catch(it){console.error("Error saving event:",it),alert(`Failed to save location: ${it.message||"Unknown error"}`)}},mt=async()=>{if(ot&&window.confirm("Are you sure you want to remove this memory? This cannot be undone."))try{const{error:it}=await et.from("hidden_events").delete().eq("id",ot.id);if(it)throw it;E(O.filter(nt=>nt.id!==ot.id)),Et(null)}catch(it){console.error("Error deleting event:",it),alert("Failed to delete event.")}};return d?u.jsxs("div",{className:"relative w-full h-[500px] rounded-3xl overflow-hidden shadow-2xl border border-white/10 group",children:[u.jsxs(B0,{center:d,zoom:15,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,className:"z-0",children:[u.jsx(U0,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",className:"map-tiles-dark filter grayscale contrast-125 brightness-75"}),u.jsx(I0,{center:d}),u.jsx(V0,{isAdding:Z,onAdd:Nt}),u.jsx(Tf,{position:d,icon:G0,children:u.jsx(Fm,{children:"You"})}),v&&u.jsxs(u.Fragment,{children:[u.jsx(Tf,{position:v,icon:Y0,children:u.jsx(Fm,{children:"Partner"})}),u.jsx(k0,{positions:[d,v],color:"#ec4899",dashArray:"5, 10",opacity:.6})]}),O.map(it=>{const nt=ht(d,it),F=nt<.05,pt=(v?ht(v,it):999)<.05,rt=F||pt||it.creator_id===f.id;return u.jsx(Tf,{position:[it.lat,it.lng],icon:P0,opacity:rt?1:.7,eventHandlers:{click:()=>Et({...it,unlocked:rt,distKm:nt})}},it.id)})]}),u.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-[100]",children:[b&&C&&u.jsxs("div",{className:"liquid-glass px-3 py-2 rounded-xl text-xs font-bold border border-white/10 text-white flex items-center gap-2",children:[u.jsx(_f,{className:"w-3 h-3 text-love-400"}),b," km apart"]}),b&&u.jsx("button",{onClick:()=>N(!C),className:`p-2 rounded-full shadow-lg transition-colors ${C?"bg-white/10 text-white":"bg-black/60 text-white/50"}`,title:C?"Hide Distance":"Show Distance",children:u.jsx(_f,{className:`w-4 h-4 ${C?"text-love-400":"text-gray-400"}`})})]}),u.jsxs("div",{className:"absolute bottom-6 right-6 z-[100]",children:[!Z&&!V&&u.jsx("button",{onClick:()=>P(!0),className:"bg-love-600 hover:bg-love-500 text-white p-4 rounded-full shadow-lg transition-transform hover:scale-110 flex items-center justify-center",title:"Add Hidden Memory",children:u.jsx(du,{className:"w-6 h-6"})}),Z&&u.jsx("div",{className:"liquid-glass px-4 py-2 rounded-full text-white text-sm font-medium border border-love-500 animate-pulse cursor-pointer",onClick:()=>P(!1),children:"Tap map to place memory... (Cancel)"})]}),u.jsx(Wm,{isOpen:!!ot,onClose:()=>Et(null),title:ot?.unlocked?ot.title:"Locked Memory",children:ot&&u.jsxs("div",{className:"space-y-4",children:[ot.unlocked?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"p-4 bg-green-500/10 border border-green-500/30 rounded-xl flex items-center gap-3",children:[u.jsx(Pp,{className:"w-6 h-6 text-green-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-green-200",children:"Unlocked!"}),u.jsx("p",{className:"text-xs text-green-200/60",children:"You are within range."})]})]}),u.jsx("div",{className:"prose prose-invert",children:u.jsx("p",{className:"text-white/90 leading-relaxed text-lg",children:ot.description})}),u.jsx("p",{className:"text-xs text-white/40 uppercase tracking-widest pt-4",children:"Dropped by Partner"})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-center space-y-4",children:[u.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-full flex items-center justify-center",children:u.jsx(ll,{className:"w-8 h-8 text-love-400"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white/60 mb-1",children:"This memory is hidden."}),u.jsxs("h4",{className:"text-xl font-bold text-white mb-2",children:[(ot.distKm*1e3).toFixed(0)," meters away"]}),u.jsx("p",{className:"text-xs text-love-300",children:"Get closer (50m) to unlock the secret message."})]}),u.jsx("div",{className:"w-full bg-white/10 h-1.5 rounded-full overflow-hidden mt-4",children:u.jsx("div",{className:"h-full bg-love-500 transition-all duration-1000",style:{width:`${Math.max(5,Math.min(100,.05/ot.distKm*100))}%`}})})]}),ot.creator_id===f.id&&u.jsx("div",{className:"pt-4 border-t border-white/5 mt-4",children:u.jsx("button",{onClick:mt,className:"w-full py-3 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-xl text-sm font-bold border border-red-500/20 transition-colors",children:"Remove Memory"})})]})}),u.jsx(Wm,{isOpen:!!V,onClose:()=>B(null),title:"Drop a Secret",children:u.jsxs("div",{className:"space-y-4 pb-8",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2 p-3 bg-love-500/10 rounded-lg border border-love-500/20",children:[u.jsx(Ov,{className:"w-5 h-5 text-love-500"}),u.jsx("p",{className:"text-xs text-love-200",children:"Planting a memory at this exact spot. Your partner must walk here to unlock it."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-white/50 uppercase font-bold mb-1 block",children:"Title"}),u.jsx("input",{type:"text",value:W,onChange:it=>J(it.target.value),placeholder:"e.g. Where we first met",className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white focus:outline-none focus:border-love-500 transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-white/50 uppercase font-bold mb-1 block",children:"Secret Message"}),u.jsx("textarea",{value:$,onChange:it=>lt(it.target.value),placeholder:"Write something sweet...",className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white h-32 focus:outline-none focus:border-love-500 resize-none transition-colors"})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{onClick:()=>B(null),className:"flex-1 py-4 bg-white/5 hover:bg-white/10 rounded-xl font-bold transition-colors",children:"Cancel"}),u.jsxs("button",{onClick:yt,disabled:!W||!$,className:"flex-1 py-4 bg-love-600 hover:bg-love-500 rounded-xl font-bold flex justify-center items-center gap-2 transition-all disabled:opacity-50 disabled:grayscale",children:[u.jsx(Lv,{className:"w-4 h-4"}),"Plant Memory"]})]})]})})]}):u.jsxs("div",{className:"h-80 flex flex-col items-center justify-center bg-white/5 rounded-2xl animate-pulse",children:[u.jsx(_f,{className:"w-8 h-8 text-love-500 mb-2 animate-bounce"}),u.jsx("p",{className:"text-sm text-white/50",children:"Triangulating love coordinates..."})]})}const Q0=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];function K0({onClose:f,onGameEnd:h}){const{user:d,couple:m,profile:v,partnerProfile:x}=Ze(),[b,k]=j.useState(Array(9).fill(null)),[C,N]=j.useState(!0),[O,E]=j.useState(null),[Z,P]=j.useState("Waiting for opponent..."),V=d&&m?[d.id,m.partner_id||(m.partner_b===d.id?m.partner_a:m.partner_b)].sort():[],B=V.length>0&&d?.id===V[0]?"X":"O",W=C&&B==="X"||!C&&B==="O";if(j.useEffect(()=>{if(!m?.id)return;const ht=et.channel(`game:${m.id}`).on("broadcast",{event:"move"},({payload:Nt})=>{k(Nt.board),N(Nt.isXNext)}).on("broadcast",{event:"reset"},()=>{k(Array(9).fill(null)),N(!0),E(null)}).subscribe(async Nt=>{Nt==="SUBSCRIBED"&&P(W?"Your Turn!":"Thinking...")});return()=>{et.removeChannel(ht)}},[m?.id]),j.useEffect(()=>{J(b),O||P(W?"Your Turn!":"Partner's Turn...")},[b,C]),!m||!d)return u.jsx("div",{className:"p-4 text-white",children:"Loading game..."});const J=async ht=>{for(let Nt of Q0){const[yt,mt,it]=Nt;if(ht[yt]&&ht[yt]===ht[mt]&&ht[yt]===ht[it]){const nt=ht[yt];E(nt),nt===B?(xo(),P("You Won! "),await $(d.id)):P(`${x?.username||"Partner"} Won! `);return}}ht.includes(null)||(E("Draw"),P("It's a Draw! "),Et&&await $(null))},$=async ht=>{try{await et.from("game_history").insert([{couple_id:m.id,winner_id:ht,game_type:"tictactoe"}]),h&&h()}catch(Nt){console.error("Error saving game:",Nt)}},lt=async ht=>{if(b[ht]||O||!W)return;const Nt=[...b];Nt[ht]=B,k(Nt),N(!C),await et.channel(`game:${m.id}`).send({type:"broadcast",event:"move",payload:{board:Nt,isXNext:!C}})},ot=async()=>{k(Array(9).fill(null)),N(!0),E(null),await et.channel(`game:${m.id}`).send({type:"broadcast",event:"reset",payload:{}})},Et=m?.partner_a===d.id;return u.jsxs("div",{className:"flex flex-col items-center gap-6 p-6 rounded-[2rem] bg-black/60 backdrop-blur-xl border border-white/10 w-full max-w-sm mx-auto shadow-2xl relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-40 h-40 bg-love-500/20 blur-[60px] rounded-full pointer-events-none"}),u.jsxs("div",{className:"flex justify-between w-full items-center relative z-10",children:[u.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:O?u.jsx(Gp,{className:"text-yellow-400 w-5 h-5"}):"Tic-Tac-Toe"}),u.jsx("button",{onClick:f,className:"p-2 hover:bg-white/10 rounded-full text-white/50 transition-colors",children:u.jsx(_i,{size:20})})]}),u.jsx("div",{className:`px-5 py-2 rounded-full text-sm font-bold border flex items-center gap-2 transition-all ${W&&!O?"bg-love-500 text-white border-love-400 shadow-lg shadow-love-500/20 scale-105":"bg-white/5 text-white/50 border-white/5"}`,children:Z}),u.jsx("div",{className:"grid grid-cols-3 gap-3 w-full aspect-square p-3 bg-white/5 rounded-2xl border border-white/10 shadow-inner",children:b.map((ht,Nt)=>u.jsxs("button",{onClick:()=>lt(Nt),className:`
              w-full h-full rounded-xl flex items-center justify-center text-4xl font-bold transition-all relative shadow-sm
              ${ht?"bg-white/10 border border-white/5":"bg-white/5 border border-white/5 hover:bg-white/15 cursor-pointer"}
              ${ht==="X"?"text-love-400":"text-blue-400"}
              ${!ht&&!O&&W?"hover:scale-95":""}
              ${O?"opacity-50":""}
              ${!ht&&!O&&W?'after:content-[""] after:absolute after:inset-2 after:border-2 after:border-dashed after:border-white/10 after:rounded-lg':""}
            `,disabled:!!ht||!!O,children:[ht==="X"&&u.jsx(_i,{size:40,strokeWidth:2.5}),ht==="O"&&u.jsx(yf,{size:32,strokeWidth:3})]},Nt))}),O&&u.jsxs("button",{onClick:ot,className:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-love-600 to-love-500 hover:from-love-500 hover:to-love-400 text-white rounded-xl font-bold transition-all hover:scale-105 shadow-xl shadow-love-500/30",children:[u.jsx(Dv,{size:18}),"Play Again"]}),u.jsxs("div",{className:"flex justify-between w-full px-4 pt-2 border-t border-white/5",children:[u.jsxs("div",{className:`flex flex-col items-center gap-1 ${B==="X"?"text-love-400":"text-blue-400"} ${C&&!O?"opacity-100 scale-110 font-bold":"opacity-50"}`,children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wider",children:"You"}),u.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg",children:[B==="X"?u.jsx(_i,{size:14}):u.jsx(yf,{size:14}),u.jsx("span",{className:"text-xs",children:v?.username||"Me"})]})]}),u.jsx("div",{className:"w-px bg-white/10 h-8 self-center"}),u.jsxs("div",{className:`flex flex-col items-center gap-1 ${B!=="X"?"text-love-400":"text-blue-400"} ${!C&&!O?"opacity-100 scale-110 font-bold":"opacity-50"}`,children:[u.jsx("span",{className:"text-[10px] uppercase tracking-wider",children:"Partner"}),u.jsxs("div",{className:"flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg",children:[B!=="X"?u.jsx(_i,{size:14}):u.jsx(yf,{size:14}),u.jsx("span",{className:"text-xs",children:x?.username||"Partner"})]})]})]})]})}const J0=({gameHistory:f,user:h,partnerProfile:d})=>u.jsxs("div",{className:"glass-panel p-6 rounded-3xl",children:[u.jsxs("h3",{className:"text-xs uppercase font-bold text-white/40 mb-4 tracking-widest flex justify-between items-center",children:["Recent Games",u.jsxs("span",{className:"text-[10px] bg-white/5 py-1 px-2 rounded-lg",children:[f.length," played"]})]}),f.length>0?u.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto scrollbar-hide",children:f.map((m,v)=>{const x=m.winner_id&&h?.id&&m.winner_id===h.id,b=!m.winner_id;let k="Just now";try{m.played_at&&(k=new Date(m.played_at).toLocaleDateString([],{month:"short",day:"numeric"}))}catch(C){console.error("Date error",C)}return u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-2 rounded-lg ${b?"bg-gray-500/20 text-gray-400":x?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:b?u.jsx("span",{className:"font-bold text-sm leading-none",children:"-"}):u.jsx(Gp,{className:"w-4 h-4"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-white/90",children:b?"Draw":x?"You Won":`${d?.username||"Partner"} Won`}),u.jsx("p",{className:"text-[10px] text-white/40",children:"Tic-Tac-Toe"})]})]}),u.jsx("span",{className:"text-[10px] text-white/30 font-mono",children:k})]},m.id||v)})}):u.jsx("div",{className:"text-center text-xs text-white/30 py-6 italic border border-white/5 rounded-2xl bg-black/20",children:"No games recorded locally yet."})]});function F0(){const{user:f,profile:h}=Ze(),[d,m]=j.useState("initial"),[v,x]=j.useState(""),[b,k]=j.useState(null),[C,N]=j.useState(!1),[O,E]=j.useState(!1),[Z,P]=j.useState(""),V=async()=>{N(!0),P("");try{const J=Math.random().toString(36).substring(2,8).toUpperCase(),{data:$,error:lt}=await et.from("couples").insert([{partner_a:f.id,connect_code:J,streak_count:0}]).select().single();if(lt)throw lt;const{error:ot}=await et.from("profiles").update({couple_id:$.id}).eq("id",f.id);if(ot)throw ot;k(J),m("waiting")}catch(J){console.error(J),P("Failed to create connection. Please try again.")}finally{N(!1)}},B=async()=>{if(!v||v.length<6){P("Please enter a valid 6-character code.");return}N(!0),P("");try{const{data:J,error:$}=await et.from("couples").select("*").eq("connect_code",v.toUpperCase()).single();if($||!J)throw new Error("Invalid code. Please check and try again.");if(J.partner_b)throw new Error("This couple is already full!");const{error:lt}=await et.from("couples").update({partner_b:f.id}).eq("id",J.id);if(lt)throw lt;const{error:ot}=await et.from("profiles").update({couple_id:J.id}).eq("id",f.id);if(ot)throw ot;xo({particleCount:150,spread:70,origin:{y:.6},colors:["#ec4899","#f472b6","#fce7f3"]}),window.location.reload()}catch(J){console.error(J),P(J.message)}finally{N(!1)}},W=()=>{navigator.clipboard.writeText(b),E(!0),setTimeout(()=>E(!1),2e3)};return u.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 relative overflow-hidden bg-gradient-to-br from-[#0f0505] via-[#1a0a0f] to-[#0f0505]",children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden -z-10 opacity-30",children:u.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-love-600 rounded-full blur-[120px] animate-pulse"})}),u.jsxs(St.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md w-full glass-panel p-8 rounded-3xl border border-white/10 shadow-2xl relative z-10",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-love-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-love-500/20",children:u.jsx(Gi,{className:"w-8 h-8 text-love-500 fill-love-500/20 animate-pulse"})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Connect Your Hearts"}),u.jsx("p",{className:"text-white/50 text-sm",children:"You're almost there! Link with your partner to start your shared journey."})]}),u.jsxs(ri,{mode:"wait",children:[d==="initial"&&u.jsxs(St.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[u.jsxs("button",{onClick:()=>{m("create"),V()},disabled:C,className:"w-full py-4 bg-gradient-to-r from-love-600 to-pink-600 hover:from-love-500 hover:to-pink-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-love-500/20 transition-all hover:scale-[1.02]",children:[C?u.jsx(zn,{className:"w-5 h-5 animate-spin"}):u.jsx(zn,{className:"w-5 h-5"}),"I have the First Move"]}),u.jsx("div",{className:"text-center text-xs text-white/30 uppercase tracking-widest my-2",children:"- OR -"}),u.jsxs("button",{onClick:()=>m("join"),className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 text-white rounded-xl font-semibold flex items-center justify-center gap-2 transition-all hover:border-love-500/30",children:[u.jsx(Rv,{className:"w-5 h-5"}),"I have a Code"]})]},"initial"),d==="waiting"&&u.jsxs(St.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6 text-center",children:[u.jsxs("div",{className:"p-6 bg-black/40 rounded-2xl border border-love-500/50 relative overflow-hidden group",children:[u.jsx("div",{className:"absolute inset-0 bg-love-500/10 opacity-0 group-hover:opacity-100 transition-opacity"}),u.jsx("p",{className:"text-xs text-love-300 uppercase tracking-widest mb-2",children:"Your Connection Code"}),u.jsx("div",{className:"text-4xl font-mono font-bold text-white tracking-widest mb-4",children:b}),u.jsxs("button",{onClick:W,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-full text-xs font-medium text-white/80 flex items-center justify-center gap-2 mx-auto transition-colors",children:[O?u.jsx(Zf,{className:"w-3 h-3 text-green-400"}):u.jsx(Bv,{className:"w-3 h-3"}),O?"Copied!":"Tap to Copy"]})]}),u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-love-500 rounded-full animate-ping"}),u.jsx("p",{className:"text-sm text-white/60 animate-pulse",children:"Waiting for partner to join..."})]}),u.jsx("p",{className:"text-xs text-white/30",children:"Share this code with your partner. Once they enter it, your dashboard will unlock automatically."})]},"waiting"),d==="join"&&u.jsxs(St.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[u.jsxs("div",{className:"space-y-2 text-left",children:[u.jsx("label",{className:"text-xs font-bold text-white/50 uppercase tracking-wider ml-1",children:"Enter Partner's Code"}),u.jsx("input",{type:"text",value:v,onChange:J=>x(J.target.value.toUpperCase()),placeholder:"XXXXXX",maxLength:6,className:"w-full bg-black/20 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-mono tracking-widest text-white focus:outline-none focus:border-love-500 transition-colors uppercase"})]}),Z&&u.jsx("p",{className:"text-red-400 text-sm bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:Z}),u.jsxs("button",{onClick:B,disabled:C||v.length<6,className:"w-full py-4 bg-love-600 hover:bg-love-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[C?u.jsx(zn,{className:"w-5 h-5 animate-spin"}):u.jsx(kv,{className:"w-5 h-5"}),"Sync Hearts"]}),u.jsx("button",{onClick:()=>{m("initial"),P("")},className:"text-xs text-white/40 hover:text-white transition-colors",children:"Cancel"})]},"join")]})]})]})}const W0=({theme:f,quote:h,onGameToggle:d})=>{const{user:m,couple:v,partnerProfile:x,loading:b}=Ze(),[k,C]=j.useState(!1),[N,O]=j.useState([]),E=j.useCallback(async()=>{if(v?.id)try{const{data:P,error:V}=await et.from("game_history").select("*").eq("couple_id",v.id).order("played_at",{ascending:!1}).limit(5);if(V){console.warn("Game history fetch error (table may not exist):",V.message);return}P&&O(P)}catch(P){console.warn("Game history error:",P)}},[v?.id]);j.useEffect(()=>{E()},[E]),j.useEffect(()=>{d?.(k)},[k,d]);const Z=j.useCallback(()=>{xo({particleCount:150,spread:100,origin:{y:.6},colors:["#FFE400","#FFBD00","#E89400","#FFCA6C","#FDFFB8"],zIndex:9999})},[]);return j.useEffect(()=>{if(v?.streak_count&&[3,7,15,30].includes(v.streak_count)){const P=`celebrated_streak_${v.streak_count}_${new Date().toDateString()}`;localStorage.getItem(P)||(xo({particleCount:150,spread:100,origin:{y:.6},colors:["#FFE400","#FFBD00","#E89400","#FFCA6C","#FDFFB8"],zIndex:2e3}),localStorage.setItem(P,"true"))}},[v?.streak_count]),!b&&!v?u.jsx(F0,{}):k?u.jsxs("div",{className:"flex flex-col h-full pb-24",children:[u.jsx("button",{onClick:()=>C(!1),className:"mb-4 text-white/50 hover:text-white flex items-center gap-2 self-start px-2 py-1 rounded-lg hover:bg-white/5 transition-colors",children:" Back to Dashboard"}),u.jsx("div",{className:"flex-1 flex items-center justify-center",children:u.jsx(K0,{onGameEnd:E,onClose:()=>C(!1)})})]}):u.jsx(ya,{children:u.jsxs("div",{className:"space-y-6 pb-24",children:[u.jsxs("header",{className:"space-y-1 text-center relative z-10",children:[u.jsx(St.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},className:`text-4xl font-bold ${f.textColor} drop-shadow-sm transition-colors duration-500 tracking-tight`,children:"LoveSync"}),u.jsxs(St.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},className:"text-white/50 text-xs tracking-[0.2em] uppercase font-medium",children:["Connected with ",x?.username||"your person"]})]}),u.jsxs(St.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`liquid-glass transition-colors duration-500 overflow-hidden relative p-8 rounded-[2rem] border ${f.borderColor} ${f.glassColor} shadow-2xl`,children:[u.jsx(Uv,{className:`absolute top-6 left-6 w-8 h-8 ${f.textColor} opacity-20`}),u.jsxs("p",{className:"text-center text-xl font-light text-white/95 italic relative z-10 leading-relaxed font-serif",children:['"',h,'"']}),u.jsx("div",{className:"mt-6 flex justify-center items-center gap-2",children:u.jsxs("span",{className:`text-[10px] px-3 py-1 rounded-full bg-white/10 border border-white/10 ${f.textColor} uppercase tracking-widest font-bold`,children:[f.label," Vibe"]})})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs(St.div,{whileHover:{y:-5},className:"glass-panel p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[u.jsx(Hv,{className:"w-6 h-6 text-orange-500"}),u.jsx("span",{className:"text-2xl font-bold font-mono",children:v?.streak_count||0}),u.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-widest",children:"Streak"})]}),u.jsxs(St.div,{whileHover:{y:-5},className:"glass-panel p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[u.jsx(po,{className:"w-6 h-6 text-purple-400"}),u.jsx("span",{className:"text-2xl font-bold font-mono",children:v?.photos_shared||0}),u.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-widest",children:"Photos"})]}),u.jsxs(St.div,{whileHover:{y:-5},className:"glass-panel p-4 rounded-3xl flex flex-col items-center justify-center gap-2",children:[u.jsx(Zv,{className:"w-6 h-6 text-pink-400"}),u.jsx("span",{className:"text-2xl font-bold font-mono",children:v?.questions_answered||0}),u.jsx("span",{className:"text-[10px] text-white/40 uppercase tracking-widest",children:"Answers"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs(St.button,{whileHover:{scale:1.03},whileTap:{scale:.95},onClick:()=>C(!0),className:"py-6 bg-white/5 border border-white/10 rounded-3xl flex flex-col items-center justify-center gap-3 hover:bg-white/10 transition-colors group",children:[u.jsx(qv,{className:"w-8 h-8 text-love-400 group-hover:rotate-12 transition-transform duration-300"}),u.jsx("span",{className:"text-xs text-white/70 font-bold uppercase tracking-wide",children:"Play Game"})]}),u.jsxs(St.button,{whileHover:{scale:1.03},whileTap:{scale:.95},onClick:Z,className:"py-6 bg-white/5 border border-white/10 rounded-3xl flex flex-col items-center justify-center gap-3 hover:bg-white/10 transition-colors group",children:[u.jsx(zn,{className:"w-8 h-8 text-yellow-400 group-hover:rotate-12 transition-transform duration-300"}),u.jsx("span",{className:"text-xs text-white/70 font-bold uppercase tracking-wide",children:"Celebrate"})]})]}),u.jsx(J0,{gameHistory:N,user:m,partnerProfile:x}),u.jsx(v0,{}),u.jsx("div",{className:"glass-panel rounded-[2rem] p-8",children:u.jsx(y0,{})}),u.jsx("div",{className:"glass-panel rounded-[2rem] p-1 overflow-hidden",children:u.jsx(X0,{})})]})})};var $m;(function(f){f.STRING="string",f.NUMBER="number",f.INTEGER="integer",f.BOOLEAN="boolean",f.ARRAY="array",f.OBJECT="object"})($m||($m={}));var tp;(function(f){f.LANGUAGE_UNSPECIFIED="language_unspecified",f.PYTHON="python"})(tp||(tp={}));var ep;(function(f){f.OUTCOME_UNSPECIFIED="outcome_unspecified",f.OUTCOME_OK="outcome_ok",f.OUTCOME_FAILED="outcome_failed",f.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(ep||(ep={}));const ip=["user","model","function","system"];var np;(function(f){f.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",f.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",f.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",f.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",f.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",f.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(np||(np={}));var ap;(function(f){f.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",f.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",f.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",f.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",f.BLOCK_NONE="BLOCK_NONE"})(ap||(ap={}));var sp;(function(f){f.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",f.NEGLIGIBLE="NEGLIGIBLE",f.LOW="LOW",f.MEDIUM="MEDIUM",f.HIGH="HIGH"})(sp||(sp={}));var lp;(function(f){f.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",f.SAFETY="SAFETY",f.OTHER="OTHER"})(lp||(lp={}));var _o;(function(f){f.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",f.STOP="STOP",f.MAX_TOKENS="MAX_TOKENS",f.SAFETY="SAFETY",f.RECITATION="RECITATION",f.LANGUAGE="LANGUAGE",f.BLOCKLIST="BLOCKLIST",f.PROHIBITED_CONTENT="PROHIBITED_CONTENT",f.SPII="SPII",f.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",f.OTHER="OTHER"})(_o||(_o={}));var op;(function(f){f.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",f.RETRIEVAL_QUERY="RETRIEVAL_QUERY",f.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",f.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",f.CLASSIFICATION="CLASSIFICATION",f.CLUSTERING="CLUSTERING"})(op||(op={}));var rp;(function(f){f.MODE_UNSPECIFIED="MODE_UNSPECIFIED",f.AUTO="AUTO",f.ANY="ANY",f.NONE="NONE"})(rp||(rp={}));var up;(function(f){f.MODE_UNSPECIFIED="MODE_UNSPECIFIED",f.MODE_DYNAMIC="MODE_DYNAMIC"})(up||(up={}));class Ge extends Error{constructor(h){super(`[GoogleGenerativeAI Error]: ${h}`)}}class il extends Ge{constructor(h,d){super(h),this.response=d}}class ng extends Ge{constructor(h,d,m,v){super(h),this.status=d,this.statusText=m,this.errorDetails=v}}class ba extends Ge{}class ag extends Ge{}const $0="https://generativelanguage.googleapis.com",t_="v1beta",e_="0.24.1",i_="genai-js";var fs;(function(f){f.GENERATE_CONTENT="generateContent",f.STREAM_GENERATE_CONTENT="streamGenerateContent",f.COUNT_TOKENS="countTokens",f.EMBED_CONTENT="embedContent",f.BATCH_EMBED_CONTENTS="batchEmbedContents"})(fs||(fs={}));class n_{constructor(h,d,m,v,x){this.model=h,this.task=d,this.apiKey=m,this.stream=v,this.requestOptions=x}toString(){var h,d;const m=((h=this.requestOptions)===null||h===void 0?void 0:h.apiVersion)||t_;let x=`${((d=this.requestOptions)===null||d===void 0?void 0:d.baseUrl)||$0}/${m}/${this.model}:${this.task}`;return this.stream&&(x+="?alt=sse"),x}}function a_(f){const h=[];return f?.apiClient&&h.push(f.apiClient),h.push(`${i_}/${e_}`),h.join(" ")}async function s_(f){var h;const d=new Headers;d.append("Content-Type","application/json"),d.append("x-goog-api-client",a_(f.requestOptions)),d.append("x-goog-api-key",f.apiKey);let m=(h=f.requestOptions)===null||h===void 0?void 0:h.customHeaders;if(m){if(!(m instanceof Headers))try{m=new Headers(m)}catch(v){throw new ba(`unable to convert customHeaders value ${JSON.stringify(m)} to Headers: ${v.message}`)}for(const[v,x]of m.entries()){if(v==="x-goog-api-key")throw new ba(`Cannot set reserved header name ${v}`);if(v==="x-goog-api-client")throw new ba(`Header name ${v} can only be set using the apiClient field`);d.append(v,x)}}return d}async function l_(f,h,d,m,v,x){const b=new n_(f,h,d,m,x);return{url:b.toString(),fetchOptions:Object.assign(Object.assign({},c_(x)),{method:"POST",headers:await s_(b),body:v})}}async function To(f,h,d,m,v,x={},b=fetch){const{url:k,fetchOptions:C}=await l_(f,h,d,m,v,x);return o_(k,C,b)}async function o_(f,h,d=fetch){let m;try{m=await d(f,h)}catch(v){r_(v,f)}return m.ok||await u_(m,f),m}function r_(f,h){let d=f;throw d.name==="AbortError"?(d=new ag(`Request aborted when fetching ${h.toString()}: ${f.message}`),d.stack=f.stack):f instanceof ng||f instanceof ba||(d=new Ge(`Error fetching from ${h.toString()}: ${f.message}`),d.stack=f.stack),d}async function u_(f,h){let d="",m;try{const v=await f.json();d=v.error.message,v.error.details&&(d+=` ${JSON.stringify(v.error.details)}`,m=v.error.details)}catch{}throw new ng(`Error fetching from ${h.toString()}: [${f.status} ${f.statusText}] ${d}`,f.status,f.statusText,m)}function c_(f){const h={};if(f?.signal!==void 0||f?.timeout>=0){const d=new AbortController;f?.timeout>=0&&setTimeout(()=>d.abort(),f.timeout),f?.signal&&f.signal.addEventListener("abort",()=>{d.abort()}),h.signal=d.signal}return h}function If(f){return f.text=()=>{if(f.candidates&&f.candidates.length>0){if(f.candidates.length>1&&console.warn(`This response had ${f.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),cu(f.candidates[0]))throw new il(`${xa(f)}`,f);return f_(f)}else if(f.promptFeedback)throw new il(`Text not available. ${xa(f)}`,f);return""},f.functionCall=()=>{if(f.candidates&&f.candidates.length>0){if(f.candidates.length>1&&console.warn(`This response had ${f.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),cu(f.candidates[0]))throw new il(`${xa(f)}`,f);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),cp(f)[0]}else if(f.promptFeedback)throw new il(`Function call not available. ${xa(f)}`,f)},f.functionCalls=()=>{if(f.candidates&&f.candidates.length>0){if(f.candidates.length>1&&console.warn(`This response had ${f.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),cu(f.candidates[0]))throw new il(`${xa(f)}`,f);return cp(f)}else if(f.promptFeedback)throw new il(`Function call not available. ${xa(f)}`,f)},f}function f_(f){var h,d,m,v;const x=[];if(!((d=(h=f.candidates)===null||h===void 0?void 0:h[0].content)===null||d===void 0)&&d.parts)for(const b of(v=(m=f.candidates)===null||m===void 0?void 0:m[0].content)===null||v===void 0?void 0:v.parts)b.text&&x.push(b.text),b.executableCode&&x.push("\n```"+b.executableCode.language+`
`+b.executableCode.code+"\n```\n"),b.codeExecutionResult&&x.push("\n```\n"+b.codeExecutionResult.output+"\n```\n");return x.length>0?x.join(""):""}function cp(f){var h,d,m,v;const x=[];if(!((d=(h=f.candidates)===null||h===void 0?void 0:h[0].content)===null||d===void 0)&&d.parts)for(const b of(v=(m=f.candidates)===null||m===void 0?void 0:m[0].content)===null||v===void 0?void 0:v.parts)b.functionCall&&x.push(b.functionCall);if(x.length>0)return x}const d_=[_o.RECITATION,_o.SAFETY,_o.LANGUAGE];function cu(f){return!!f.finishReason&&d_.includes(f.finishReason)}function xa(f){var h,d,m;let v="";if((!f.candidates||f.candidates.length===0)&&f.promptFeedback)v+="Response was blocked",!((h=f.promptFeedback)===null||h===void 0)&&h.blockReason&&(v+=` due to ${f.promptFeedback.blockReason}`),!((d=f.promptFeedback)===null||d===void 0)&&d.blockReasonMessage&&(v+=`: ${f.promptFeedback.blockReasonMessage}`);else if(!((m=f.candidates)===null||m===void 0)&&m[0]){const x=f.candidates[0];cu(x)&&(v+=`Candidate was blocked due to ${x.finishReason}`,x.finishMessage&&(v+=`: ${x.finishMessage}`))}return v}function bo(f){return this instanceof bo?(this.v=f,this):new bo(f)}function h_(f,h,d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=d.apply(f,h||[]),v,x=[];return v={},b("next"),b("throw"),b("return"),v[Symbol.asyncIterator]=function(){return this},v;function b(Z){m[Z]&&(v[Z]=function(P){return new Promise(function(V,B){x.push([Z,P,V,B])>1||k(Z,P)})})}function k(Z,P){try{C(m[Z](P))}catch(V){E(x[0][3],V)}}function C(Z){Z.value instanceof bo?Promise.resolve(Z.value.v).then(N,O):E(x[0][2],Z)}function N(Z){k("next",Z)}function O(Z){k("throw",Z)}function E(Z,P){Z(P),x.shift(),x.length&&k(x[0][0],x[0][1])}}const fp=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function m_(f){const h=f.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),d=v_(h),[m,v]=d.tee();return{stream:g_(m),response:p_(v)}}async function p_(f){const h=[],d=f.getReader();for(;;){const{done:m,value:v}=await d.read();if(m)return If(__(h));h.push(v)}}function g_(f){return h_(this,arguments,function*(){const d=f.getReader();for(;;){const{value:m,done:v}=yield bo(d.read());if(v)break;yield yield bo(If(m))}})}function v_(f){const h=f.getReader();return new ReadableStream({start(m){let v="";return x();function x(){return h.read().then(({value:b,done:k})=>{if(k){if(v.trim()){m.error(new Ge("Failed to parse stream"));return}m.close();return}v+=b;let C=v.match(fp),N;for(;C;){try{N=JSON.parse(C[1])}catch{m.error(new Ge(`Error parsing JSON response: "${C[1]}"`));return}m.enqueue(N),v=v.substring(C[0].length),C=v.match(fp)}return x()}).catch(b=>{let k=b;throw k.stack=b.stack,k.name==="AbortError"?k=new ag("Request aborted when reading from the stream"):k=new Ge("Error reading from the stream"),k})}}})}function __(f){const h=f[f.length-1],d={promptFeedback:h?.promptFeedback};for(const m of f){if(m.candidates){let v=0;for(const x of m.candidates)if(d.candidates||(d.candidates=[]),d.candidates[v]||(d.candidates[v]={index:v}),d.candidates[v].citationMetadata=x.citationMetadata,d.candidates[v].groundingMetadata=x.groundingMetadata,d.candidates[v].finishReason=x.finishReason,d.candidates[v].finishMessage=x.finishMessage,d.candidates[v].safetyRatings=x.safetyRatings,x.content&&x.content.parts){d.candidates[v].content||(d.candidates[v].content={role:x.content.role||"user",parts:[]});const b={};for(const k of x.content.parts)k.text&&(b.text=k.text),k.functionCall&&(b.functionCall=k.functionCall),k.executableCode&&(b.executableCode=k.executableCode),k.codeExecutionResult&&(b.codeExecutionResult=k.codeExecutionResult),Object.keys(b).length===0&&(b.text=""),d.candidates[v].content.parts.push(b)}v++}m.usageMetadata&&(d.usageMetadata=m.usageMetadata)}return d}async function sg(f,h,d,m){const v=await To(h,fs.STREAM_GENERATE_CONTENT,f,!0,JSON.stringify(d),m);return m_(v)}async function lg(f,h,d,m){const x=await(await To(h,fs.GENERATE_CONTENT,f,!1,JSON.stringify(d),m)).json();return{response:If(x)}}function og(f){if(f!=null){if(typeof f=="string")return{role:"system",parts:[{text:f}]};if(f.text)return{role:"system",parts:[f]};if(f.parts)return f.role?f:{role:"system",parts:f.parts}}}function wo(f){let h=[];if(typeof f=="string")h=[{text:f}];else for(const d of f)typeof d=="string"?h.push({text:d}):h.push(d);return y_(h)}function y_(f){const h={role:"user",parts:[]},d={role:"function",parts:[]};let m=!1,v=!1;for(const x of f)"functionResponse"in x?(d.parts.push(x),v=!0):(h.parts.push(x),m=!0);if(m&&v)throw new Ge("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!m&&!v)throw new Ge("No content is provided for sending chat message.");return m?h:d}function x_(f,h){var d;let m={model:h?.model,generationConfig:h?.generationConfig,safetySettings:h?.safetySettings,tools:h?.tools,toolConfig:h?.toolConfig,systemInstruction:h?.systemInstruction,cachedContent:(d=h?.cachedContent)===null||d===void 0?void 0:d.name,contents:[]};const v=f.generateContentRequest!=null;if(f.contents){if(v)throw new ba("CountTokensRequest must have one of contents or generateContentRequest, not both.");m.contents=f.contents}else if(v)m=Object.assign(Object.assign({},m),f.generateContentRequest);else{const x=wo(f);m.contents=[x]}return{generateContentRequest:m}}function dp(f){let h;return f.contents?h=f:h={contents:[wo(f)]},f.systemInstruction&&(h.systemInstruction=og(f.systemInstruction)),h}function b_(f){return typeof f=="string"||Array.isArray(f)?{content:wo(f)}:f}const hp=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],w_={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function S_(f){let h=!1;for(const d of f){const{role:m,parts:v}=d;if(!h&&m!=="user")throw new Ge(`First content should be with role 'user', got ${m}`);if(!ip.includes(m))throw new Ge(`Each item should include role field. Got ${m} but valid roles are: ${JSON.stringify(ip)}`);if(!Array.isArray(v))throw new Ge("Content should have 'parts' property with an array of Parts");if(v.length===0)throw new Ge("Each Content should have at least one part");const x={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const k of v)for(const C of hp)C in k&&(x[C]+=1);const b=w_[m];for(const k of hp)if(!b.includes(k)&&x[k]>0)throw new Ge(`Content with role '${m}' can't contain '${k}' part`);h=!0}}function mp(f){var h;if(f.candidates===void 0||f.candidates.length===0)return!1;const d=(h=f.candidates[0])===null||h===void 0?void 0:h.content;if(d===void 0||d.parts===void 0||d.parts.length===0)return!1;for(const m of d.parts)if(m===void 0||Object.keys(m).length===0||m.text!==void 0&&m.text==="")return!1;return!0}const pp="SILENT_ERROR";class N_{constructor(h,d,m,v={}){this.model=d,this.params=m,this._requestOptions=v,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=h,m?.history&&(S_(m.history),this._history=m.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(h,d={}){var m,v,x,b,k,C;await this._sendPromise;const N=wo(h),O={safetySettings:(m=this.params)===null||m===void 0?void 0:m.safetySettings,generationConfig:(v=this.params)===null||v===void 0?void 0:v.generationConfig,tools:(x=this.params)===null||x===void 0?void 0:x.tools,toolConfig:(b=this.params)===null||b===void 0?void 0:b.toolConfig,systemInstruction:(k=this.params)===null||k===void 0?void 0:k.systemInstruction,cachedContent:(C=this.params)===null||C===void 0?void 0:C.cachedContent,contents:[...this._history,N]},E=Object.assign(Object.assign({},this._requestOptions),d);let Z;return this._sendPromise=this._sendPromise.then(()=>lg(this._apiKey,this.model,O,E)).then(P=>{var V;if(mp(P.response)){this._history.push(N);const B=Object.assign({parts:[],role:"model"},(V=P.response.candidates)===null||V===void 0?void 0:V[0].content);this._history.push(B)}else{const B=xa(P.response);B&&console.warn(`sendMessage() was unsuccessful. ${B}. Inspect response object for details.`)}Z=P}).catch(P=>{throw this._sendPromise=Promise.resolve(),P}),await this._sendPromise,Z}async sendMessageStream(h,d={}){var m,v,x,b,k,C;await this._sendPromise;const N=wo(h),O={safetySettings:(m=this.params)===null||m===void 0?void 0:m.safetySettings,generationConfig:(v=this.params)===null||v===void 0?void 0:v.generationConfig,tools:(x=this.params)===null||x===void 0?void 0:x.tools,toolConfig:(b=this.params)===null||b===void 0?void 0:b.toolConfig,systemInstruction:(k=this.params)===null||k===void 0?void 0:k.systemInstruction,cachedContent:(C=this.params)===null||C===void 0?void 0:C.cachedContent,contents:[...this._history,N]},E=Object.assign(Object.assign({},this._requestOptions),d),Z=sg(this._apiKey,this.model,O,E);return this._sendPromise=this._sendPromise.then(()=>Z).catch(P=>{throw new Error(pp)}).then(P=>P.response).then(P=>{if(mp(P)){this._history.push(N);const V=Object.assign({},P.candidates[0].content);V.role||(V.role="model"),this._history.push(V)}else{const V=xa(P);V&&console.warn(`sendMessageStream() was unsuccessful. ${V}. Inspect response object for details.`)}}).catch(P=>{P.message!==pp&&console.error(P)}),Z}}async function T_(f,h,d,m){return(await To(h,fs.COUNT_TOKENS,f,!1,JSON.stringify(d),m)).json()}async function E_(f,h,d,m){return(await To(h,fs.EMBED_CONTENT,f,!1,JSON.stringify(d),m)).json()}async function C_(f,h,d,m){const v=d.requests.map(b=>Object.assign(Object.assign({},b),{model:h}));return(await To(h,fs.BATCH_EMBED_CONTENTS,f,!1,JSON.stringify({requests:v}),m)).json()}class gp{constructor(h,d,m={}){this.apiKey=h,this._requestOptions=m,d.model.includes("/")?this.model=d.model:this.model=`models/${d.model}`,this.generationConfig=d.generationConfig||{},this.safetySettings=d.safetySettings||[],this.tools=d.tools,this.toolConfig=d.toolConfig,this.systemInstruction=og(d.systemInstruction),this.cachedContent=d.cachedContent}async generateContent(h,d={}){var m;const v=dp(h),x=Object.assign(Object.assign({},this._requestOptions),d);return lg(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(m=this.cachedContent)===null||m===void 0?void 0:m.name},v),x)}async generateContentStream(h,d={}){var m;const v=dp(h),x=Object.assign(Object.assign({},this._requestOptions),d);return sg(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(m=this.cachedContent)===null||m===void 0?void 0:m.name},v),x)}startChat(h){var d;return new N_(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(d=this.cachedContent)===null||d===void 0?void 0:d.name},h),this._requestOptions)}async countTokens(h,d={}){const m=x_(h,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),v=Object.assign(Object.assign({},this._requestOptions),d);return T_(this.apiKey,this.model,m,v)}async embedContent(h,d={}){const m=b_(h),v=Object.assign(Object.assign({},this._requestOptions),d);return E_(this.apiKey,this.model,m,v)}async batchEmbedContents(h,d={}){const m=Object.assign(Object.assign({},this._requestOptions),d);return C_(this.apiKey,this.model,h,m)}}class j_{constructor(h){this.apiKey=h}getGenerativeModel(h,d){if(!h.model)throw new Ge("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new gp(this.apiKey,h,d)}getGenerativeModelFromCachedContent(h,d,m){if(!h.name)throw new ba("Cached content must contain a `name` field.");if(!h.model)throw new ba("Cached content must contain a `model` field.");const v=["model","systemInstruction"];for(const b of v)if(d?.[b]&&h[b]&&d?.[b]!==h[b]){if(b==="model"){const k=d.model.startsWith("models/")?d.model.replace("models/",""):d.model,C=h.model.startsWith("models/")?h.model.replace("models/",""):h.model;if(k===C)continue}throw new ba(`Different value for "${b}" specified in modelParams (${d[b]}) and cachedContent (${h[b]})`)}const x=Object.assign(Object.assign({},d),{model:h.model,tools:h.tools,toolConfig:h.toolConfig,systemInstruction:h.systemInstruction,cachedContent:h});return new gp(this.apiKey,x,m)}}const A_="AIzaSyC45hQT35UR5DIqXuEcQ_xu7hiH5lyirfE",rg=new j_(A_),M_=async()=>{try{return(await(await rg.getGenerativeModel({model:"gemini-pro"}).generateContent("Generate a single, short, deep, and romantic question for a couple to ask each other. It should be suitable for a daily relationship prompt. Just return the question text, no quotes or extra text.")).response).text().trim()}catch(f){return console.error("Error generating question with Gemini:",f),null}},z_=async f=>{const h=`romantic couple photo, ${f}, cinematic lighting, highly detailed, photorealistic, 8k quality`,d=encodeURIComponent(h),m=Math.floor(Math.random()*1e6);return`https://image.pollinations.ai/prompt/${d}?seed=${m}&width=768&height=768&nologo=true&enhance=true`},O_=async(f,h,d)=>{try{const m=rg.getGenerativeModel({model:"gemini-pro"}),v=`
Role: You are a deeply in love partner, not an AI.
Tone: Rich, descriptive, passionate, and raw. Like a love letter turned into poetry.
Input Context:
- Weather: ${f||"The sky is vast"}
- Partner's Mood: ${h||"Mystery"}
- Shared Memory: ${d||"Us"}

Task: Write a longer free-verse poem (8-12 lines).
Guidelines:
- Describe the specific details of your partner and your bond.
- Use the weather and memory to paint a vivid picture.
- Do not rhyme cheesily. Focus on imagery and emotion.
- Break it into 2-3 stanzas.
- Make it feel like a deep, thoughtful dedication.
        `.trim();return(await(await m.generateContent(v)).response).text()}catch(m){return console.error("Error generating note:",m),null}};function L_(){const{couple:f,profile:h}=Ze(),[d,m]=j.useState(null),[v,x]=j.useState(!0),[b,k]=j.useState(null),C=async()=>new Promise(O=>{if(!navigator.geolocation){O("Unknown location");return}navigator.geolocation.getCurrentPosition(async E=>{try{const{latitude:Z,longitude:P}=E.coords,B=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${Z}&longitude=${P}&current=temperature_2m,weather_code`)).json();if(!B.current){O("Unknown weather");return}const W=Math.round(B.current.temperature_2m),J=B.current.weather_code;let $="Clear sky";J>=1&&J<=3&&($="Cloudy"),J>=45&&J<=48&&($="Foggy"),J>=51&&J<=67&&($="Rainy"),J>=71&&J<=77&&($="Snowy"),J>=80&&J<=82&&($="Showers"),J>=95&&($="Thunderstorm"),O(`${$}, ${W}C`)}catch(Z){console.error("Weather fetch failed",Z),O("Mystery weather")}},E=>{console.warn("Location denied",E),O("Secret location")})});j.useEffect(()=>{if(!f||!h)return;(async()=>{try{const E=new Date().toISOString().split("T")[0],{data:Z}=await et.from("daily_notes").select("*").eq("couple_id",f.id).eq("note_date",E).maybeSingle();if(Z){m(Z.content),x(!1);return}const P=await C(),V=f.partner_a===h.id?f.partner_b:f.partner_a;let B="Unknown";if(V){const{data:lt}=await et.from("profiles").select("mood").eq("id",V).single();lt&&(B=lt.mood)}let W="our journey together";const{data:J}=await et.from("memories").select("caption").eq("couple_id",f.id).not("caption","is",null).limit(10);if(J&&J.length>0){const lt=J[Math.floor(Math.random()*J.length)];lt.caption&&(W=lt.caption)}const $=await O_(P,B,W);$?(m($),await et.from("daily_notes").insert([{couple_id:f.id,note_date:E,content:$,weather_context:P,mood_context:B,memory_context:W}])):(m(`The stars align for you today,
But the digital muse is shy.

(AI Service unavailable, check API Key)`),k("AI Service Unavailable"))}catch(E){console.error("Poet error:",E),k(E.message)}finally{x(!1)}})()},[f,h]);const N=async()=>{if(confirm("Ask the Muse for a new poem? This will replace today's serenade.")){x(!0),m(null);try{const O=new Date().toISOString().split("T")[0];await et.from("daily_notes").delete().eq("couple_id",f.id).eq("note_date",O),window.location.reload()}catch(O){console.error("Regen failed",O),x(!1)}}};return v?u.jsx("div",{className:"liquid-glass p-6 rounded-2xl flex items-center justify-center h-48 animate-pulse border border-white/5",children:u.jsxs("div",{className:"flex flex-col items-center gap-2 text-white/30",children:[u.jsx(vo,{className:"w-8 h-8 animate-bounce"}),u.jsx("span",{className:"text-xs uppercase tracking-widest",children:"Composing..."})]})}):d?u.jsxs("div",{className:"mb-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[u.jsxs("h3",{className:"text-xs font-bold text-white/40 uppercase tracking-widest flex items-center gap-2",children:[u.jsx(vo,{className:"w-4 h-4"}),"Daily Serenade"]}),u.jsxs("div",{className:"flex gap-2",children:[b&&u.jsx("div",{title:b,className:"p-2 text-red-400 bg-red-500/10 rounded-full",children:u.jsx(Pv,{className:"w-3 h-3"})}),u.jsx("button",{onClick:N,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/30 hover:text-white/80",title:"Rewrite Poem",children:u.jsx(Yp,{className:"w-3 h-3"})})]})]}),u.jsxs(St.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"liquid-glass p-8 rounded-3xl relative overflow-hidden group border border-white/10 shadow-lg",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none transition-transform duration-700 group-hover:rotate-12 group-hover:scale-110",children:u.jsx(vo,{className:"w-40 h-40 text-white -mr-12 -mt-12"})}),u.jsxs("div",{className:"relative z-10 flex flex-col gap-6",children:[u.jsx("div",{className:"font-serif text-lg leading-loose text-white/90 italic whitespace-pre-line font-light drop-shadow-sm",children:d}),u.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-white/30 uppercase tracking-wider",children:[u.jsx(zn,{className:"w-3 h-3 text-yellow-500/50"}),u.jsx("span",{children:"AI Muse"})]}),u.jsx("span",{className:"text-[10px] text-white/30 font-mono",children:new Date().toLocaleDateString()})]})]})]})]}):null}const D_=()=>u.jsx(ya,{children:u.jsxs("div",{className:"p-6 h-full flex flex-col",children:[u.jsxs("header",{className:"mb-8 text-center",children:[u.jsxs("h2",{className:"text-3xl font-bold text-love-300 flex items-center justify-center gap-3",children:[u.jsx(vo,{className:"w-8 h-8"}),"Serenade"]}),u.jsx("p",{className:"text-white/50 text-xs tracking-widest uppercase mt-2",children:"AI-woven poetry for you"})]}),u.jsx(L_,{})]})}),yo={milestone:{id:"milestone",label:"Celebration",icon:zn,gradient:"bg-gradient-to-br from-yellow-600 via-amber-900 to-black",textColor:"text-yellow-200",borderColor:"border-yellow-400/50",glassColor:"bg-yellow-900/40 backdrop-blur-xl",palette:["#CA8A04","#EAB308","#A16207","#FFFF00"],quotes:["We are striking gold today!","Another milestone unlocked.","Our connection is precious.","Shining brighter together.","Celebrating our journey."]},happy:{id:"happy",label:"Happy",icon:Hf,gradient:"bg-gradient-to-br from-yellow-950 via-black to-yellow-900",textColor:"text-yellow-400",borderColor:"border-yellow-500/30",glassColor:"bg-yellow-500/10",palette:["#EAB308","#CA8A04","#FACC15","#FEF08A"],quotes:["You are my sunshine on a rainy day.","Happiness is better when shared with you.","Your smile is my favorite curve.","Every day with you is a new adventure.","You make my heart smile."]},sad:{id:"sad",label:"Sad",icon:Hp,gradient:"bg-gradient-to-br from-blue-950 via-black to-blue-900",textColor:"text-blue-400",borderColor:"border-blue-500/30",glassColor:"bg-blue-500/10",palette:["#3B82F6","#1D4ED8","#60A5FA","#93C5FD"],quotes:["Lean on me, I'm here for you.","This too shall pass, together.","I'm just a heartbeat away.","Your burden is my burden.","Let me hold you until the storm passes."]},romantic:{id:"romantic",label:"Romantic",icon:Gi,gradient:"bg-gradient-to-br from-pink-950 via-black to-pink-900",textColor:"text-pink-500",borderColor:"border-pink-500/30",glassColor:"bg-pink-500/10",palette:["#EC4899","#DB2777","#F472B6","#BE185D"],quotes:["In you, I've found the love of my life.","You are my heart, my life, my one and only thought.","Every love story is beautiful, but ours is my favorite.","I love you more than words can say.","You are the poem I never knew how to write."]},tired:{id:"tired",label:"Tired",icon:cs,gradient:"bg-gradient-to-br from-purple-950 via-black to-purple-900",textColor:"text-purple-400",borderColor:"border-purple-500/30",glassColor:"bg-purple-500/10",palette:["#A855F7","#7E22CE","#C084FC","#E9D5FF"],quotes:["Rest your head, I've got this.","Let's dream together.","Sleep is the best meditation, especially with you.","You deserve a break.","Peace is being with you."]},energetic:{id:"energetic",label:"Energetic",icon:sl,gradient:"bg-gradient-to-br from-orange-950 via-black to-orange-900",textColor:"text-orange-400",borderColor:"border-orange-500/30",glassColor:"bg-orange-500/10",palette:["#F97316","#EA580C","#FB923C","#FED7AA"],quotes:["Let's conquer the world together!","Your energy fuels my soul.","Together, we are unstoppable.","Let's make some memories today!","You are my power source."]},cozy:{id:"cozy",label:"Cozy",icon:Zp,gradient:"bg-gradient-to-br from-amber-950 via-black to-amber-900",textColor:"text-amber-400",borderColor:"border-amber-700/30",glassColor:"bg-amber-700/10",palette:["#D97706","#B45309","#F59E0B","#FDE68A"],quotes:["Home is wherever I'm with you.","Warm hugs and warm hearts.","You are my comfort zone.","Let's stay in and cuddle.","Nap dates are the best dates."]},gloomy:{id:"gloomy",label:"Gloomy",icon:qp,gradient:"bg-gradient-to-br from-gray-950 via-black to-gray-800",textColor:"text-gray-400",borderColor:"border-gray-500/30",glassColor:"bg-gray-500/10",palette:["#6B7280","#4B5563","#9CA3AF","#D1D5DB"],quotes:["Even the darkest night will end and the sun will rise.","I will be your umbrella.","Rainy days are for holding hands.","We can weather any storm.","I'm here."]},light:{id:"light",label:"Light",icon:sl,gradient:"bg-gradient-to-br from-gray-50 via-white to-gray-100",textColor:"text-gray-800",borderColor:"border-gray-200",glassColor:"bg-white/60 backdrop-blur-xl",palette:["#374151","#111827","#6B7280","#F3F4F6"],quotes:["Simplicity is the ultimate sophistication."]},dark:{id:"dark",label:"Dark",icon:cs,gradient:"bg-gradient-to-br from-gray-950 via-black to-gray-900",textColor:"text-white",borderColor:"border-white/10",glassColor:"bg-white/5 backdrop-blur-xl",palette:["#F3F4F6","#E5E7EB","#9CA3AF","#374151"],quotes:["In the dark, we find the stars."]}},R_=yo.romantic,B_=f=>yo[f]||R_;function k_({theme:f,setThemeOverride:h,recentNotifications:d=[],onNotificationClick:m}){const{user:v,profile:x,partnerProfile:b,couple:k,signOut:C,updateProfile:N,updatePassword:O,toggleNotifications:E,notificationsEnabled:Z,showNotification:P}=Ze(),[V,B]=j.useState(!1),[W,J]=j.useState(x?.username||""),[$,lt]=j.useState(!1),[ot,Et]=j.useState({new:"",confirm:""}),[ht,Nt]=j.useState(!1),yt=j.useRef(null),[mt,it]=j.useState("auto"),nt=rt=>{it(rt),h(rt==="auto"?null:rt)},F=async()=>{if(W.trim())try{await N({username:W}),B(!1),P("Success","Name updated successfully","system")}catch{P("Error","Error updating name","system")}},at=async()=>{if(ot.new!==ot.confirm){P("Error","Passwords don't match","system");return}if(ot.new.length<6){P("Error","Password must be at least 6 characters","system");return}try{await O(ot.new),lt(!1),Et({new:"",confirm:""}),Et({new:"",confirm:""}),P("Success","Password updated successfully","system")}catch(rt){P("Error","Error updating password: "+rt.message,"system")}},pt=async rt=>{try{Nt(!0);const z=rt.target.files[0];if(!z)return;const tt=z.name.split(".").pop(),At=`${`${v.id}-${Math.random()}.${tt}`}`;let{error:st}=await et.storage.from("avatars").upload(At,z);if(st)throw st;const{data:{publicUrl:zt}}=et.storage.from("avatars").getPublicUrl(At);await N({avatar_url:zt})}catch(z){P("Error","Error uploading avatar: "+z.message,"system")}finally{Nt(!1)}};return u.jsxs("div",{className:"flex flex-col h-full p-6 space-y-6 overflow-y-auto pb-24",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 pt-4 relative",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:`p-1 rounded-full ${f.glassColor} border-2 ${f.borderColor} overflow-hidden w-24 h-24 flex items-center justify-center`,children:x?.avatar_url?u.jsx("img",{src:x.avatar_url,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):u.jsx(Rf,{className:`w-12 h-12 ${f.textColor}`})}),u.jsx("button",{onClick:()=>yt.current?.click(),disabled:ht,className:"absolute bottom-0 right-0 p-2 bg-love-500 rounded-full text-white shadow-lg hover:bg-love-600 transition-colors",children:ht?u.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white animate-spin rounded-full"}):u.jsx(So,{className:"w-4 h-4"})}),u.jsx("input",{type:"file",ref:yt,className:"hidden",accept:"image/*",onChange:pt})]}),u.jsxs("div",{className:"text-center space-y-1 w-full flex flex-col items-center",children:[V?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:W,onChange:rt=>J(rt.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-3 py-1 text-sm text-white focus:outline-none focus:border-love-500 w-32"}),u.jsx("button",{onClick:F,className:"p-1 bg-green-500/20 text-green-400 rounded-full hover:bg-green-500/30",children:u.jsx(Zf,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>B(!1),className:"p-1 bg-red-500/20 text-red-400 rounded-full hover:bg-red-500/30",children:u.jsx(_i,{className:"w-4 h-4"})})]}):u.jsxs("div",{className:"flex items-center gap-2 group",children:[u.jsx("h2",{className:"text-xl font-bold text-white",children:x?.username||"User"}),u.jsx("button",{onClick:()=>{J(x?.username||""),B(!0)},className:"opacity-0 group-hover:opacity-100 transition-opacity text-white/50 hover:text-white",children:u.jsx(qm,{className:"w-3 h-3"})})]}),u.jsx("p",{className:"font-mono text-xs text-white/40",children:v.email})]})]}),b&&u.jsxs("div",{className:`glass-panel p-4 rounded-2xl border ${f.borderColor} relative overflow-hidden`,children:[u.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-love-500/50 to-transparent"}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 overflow-hidden flex-shrink-0 border border-white/10",children:b.avatar_url?u.jsx("img",{src:b.avatar_url,alt:"Partner",className:"w-full h-full object-cover"}):u.jsx(Rf,{className:"w-6 h-6 text-white/50 m-auto mt-3"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-xs text-white/50 uppercase tracking-widest mb-1",children:"Connected With"}),u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[b.username,u.jsx(Gi,{className:"w-4 h-4 text-love-500 fill-love-500 animate-pulse"})]}),k?.created_at&&u.jsxs("p",{className:"text-[10px] text-white/30 mt-1",children:["Since ",new Date(k.created_at).toLocaleDateString()]})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("button",{onClick:E,className:`glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2 transition-colors group ${Z?"bg-blue-500/10 border-blue-500/30":"hover:bg-white/5"}`,children:[u.jsx(Bf,{className:`w-6 h-6 transition-transform group-hover:scale-110 ${Z?"text-blue-400 fill-blue-400/20":"text-blue-400"}`}),u.jsx("span",{className:`text-xs font-medium ${Z?"text-white":"text-white/80"}`,children:Z?"On":"Notifications"})]}),u.jsxs("button",{onClick:()=>P("Secure","Secure Connection Active: Your data is encrypted end-to-end via Supabase RLS.","system"),className:"glass-panel p-4 rounded-xl flex flex-col items-center justify-center gap-2 hover:bg-white/5 transition-colors group",children:[u.jsx(Df,{className:"w-6 h-6 text-green-400 group-hover:scale-110 transition-transform"}),u.jsx("span",{className:"text-xs font-medium text-white/80",children:"Secure"})]})]}),u.jsxs("div",{className:"glass-panel p-4 rounded-xl",children:[u.jsx("h3",{className:"text-xs uppercase font-bold text-white/40 mb-3 tracking-widest",children:"Recent Alerts"}),u.jsx("div",{className:"space-y-2",children:d.length===0?u.jsx("div",{className:"text-center text-xs text-white/30 py-4 italic border border-white/5 rounded-lg bg-black/20",children:"No recent notifications."}):d.map(rt=>u.jsxs("div",{onClick:()=>m&&m(rt),className:"p-3 rounded-xl border border-white/5 flex items-start gap-3 transition-colors hover:bg-white/5 cursor-pointer",children:[u.jsxs("div",{className:`p-2 rounded-full mt-0.5 ${rt.type==="heartbeat"?"bg-pink-500/10 text-pink-400":rt.type==="radio"?"bg-indigo-500/10 text-indigo-400":"bg-blue-500/10 text-blue-400"}`,children:[rt.type==="heartbeat"&&u.jsx(Gi,{className:"w-3 h-3 fill-current"}),rt.type==="radio"&&u.jsx(Bf,{className:"w-3 h-3"}),rt.type==="system"&&u.jsx(Df,{className:"w-3 h-3"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"text-sm font-medium text-white/90 truncate pr-2",children:rt.title}),u.jsx("span",{className:"text-[10px] text-white/30 whitespace-nowrap",children:new Date(rt.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-xs text-white/50 mt-1 line-clamp-2",children:rt.message})]})]},rt.id))})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs uppercase font-bold text-white/40 tracking-widest ml-1",children:"Appearance"}),u.jsxs("div",{className:"glass-panel p-1 rounded-xl flex",children:[u.jsxs("button",{onClick:()=>nt("auto"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-xs font-medium transition-all ${mt==="auto"?"bg-white/10 text-white shadow-lg":"text-white/40 hover:text-white/60"}`,children:[u.jsx(Gv,{className:"w-3 h-3"})," Auto (Mood)"]}),u.jsxs("button",{onClick:()=>nt("light"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-xs font-medium transition-all ${mt==="light"?"bg-white text-gray-900 shadow-lg":"text-white/40 hover:text-white/60"}`,children:[u.jsx(sl,{className:"w-3 h-3"})," Light"]}),u.jsxs("button",{onClick:()=>nt("dark"),className:`flex-1 py-2 rounded-lg flex items-center justify-center gap-2 text-xs font-medium transition-all ${mt==="dark"?"bg-gray-900 text-white shadow-lg":"text-white/40 hover:text-white/60"}`,children:[u.jsx(cs,{className:"w-3 h-3"})," Dark"]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-xs uppercase font-bold text-white/40 tracking-widest ml-1",children:"Account"}),u.jsxs("div",{className:"glass-panel overflow-hidden rounded-xl transition-all",children:[u.jsxs("button",{onClick:()=>lt(!$),className:"w-full p-4 flex items-center justify-between hover:bg-white/5 transition-colors text-left",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg text-orange-400",children:u.jsx(ll,{className:"w-4 h-4"})}),u.jsx("span",{className:"text-sm font-medium text-white/90",children:"Change Password"})]}),$?u.jsx(_i,{className:"w-4 h-4 text-white/40"}):u.jsx(qm,{className:"w-3 h-3 text-white/20"})]}),$&&u.jsxs("div",{className:"p-4 pt-0 space-y-3 border-t border-white/5 mt-2",children:[u.jsx("input",{type:"password",placeholder:"New Password",value:ot.new,onChange:rt=>Et({...ot,new:rt.target.value}),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-love-500"}),u.jsx("input",{type:"password",placeholder:"Confirm Password",value:ot.confirm,onChange:rt=>Et({...ot,confirm:rt.target.value}),className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-love-500"}),u.jsx("button",{onClick:at,className:"w-full py-2 bg-love-600 hover:bg-love-500 text-white text-xs font-bold rounded-lg transition-colors",children:"Update Password"})]})]}),u.jsxs("button",{onClick:C,className:"w-full p-4 glass-panel rounded-xl flex items-center gap-3 text-red-400 hover:bg-red-500/10 transition-colors group",children:[u.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg group-hover:bg-red-500/20 transition-colors",children:u.jsx(Yv,{className:"w-4 h-4"})}),u.jsx("span",{className:"text-sm font-medium",children:"Sign Out"})]})]})]})}const vp=["What is your favorite memory of us?","What is one thing you appreciate about me?","What is your dream vacation with me?","If we could trade lives for a day, what would you do?","What song reminds you of me?","What is one goal you want to achieve together?","What small gesture makes you feel loved?","What was your first impression of me?"],U_=({text:f})=>{const h=Array.from(f);return u.jsxs(St.p,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.03}}},className:"inline text-xl leading-relaxed text-white/90 relative",children:[h.map((d,m)=>u.jsx(St.span,{variants:{hidden:{opacity:0,y:5},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:200}}},children:d},m)),u.jsx(St.span,{animate:{opacity:[0,1,0]},transition:{duration:.8,repeat:1/0,ease:"steps(2)"},className:"inline-block w-0.5 h-[1em] bg-love-300 ml-1 align-middle"})]})},H_=()=>u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 p-8 text-center space-y-8",children:[u.jsx("div",{className:"flex items-center gap-3",children:[0,1,2].map(f=>u.jsx(St.div,{animate:{y:[0,-10,0],scale:[1,1.1,1],opacity:[.3,1,.3]},transition:{duration:2,repeat:1/0,delay:f*.3,ease:"easeInOut"},children:u.jsx(Pf,{className:"w-8 h-8 text-love-400 fill-love-400/20"})},f))}),u.jsx(St.p,{animate:{opacity:[.4,.8,.4]},transition:{duration:2,repeat:1/0},className:"text-love-200/60 font-serif italic text-sm tracking-widest",children:"The Muse is composing..."})]});function Z_(){const{profile:f,couple:h,showNotification:d}=Ze(),[m,v]=j.useState(null),[x,b]=j.useState(""),[k,C]=j.useState(!0),[N,O]=j.useState(!1),[E,Z]=j.useState(null),[P,V]=j.useState(!1),B=j.useRef(N);j.useEffect(()=>{B.current=N},[N]);const[W,J]=j.useState(null),[$,lt]=j.useState(!1),[ot,Et]=j.useState(!1),[ht,Nt]=j.useState(null),yt=h?.id,mt=f?.id,it=h?.partner_a===mt;h?.partner_b;const nt=it?"answer_a":"answer_b",F=it?"answer_b":"answer_a",at=it?"photo_a":"photo_b",pt=j.useRef(null),rt=yi.useCallback(async(dt=!1)=>{if(!(!yt||B.current))try{const vt=new Date,Gt=vt.getUTCFullYear(),pe=String(vt.getUTCMonth()+1).padStart(2,"0"),ye=String(vt.getUTCDate()).padStart(2,"0"),ce=`${Gt}-${pe}-${ye}`;let{data:ge,error:Ke}=await et.from("daily_prompts").select("*").eq("couple_id",yt).gte("created_at",`${ce}T00:00:00+00:00`).lt("created_at",`${ce}T23:59:59+00:00`).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(!ge&&!dt){const{data:re}=await et.from("daily_prompts").select("*").eq("couple_id",yt).gte("created_at",`${ce}T00:00:00+00:00`).limit(1).maybeSingle();if(re)ge=re;else{let Ee=null;try{Ee=await M_()}catch{}Ee||(Ee=vp[Math.floor(Math.random()*vp.length)]);const{data:On,error:xi}=await et.from("daily_prompts").insert([{couple_id:yt,question_text:Ee,created_at:new Date().toISOString()}]).select().single();if(xi)throw xi;ge=On}}if(ge){if(v(re=>JSON.stringify(re)===JSON.stringify(ge)?re:ge),!dt&&ge[nt])b(ge[nt]);else if(!dt){const re=localStorage.getItem(`daily_answer_draft_${yt}_${ce}`);re&&b(re)}}}catch(vt){console.error("Fetch error",vt)}finally{dt||C(!1)}},[yt,nt]);j.useEffect(()=>{if(!yt)return;rt(!1);const dt=setInterval(()=>{rt(!0)},3e3);return()=>clearInterval(dt)},[yt,rt]),j.useEffect(()=>{if(!yt)return;const dt=et.channel(`prompts:${yt}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"daily_prompts",filter:`couple_id=eq.${yt}`},vt=>{v(vt.new)}).on("broadcast",{event:"nudge"},vt=>{vt.sender_id!==mt&&(d("Partner Nudge"," Partner is nudging you to answer!","heartbeat"),navigator.vibrate&&navigator.vibrate([200,100,200]))}).subscribe();return()=>et.removeChannel(dt)},[yt,mt]),j.useEffect(()=>{const dt=setInterval(()=>{const vt=new Date;if(vt.getHours()===23){const pe=new Date(vt);pe.setHours(24,0,0,0);const ye=pe-vt,ce=Math.floor(ye%(1e3*60*60)/(1e3*60)),ge=Math.floor(ye%(1e3*60)/1e3);Z(`${ce}m ${ge}s`)}else Z(null)},1e3);return()=>clearInterval(dt)},[]);const z=dt=>{if(dt.target.files&&dt.target.files[0]){const vt=dt.target.files[0];Et(!0);const Gt=new FileReader;Gt.onload=pe=>{const ye=new Image;ye.onload=()=>{try{const ce=document.createElement("canvas"),ge=800,Ke=800;let re=ye.width,Ee=ye.height;re>Ee?re>ge&&(Ee*=ge/re,re=ge):Ee>Ke&&(re*=Ke/Ee,Ee=Ke),ce.width=re,ce.height=Ee,ce.getContext("2d").drawImage(ye,0,0,re,Ee);const xi=ce.toDataURL("image/jpeg",.7);J(xi)}catch{d("Error","Failed to process image. Try a different one.","system")}finally{Et(!1)}},ye.onerror=()=>{Et(!1),d("Error","Invalid image file.","system")},ye.src=pe.target.result},Gt.onerror=()=>{Et(!1),d("Error","Failed to read file.","system")},Gt.readAsDataURL(vt)}},tt=async()=>{if(W){lt(!0);try{v(Gt=>({...Gt,[at]:W}));const{error:dt}=await et.from("daily_prompts").update({[at]:W}).eq("id",m.id);if(dt)throw v(Gt=>({...Gt,[at]:null})),dt;const{data:vt}=await et.from("daily_prompts").select("*").eq("id",m.id).single();vt&&v(vt)}catch(dt){console.error("Error uploading photo:",dt),d("Upload Failed",dt.message,"system")}finally{lt(!1)}}},K=async()=>{if(x.trim()){O(!0);try{v(pe=>({...pe,[nt]:x}));const{error:dt}=await et.from("daily_prompts").update({[nt]:x}).eq("id",m.id);if(dt)throw v(pe=>({...pe,[nt]:""})),dt;m[F]&&At();const{data:Gt}=await et.from("daily_prompts").select("*").eq("id",m.id).single();Gt&&v(Gt)}catch(dt){console.error("Error submitting answer:",dt),d("Error","Failed to save answer.","system")}finally{O(!1)}}},At=()=>{xo({particleCount:100,spread:70,origin:{y:.6},colors:["#ef4444","#ec4899","#a855f7"]})},st=async()=>{V(!0),await et.channel(`prompts:${h.id}`).send({type:"broadcast",event:"nudge",payload:{sender_id:f.id}}),setTimeout(()=>V(!1),5e3)},zt=dt=>{const vt=document.createElement("a");vt.href=dt,vt.download=`lovesync-memory-${new Date().toISOString().split("T")[0]}.jpg`,document.body.appendChild(vt),vt.click(),document.body.removeChild(vt)};if(k)return u.jsx(H_,{});const ft=m?.[nt],ut=m?.[F],gt=m?.[at],Ct=m?.[it?"photo_b":"photo_a"],Y=ft&&ut;return gt?u.jsxs("div",{className:"flex flex-col h-full relative",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold",children:"Daily Question"}),u.jsx("p",{className:"text-xs text-white/50",children:new Date().toLocaleDateString()})]}),E&&u.jsxs("div",{className:"bg-red-500/20 border border-red-500/50 px-3 py-1 rounded-lg flex items-center gap-2 animate-pulse",children:[u.jsx(qf,{className:"w-3 h-3 text-red-400"}),u.jsxs("span",{className:"text-xs font-mono text-red-200",children:[E," left"]})]})]}),u.jsxs("div",{className:"liquid-glass p-6 rounded-2xl mb-6 relative overflow-hidden flex flex-col items-center justify-center text-center",children:[u.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:u.jsx(Pf,{className:"w-24 h-24 text-love-500"})}),u.jsx("div",{className:"relative z-10 w-full min-h-[60px]",children:m?.question_text&&u.jsx(U_,{text:m.question_text})})]}),u.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto scrollbar-hide pb-20",children:[ft?u.jsxs("div",{className:"liquid-glass p-4 rounded-xl border border-love-500/30 bg-love-500/5 space-y-3",children:[u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("p",{className:"text-xs text-love-300 uppercase tracking-wide font-bold",children:"You"})}),gt&&u.jsxs("div",{onClick:()=>Nt(gt),className:"w-full h-48 rounded-lg overflow-hidden cursor-pointer relative group",children:[u.jsx("img",{src:gt,className:"w-full h-full object-cover",alt:"My snippet"}),u.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx(po,{className:"text-white w-8 h-8"})})]}),u.jsxs("p",{className:"text-sm text-white/90 italic",children:['"',ft,'"']})]}):u.jsxs("div",{className:"space-y-3",children:[gt&&u.jsxs("div",{onClick:()=>Nt(gt),className:"w-full h-32 rounded-xl overflow-hidden relative group cursor-pointer border border-white/10",children:[u.jsx("img",{src:gt,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",alt:"Me"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/40 transition-opacity",children:u.jsx(po,{className:"w-6 h-6 text-white"})}),u.jsx("div",{className:"absolute bottom-2 left-2 text-[10px] bg-black/50 px-2 py-1 rounded text-white",children:"Your Snapshot"})]}),u.jsx("textarea",{value:x,onChange:dt=>{b(dt.target.value);const vt=new Date,Gt=`${vt.getUTCFullYear()}-${String(vt.getUTCMonth()+1).padStart(2,"0")}-${String(vt.getUTCDate()).padStart(2,"0")}`;localStorage.setItem(`daily_answer_draft_${yt}_${Gt}`,dt.target.value)},placeholder:"Type your answer based on truth...",className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 min-h-[120px] focus:outline-none focus:border-love-500/50 transition-colors placeholder:text-white/20"}),u.jsxs("button",{onClick:K,disabled:N||!x.trim(),className:"w-full py-3 bg-love-600 hover:bg-love-500 rounded-xl font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50",children:[N?"Saving...":"Lock Answer",u.jsx(ll,{className:"w-4 h-4"})]})]}),u.jsxs("div",{className:"liquid-glass p-4 rounded-xl border border-white/5 space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wide font-bold",children:"Partner"}),!ut&&u.jsxs("button",{onClick:st,disabled:P,className:"text-[10px] bg-white/10 hover:bg-white/20 px-2 py-1 rounded-lg flex items-center gap-1 transition-colors disabled:opacity-50",children:[u.jsx(Bf,{className:"w-3 h-3"}),P?"Nudged!":"Nudge"]})]}),Y?u.jsxs(St.div,{initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},className:"space-y-3",children:[Ct&&u.jsxs("div",{onClick:()=>Nt(Ct),className:"w-full h-48 rounded-lg overflow-hidden cursor-pointer relative group border border-white/10",children:[u.jsx("img",{src:Ct,className:"w-full h-full object-cover",alt:"Partner snippet"}),u.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx(po,{className:"text-white w-8 h-8"})})]}),u.jsxs("p",{className:"text-sm text-white/90 italic",children:['"',ut,'"']})]}):u.jsx("div",{className:"flex flex-col items-center justify-center py-6 gap-2 opacity-50",children:ut?u.jsxs(u.Fragment,{children:[u.jsx(ll,{className:"w-6 h-6 text-love-400"}),u.jsx("p",{className:"text-xs",children:"Answer hidden until you reply"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-dashed border-white/30 animate-spin-slow"}),u.jsx("p",{className:"text-xs",children:"Waiting for partner..."})]})})]})]}),u.jsx(ri,{children:ht&&u.jsxs(St.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/90 flex flex-col items-center justify-center p-4 backdrop-blur-md",onClick:()=>Nt(null),children:[u.jsx("button",{className:"absolute top-4 right-4 p-2 bg-white/10 rounded-full hover:bg-white/20",onClick:()=>Nt(null),children:u.jsx(_i,{className:"w-6 h-6 text-white"})}),u.jsx("img",{src:ht,className:"max-w-full max-h-[80vh] rounded-2xl shadow-2xl mb-6",alt:"Full viewing",onClick:dt=>dt.stopPropagation()}),u.jsxs("button",{onClick:dt=>{dt.stopPropagation(),zt(ht)},className:"py-3 px-8 bg-white text-black rounded-full font-bold flex items-center gap-2 hover:bg-gray-200 transition-colors",children:[u.jsx(Vp,{className:"w-5 h-5"}),"Save to Gallery"]})]})})]}):u.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center space-y-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 bg-love-500/20 blur-xl rounded-full"}),u.jsx(So,{className:"w-16 h-16 text-love-400 relative z-10"})]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Daily Snapshot"}),u.jsx("p",{className:"text-white/60 text-sm",children:"Upload a photo of your moment to unlock today's question."})]}),W?u.jsxs("div",{className:"w-full max-w-xs space-y-4",children:[u.jsx("img",{src:W,alt:"Preview",className:"w-full h-64 object-cover rounded-2xl border-2 border-love-500/30 shadow-2xl"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>J(null),className:"flex-1 py-3 bg-white/10 rounded-xl font-medium",children:"Retake"}),u.jsxs("button",{onClick:tt,disabled:$,className:"flex-1 py-3 bg-love-600 rounded-xl font-bold flex justify-center items-center gap-2",children:[$?"Uploading...":"Use Photo",u.jsx(Vv,{className:"w-4 h-4"})]})]})]}):u.jsxs("button",{onClick:()=>pt.current.click(),disabled:ot,className:"w-full max-w-xs py-4 border-2 border-dashed border-love-500/30 rounded-2xl flex flex-col items-center gap-2 hover:bg-love-500/5 transition-colors disabled:opacity-50",children:[ot?u.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-love-500 border-t-transparent animate-spin"}):u.jsx(po,{className:"w-8 h-8 text-love-500/50"}),u.jsx("span",{className:"text-sm font-medium text-love-200",children:ot?"Processing...":"Tap to select photo"}),u.jsx("input",{ref:pt,type:"file",accept:"image/*",className:"hidden",onChange:z})]})]})}var Ef={exports:{}},Cf,_p;function q_(){if(_p)return Cf;_p=1;var f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Cf=f,Cf}var jf,yp;function P_(){if(yp)return jf;yp=1;var f=q_();function h(){}function d(){}return d.resetWarningCache=h,jf=function(){function m(b,k,C,N,O,E){if(E!==f){var Z=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Z.name="Invariant Violation",Z}}m.isRequired=m;function v(){return m}var x={array:m,bigint:m,bool:m,func:m,number:m,object:m,string:m,symbol:m,any:m,arrayOf:v,element:m,elementType:m,instanceOf:v,node:m,objectOf:v,oneOf:v,oneOfType:v,shape:v,exact:v,checkPropTypes:d,resetWarningCache:h};return x.PropTypes=x,x},jf}var xp;function G_(){return xp||(xp=1,Ef.exports=P_()()),Ef.exports}var Y_=G_();const He=hu(Y_);var Af,bp;function V_(){return bp||(bp=1,Af=function f(h,d){if(h===d)return!0;if(h&&d&&typeof h=="object"&&typeof d=="object"){if(h.constructor!==d.constructor)return!1;var m,v,x;if(Array.isArray(h)){if(m=h.length,m!=d.length)return!1;for(v=m;v--!==0;)if(!f(h[v],d[v]))return!1;return!0}if(h.constructor===RegExp)return h.source===d.source&&h.flags===d.flags;if(h.valueOf!==Object.prototype.valueOf)return h.valueOf()===d.valueOf();if(h.toString!==Object.prototype.toString)return h.toString()===d.toString();if(x=Object.keys(h),m=x.length,m!==Object.keys(d).length)return!1;for(v=m;v--!==0;)if(!Object.prototype.hasOwnProperty.call(d,x[v]))return!1;for(v=m;v--!==0;){var b=x[v];if(!f(h[b],d[b]))return!1}return!0}return h!==h&&d!==d}),Af}var I_=V_();const X_=hu(I_);var eu={exports:{}},Mf,wp;function Q_(){if(wp)return Mf;wp=1;var f;return f=function(){var h={},d={};return h.on=function(m,v){var x={name:m,handler:v};return d[m]=d[m]||[],d[m].unshift(x),x},h.off=function(m){var v=d[m.name].indexOf(m);v!==-1&&d[m.name].splice(v,1)},h.trigger=function(m,v){var x=d[m],b;if(x)for(b=x.length;b--;)x[b].handler(v)},h},Mf=f,Mf}var iu={exports:{}},zf,Sp;function K_(){if(Sp)return zf;Sp=1,zf=function(v,x,b){var k=document.head||document.getElementsByTagName("head")[0],C=document.createElement("script");typeof x=="function"&&(b=x,x={}),x=x||{},b=b||function(){},C.type=x.type||"text/javascript",C.charset=x.charset||"utf8",C.async="async"in x?!!x.async:!0,C.src=v,x.attrs&&f(C,x.attrs),x.text&&(C.text=""+x.text);var N="onload"in C?h:d;N(C,b),C.onload||h(C,b),k.appendChild(C)};function f(m,v){for(var x in v)m.setAttribute(x,v[x])}function h(m,v){m.onload=function(){this.onerror=this.onload=null,v(null,m)},m.onerror=function(){this.onerror=this.onload=null,v(new Error("Failed to load "+this.src),m)}}function d(m,v){m.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,v(null,m))}}return zf}var Np;function J_(){return Np||(Np=1,(function(f,h){Object.defineProperty(h,"__esModule",{value:!0});var d=K_(),m=v(d);function v(x){return x&&x.__esModule?x:{default:x}}h.default=function(x){var b=new Promise(function(k){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){k(window.YT);return}else{var C=window.location.protocol==="http:"?"http:":"https:";(0,m.default)(C+"//www.youtube.com/iframe_api",function(O){O&&x.trigger("error",O)})}var N=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){N&&N(),k(window.YT)}});return b},f.exports=h.default})(iu,iu.exports)),iu.exports}var nu={exports:{}},au={exports:{}},su={exports:{}},Of,Tp;function F_(){if(Tp)return Of;Tp=1;var f=1e3,h=f*60,d=h*60,m=d*24,v=m*365.25;Of=function(N,O){O=O||{};var E=typeof N;if(E==="string"&&N.length>0)return x(N);if(E==="number"&&isNaN(N)===!1)return O.long?k(N):b(N);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(N))};function x(N){if(N=String(N),!(N.length>100)){var O=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(N);if(O){var E=parseFloat(O[1]),Z=(O[2]||"ms").toLowerCase();switch(Z){case"years":case"year":case"yrs":case"yr":case"y":return E*v;case"days":case"day":case"d":return E*m;case"hours":case"hour":case"hrs":case"hr":case"h":return E*d;case"minutes":case"minute":case"mins":case"min":case"m":return E*h;case"seconds":case"second":case"secs":case"sec":case"s":return E*f;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}}function b(N){return N>=m?Math.round(N/m)+"d":N>=d?Math.round(N/d)+"h":N>=h?Math.round(N/h)+"m":N>=f?Math.round(N/f)+"s":N+"ms"}function k(N){return C(N,m,"day")||C(N,d,"hour")||C(N,h,"minute")||C(N,f,"second")||N+" ms"}function C(N,O,E){if(!(N<O))return N<O*1.5?Math.floor(N/O)+" "+E:Math.ceil(N/O)+" "+E+"s"}return Of}var Ep;function W_(){return Ep||(Ep=1,(function(f,h){h=f.exports=v.debug=v.default=v,h.coerce=C,h.disable=b,h.enable=x,h.enabled=k,h.humanize=F_(),h.names=[],h.skips=[],h.formatters={};var d;function m(N){var O=0,E;for(E in N)O=(O<<5)-O+N.charCodeAt(E),O|=0;return h.colors[Math.abs(O)%h.colors.length]}function v(N){function O(){if(O.enabled){var E=O,Z=+new Date,P=Z-(d||Z);E.diff=P,E.prev=d,E.curr=Z,d=Z;for(var V=new Array(arguments.length),B=0;B<V.length;B++)V[B]=arguments[B];V[0]=h.coerce(V[0]),typeof V[0]!="string"&&V.unshift("%O");var W=0;V[0]=V[0].replace(/%([a-zA-Z%])/g,function($,lt){if($==="%%")return $;W++;var ot=h.formatters[lt];if(typeof ot=="function"){var Et=V[W];$=ot.call(E,Et),V.splice(W,1),W--}return $}),h.formatArgs.call(E,V);var J=O.log||h.log||console.log.bind(console);J.apply(E,V)}}return O.namespace=N,O.enabled=h.enabled(N),O.useColors=h.useColors(),O.color=m(N),typeof h.init=="function"&&h.init(O),O}function x(N){h.save(N),h.names=[],h.skips=[];for(var O=(typeof N=="string"?N:"").split(/[\s,]+/),E=O.length,Z=0;Z<E;Z++)O[Z]&&(N=O[Z].replace(/\*/g,".*?"),N[0]==="-"?h.skips.push(new RegExp("^"+N.substr(1)+"$")):h.names.push(new RegExp("^"+N+"$")))}function b(){h.enable("")}function k(N){var O,E;for(O=0,E=h.skips.length;O<E;O++)if(h.skips[O].test(N))return!1;for(O=0,E=h.names.length;O<E;O++)if(h.names[O].test(N))return!0;return!1}function C(N){return N instanceof Error?N.stack||N.message:N}})(su,su.exports)),su.exports}var Cp;function $_(){return Cp||(Cp=1,(function(f,h){var d={};h=f.exports=W_(),h.log=x,h.formatArgs=v,h.save=b,h.load=k,h.useColors=m,h.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:C(),h.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function m(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}h.formatters.j=function(N){try{return JSON.stringify(N)}catch(O){return"[UnexpectedJSONParseError]: "+O.message}};function v(N){var O=this.useColors;if(N[0]=(O?"%c":"")+this.namespace+(O?" %c":" ")+N[0]+(O?"%c ":" ")+"+"+h.humanize(this.diff),!!O){var E="color: "+this.color;N.splice(1,0,E,"color: inherit");var Z=0,P=0;N[0].replace(/%[a-zA-Z%]/g,function(V){V!=="%%"&&(Z++,V==="%c"&&(P=Z))}),N.splice(P,0,E)}}function x(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function b(N){try{N==null?h.storage.removeItem("debug"):h.storage.debug=N}catch{}}function k(){var N;try{N=h.storage.debug}catch{}return!N&&typeof process<"u"&&"env"in process&&(N=d.DEBUG),N}h.enable(k());function C(){try{return window.localStorage}catch{}}})(au,au.exports)),au.exports}var lu={exports:{}},jp;function ty(){return jp||(jp=1,(function(f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],f.exports=h.default})(lu,lu.exports)),lu.exports}var ou={exports:{}},Ap;function ey(){return Ap||(Ap=1,(function(f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],f.exports=h.default})(ou,ou.exports)),ou.exports}var ru={exports:{}},uu={exports:{}},Mp;function iy(){return Mp||(Mp=1,(function(f,h){Object.defineProperty(h,"__esModule",{value:!0}),h.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},f.exports=h.default})(uu,uu.exports)),uu.exports}var zp;function ny(){return zp||(zp=1,(function(f,h){Object.defineProperty(h,"__esModule",{value:!0});var d=iy(),m=v(d);function v(x){return x&&x.__esModule?x:{default:x}}h.default={pauseVideo:{acceptableStates:[m.default.ENDED,m.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[m.default.ENDED,m.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[m.default.ENDED,m.default.PLAYING,m.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},f.exports=h.default})(ru,ru.exports)),ru.exports}var Op;function ay(){return Op||(Op=1,(function(f,h){Object.defineProperty(h,"__esModule",{value:!0});var d=$_(),m=O(d),v=ty(),x=O(v),b=ey(),k=O(b),C=ny(),N=O(C);function O(P){return P&&P.__esModule?P:{default:P}}var E=(0,m.default)("youtube-player"),Z={};Z.proxyEvents=function(P){var V={},B=function(Nt){var yt="on"+Nt.slice(0,1).toUpperCase()+Nt.slice(1);V[yt]=function(mt){E('event "%s"',yt,mt),P.trigger(Nt,mt)}},W=!0,J=!1,$=void 0;try{for(var lt=k.default[Symbol.iterator](),ot;!(W=(ot=lt.next()).done);W=!0){var Et=ot.value;B(Et)}}catch(ht){J=!0,$=ht}finally{try{!W&&lt.return&&lt.return()}finally{if(J)throw $}}return V},Z.promisifyPlayer=function(P){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,B={},W=function(yt){V&&N.default[yt]?B[yt]=function(){for(var mt=arguments.length,it=Array(mt),nt=0;nt<mt;nt++)it[nt]=arguments[nt];return P.then(function(F){var at=N.default[yt],pt=F.getPlayerState(),rt=F[yt].apply(F,it);return at.stateChangeRequired||Array.isArray(at.acceptableStates)&&at.acceptableStates.indexOf(pt)===-1?new Promise(function(z){var tt=function K(){var At=F.getPlayerState(),st=void 0;typeof at.timeout=="number"&&(st=setTimeout(function(){F.removeEventListener("onStateChange",K),z()},at.timeout)),Array.isArray(at.acceptableStates)&&at.acceptableStates.indexOf(At)!==-1&&(F.removeEventListener("onStateChange",K),clearTimeout(st),z())};F.addEventListener("onStateChange",tt)}).then(function(){return rt}):rt})}:B[yt]=function(){for(var mt=arguments.length,it=Array(mt),nt=0;nt<mt;nt++)it[nt]=arguments[nt];return P.then(function(F){return F[yt].apply(F,it)})}},J=!0,$=!1,lt=void 0;try{for(var ot=x.default[Symbol.iterator](),Et;!(J=(Et=ot.next()).done);J=!0){var ht=Et.value;W(ht)}}catch(Nt){$=!0,lt=Nt}finally{try{!J&&ot.return&&ot.return()}finally{if($)throw lt}}return B},h.default=Z,f.exports=h.default})(nu,nu.exports)),nu.exports}var Lp;function sy(){return Lp||(Lp=1,(function(f,h){Object.defineProperty(h,"__esModule",{value:!0});var d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},m=Q_(),v=N(m),x=J_(),b=N(x),k=ay(),C=N(k);function N(E){return E&&E.__esModule?E:{default:E}}var O=void 0;h.default=function(E){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,V=(0,v.default)();if(O||(O=(0,b.default)(V)),Z.events)throw new Error("Event handlers cannot be overwritten.");if(typeof E=="string"&&!document.getElementById(E))throw new Error('Element "'+E+'" does not exist.');Z.events=C.default.proxyEvents(V);var B=new Promise(function(J){if((typeof E>"u"?"undefined":d(E))==="object"&&E.playVideo instanceof Function){var $=E;J($)}else O.then(function(lt){var ot=new lt.Player(E,Z);return V.on("ready",function(){J(ot)}),null})}),W=C.default.promisifyPlayer(B,P);return W.on=V.on,W.off=V.off,W},f.exports=h.default})(eu,eu.exports)),eu.exports}var ly=sy();const oy=hu(ly);var ry=Object.defineProperty,uy=Object.defineProperties,cy=Object.getOwnPropertyDescriptors,Dp=Object.getOwnPropertySymbols,fy=Object.prototype.hasOwnProperty,dy=Object.prototype.propertyIsEnumerable,Rp=(f,h,d)=>h in f?ry(f,h,{enumerable:!0,configurable:!0,writable:!0,value:d}):f[h]=d,kf=(f,h)=>{for(var d in h||(h={}))fy.call(h,d)&&Rp(f,d,h[d]);if(Dp)for(var d of Dp(h))dy.call(h,d)&&Rp(f,d,h[d]);return f},Uf=(f,h)=>uy(f,cy(h)),hy=(f,h,d)=>new Promise((m,v)=>{var x=C=>{try{k(d.next(C))}catch(N){v(N)}},b=C=>{try{k(d.throw(C))}catch(N){v(N)}},k=C=>C.done?m(C.value):Promise.resolve(C.value).then(x,b);k((d=d.apply(f,h)).next())});function my(f,h){var d,m;if(f.videoId!==h.videoId)return!0;const v=((d=f.opts)==null?void 0:d.playerVars)||{},x=((m=h.opts)==null?void 0:m.playerVars)||{};return v.start!==x.start||v.end!==x.end}function Bp(f={}){return Uf(kf({},f),{height:0,width:0,playerVars:Uf(kf({},f.playerVars),{autoplay:0,start:0,end:0})})}function py(f,h){return f.videoId!==h.videoId||!X_(Bp(f.opts),Bp(h.opts))}function gy(f,h){var d,m,v,x;return f.id!==h.id||f.className!==h.className||((d=f.opts)==null?void 0:d.width)!==((m=h.opts)==null?void 0:m.width)||((v=f.opts)==null?void 0:v.height)!==((x=h.opts)==null?void 0:x.height)||f.iframeClassName!==h.iframeClassName||f.title!==h.title}var vy={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},_y={videoId:He.string,id:He.string,className:He.string,iframeClassName:He.string,style:He.object,title:He.string,loading:He.oneOf(["lazy","eager"]),opts:He.objectOf(He.any),onReady:He.func,onError:He.func,onPlay:He.func,onPause:He.func,onEnd:He.func,onStateChange:He.func,onPlaybackRateChange:He.func,onPlaybackQualityChange:He.func},fu=class extends yi.Component{constructor(f){super(f),this.destroyPlayerPromise=void 0,this.onPlayerReady=h=>{var d,m;return(m=(d=this.props).onReady)==null?void 0:m.call(d,h)},this.onPlayerError=h=>{var d,m;return(m=(d=this.props).onError)==null?void 0:m.call(d,h)},this.onPlayerStateChange=h=>{var d,m,v,x,b,k,C,N;switch((m=(d=this.props).onStateChange)==null||m.call(d,h),h.data){case fu.PlayerState.ENDED:(x=(v=this.props).onEnd)==null||x.call(v,h);break;case fu.PlayerState.PLAYING:(k=(b=this.props).onPlay)==null||k.call(b,h);break;case fu.PlayerState.PAUSED:(N=(C=this.props).onPause)==null||N.call(C,h);break}},this.onPlayerPlaybackRateChange=h=>{var d,m;return(m=(d=this.props).onPlaybackRateChange)==null?void 0:m.call(d,h)},this.onPlayerPlaybackQualityChange=h=>{var d,m;return(m=(d=this.props).onPlaybackQualityChange)==null?void 0:m.call(d,h)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const h=Uf(kf({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=oy(this.container,h),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(d=>{this.props.title&&d.setAttribute("title",this.props.title),this.props.loading&&d.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var h;(h=this.internalPlayer)==null||h.getIframe().then(d=>{this.props.id?d.setAttribute("id",this.props.id):d.removeAttribute("id"),this.props.iframeClassName?d.setAttribute("class",this.props.iframeClassName):d.removeAttribute("class"),this.props.opts&&this.props.opts.width?d.setAttribute("width",this.props.opts.width.toString()):d.removeAttribute("width"),this.props.opts&&this.props.opts.height?d.setAttribute("height",this.props.opts.height.toString()):d.removeAttribute("height"),this.props.title?d.setAttribute("title",this.props.title):d.setAttribute("title","YouTube video player"),this.props.loading?d.setAttribute("loading",this.props.loading):d.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var h,d,m,v;if(typeof this.props.videoId>"u"||this.props.videoId===null){(h=this.internalPlayer)==null||h.stopVideo();return}let x=!1;const b={videoId:this.props.videoId};if((d=this.props.opts)!=null&&d.playerVars&&(x=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(b.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(b.endSeconds=this.props.opts.playerVars.end)),x){(m=this.internalPlayer)==null||m.loadVideoById(b);return}(v=this.internalPlayer)==null||v.cueVideoById(b)},this.refContainer=h=>{this.container=h},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(f){return hy(this,null,function*(){gy(f,this.props)&&this.updatePlayer(),py(f,this.props)&&(yield this.resetPlayer()),my(f,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return yi.createElement("div",{className:this.props.className,style:this.props.style},yi.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},_u=fu;_u.propTypes=_y;_u.defaultProps=vy;_u.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var yy=_u;const kp=f=>{if(!f)return null;if(/^[a-zA-Z0-9_-]{11}$/.test(f))return f;const h=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,d=f.match(h);return d&&d[7].length===11?d[7]:null};function xy({theme:f,djState:h,setDjState:d}){const{user:m,couple:v,partnerProfile:x,profile:b}=Ze(),{youtubeLink:k,videoId:C,voiceFile:N,incomingVibe:O}=h||{},E=ft=>d(ut=>({...ut,...ft})),[Z,P]=j.useState(!1),[V,B]=j.useState(0),[W,J]=j.useState(!1),[$,lt]=j.useState("idle"),[ot,Et]=j.useState(!1),ht=j.useRef(null),Nt=j.useRef(null),yt=j.useRef(null),mt=j.useRef([]),it=j.useRef(null);j.useEffect(()=>{if(!v?.id)return;(async()=>{if(O)return;const{data:gt}=await et.from("radio_transmissions").select("*").eq("couple_id",v.id).neq("sender_id",m.id).eq("is_played",!1).order("created_at",{ascending:!1}).limit(1).single();gt&&E({incomingVibe:gt})})();const ut=et.channel(`radio:${v.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"radio_transmissions",filter:`couple_id=eq.${v.id}`},gt=>{gt.new.sender_id!==m.id&&E({incomingVibe:gt.new})}).subscribe();return()=>et.removeChannel(ut)},[v?.id,m?.id]);const nt=ft=>{const ut=ft.target.value,gt=kp(ut);E({youtubeLink:ut,videoId:gt||C})},F=ft=>{const ut=ft.target.files[0];ut&&E({voiceFile:ut})},at=async()=>{try{const ft=await navigator.mediaDevices.getUserMedia({audio:!0});yt.current=new MediaRecorder(ft),mt.current=[],yt.current.ondataavailable=ut=>{ut.data.size>0&&mt.current.push(ut.data)},yt.current.onstop=()=>{const ut=new Blob(mt.current,{type:"audio/webm"}),gt=new File([ut],"voice_note.webm",{type:"audio/webm"});E({voiceFile:gt}),ft.getTracks().forEach(Ct=>Ct.stop())},yt.current.start(),P(!0),B(0),it.current=setInterval(()=>{B(ut=>ut+1)},1e3)}catch(ft){console.error("Error accessing microphone:",ft)}},pt=()=>{yt.current&&Z&&(yt.current.stop(),P(!1),clearInterval(it.current))},rt=async()=>{if(!(!N||!C||!v)){Et(!0);try{const ft=`${v.id}/${Date.now()}_${N.name}`,{data:ut,error:gt}=await et.storage.from("voice-notes").upload(ft,N);if(gt)throw gt;const{data:{publicUrl:Ct}}=et.storage.from("voice-notes").getPublicUrl(ft),{data:Y,error:dt}=await et.from("radio_transmissions").insert([{couple_id:v.id,sender_id:m.id,youtube_link:k,voice_note_url:Ct,message:"Sent a vibe"}]).select().single();if(dt)throw dt;const vt=v.partner_a===m.id?v.partner_b:v.partner_a;if(vt){const Gt=b?.username||"Your partner";await et.from("notifications").insert([{user_id:vt,type:"radio",title:"Incoming Vibe ",message:`${Gt} sent a Telepathic DJ transmission!`,metadata:{transmission_id:Y.id}}])}E({voiceFile:null,youtubeLink:"",videoId:null}),alert("Vibe Transmitted! ")}catch(ft){console.error("Transmission failed:",ft),alert(`Failed to transmit: ${ft.message||ft.error_description||"Unknown Error"}`)}finally{Et(!1)}}},z=(ft=!1)=>{J(!0),lt("playing_voice"),ht.current&&(ft&&O?ht.current.src=O.voice_note_url:N&&(ht.current.src=URL.createObjectURL(N)),ht.current.play());const ut=ft&&O?kp(O.youtube_link):C;ft&&O&&E({youtubeLink:O.youtube_link,videoId:ut})},tt=async()=>{$==="playing_voice"&&W&&(lt("playing_music"),Nt.current&&(Nt.current.internalPlayer.unMute(),Nt.current.internalPlayer.playVideo()),O&&await et.from("radio_transmissions").update({is_played:!0}).eq("id",O.id))},K=ft=>{Nt.current=ft.target},At=ft=>{const ut=Math.floor(ft/60),gt=ft%60;return`${ut}:${gt.toString().padStart(2,"0")}`},st=f?.borderColor||"border-white/10",zt=async()=>{if(!O)return;const ft=O.id;E({incomingVibe:null});try{const{error:ut}=await et.from("radio_transmissions").update({is_played:!0}).eq("id",ft);if(ut)throw ut}catch(ut){console.error("Error dismissing vibe:",ut)}};return O&&!W?u.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center space-y-6",children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-indigo-500/20 flex items-center justify-center animate-pulse",children:u.jsx(nl,{className:"w-12 h-12 text-indigo-400"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Incoming Vibe!"}),u.jsxs("p",{className:"text-white/60 text-sm mt-2",children:[x?.username||"Your partner"," has sent you a broadcast."]})]}),u.jsxs("button",{onClick:()=>z(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:scale-105 transition-transform shadow-xl shadow-indigo-500/20 flex items-center gap-2",children:[u.jsx(Ip,{className:"fill-current w-5 h-5"})," Tune In"]}),u.jsx("button",{onClick:zt,className:"text-xs text-white/30 hover:text-white",children:"Dismiss"})]}):u.jsxs("div",{className:"h-full flex flex-col p-4 relative overflow-hidden",children:[u.jsxs("div",{className:"text-center mb-6 z-10",children:[u.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[u.jsx(nl,{className:"w-6 h-6 text-indigo-400"}),"Telepathic DJ"]}),u.jsx("p",{className:"text-xs text-white/50 uppercase tracking-widest mt-1",children:"Transmit a Vibe"})]}),u.jsxs("div",{className:"flex-1 flex flex-col gap-6 z-10",children:[u.jsxs("div",{className:`liquid-glass p-4 rounded-2xl border ${st} transition-all ${$==="playing_music"?"ring-2 ring-indigo-500/50":""}`,children:[u.jsxs("label",{className:"text-xs font-bold text-white/60 mb-2 block flex items-center gap-2",children:[u.jsx(Iv,{className:"w-4 h-4"}),"1. The Soundtrack (YouTube)"]}),u.jsx("input",{type:"text",placeholder:"Paste YouTube Link...",value:k,onChange:nt,disabled:W||Z||ot,className:"w-full bg-black/20 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500 transition-colors"}),C&&u.jsxs("div",{className:"mt-2 rounded-lg overflow-hidden h-32 relative",children:[u.jsx("div",{className:`w-full h-full ${$==="playing_music"?"opacity-100":"opacity-60 grayscale"}`,children:u.jsx(yy,{videoId:C,opts:{height:"100%",width:"100%",playerVars:{autoplay:0,controls:1,showinfo:0,modestbranding:1,playsinline:1}},onReady:K,className:"w-full h-full"})}),$!=="playing_music"&&u.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center pointer-events-none",children:u.jsx("span",{className:"text-xs text-white/70 italic",children:"Ready to cue"})})]})]}),u.jsxs("div",{className:`liquid-glass p-4 rounded-2xl border ${st} transition-all ${$==="playing_voice"?"ring-2 ring-rose-500/50":""}`,children:[u.jsxs("label",{className:"text-xs font-bold text-white/60 mb-2 block flex items-center gap-2",children:[u.jsx(xf,{className:"w-4 h-4"}),"2. Your Voice Note"]}),!N&&!Z?u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:at,disabled:W||ot,className:"flex-1 border-2 border-dashed border-white/10 rounded-xl p-6 flex flex-col items-center justify-center gap-2 hover:bg-rose-500/10 hover:border-rose-500/30 transition-colors group",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-500/20 flex items-center justify-center group-hover:scale-110 transition-transform",children:u.jsx(xf,{className:"w-5 h-5 text-rose-400"})}),u.jsx("span",{className:"text-xs text-white/40 group-hover:text-white/70",children:"Record Voice"})]}),u.jsxs("label",{className:"flex-1 cursor-pointer group",children:[u.jsx("input",{type:"file",accept:"audio/*",onChange:F,className:"hidden",disabled:W}),u.jsxs("div",{className:"h-full border-2 border-dashed border-white/10 rounded-xl p-6 flex flex-col items-center justify-center gap-2 hover:bg-white/5 transition-colors",children:[u.jsx(Xv,{className:"w-6 h-6 text-white/30 group-hover:scale-110 transition-transform"}),u.jsx("span",{className:"text-xs text-white/40",children:"Upload File"})]})]})]}):Z?u.jsxs("div",{className:"flex flex-col items-center justify-center bg-rose-500/10 border border-rose-500/30 p-6 rounded-xl animate-pulse",children:[u.jsx("div",{className:"text-rose-400 font-bold text-2xl mb-2",children:At(V)}),u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("span",{className:"w-3 h-3 bg-rose-500 rounded-full animate-ping"}),u.jsx("span",{className:"text-xs text-rose-300 uppercase tracking-widest",children:"Recording..."})]}),u.jsxs("button",{onClick:pt,className:"px-6 py-2 bg-rose-500 text-white rounded-full font-medium hover:bg-rose-600 transition-colors flex items-center gap-2",children:[u.jsx(Qv,{className:"w-4 h-4"})," Stop Recording"]})]}):u.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-3 rounded-xl border border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-500/20 flex items-center justify-center",children:u.jsx(xf,{className:"w-5 h-5 text-rose-400"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-white/90 truncate max-w-[150px]",children:N.name}),u.jsxs("div",{className:"text-xs text-white/40 flex items-center gap-1",children:["Ready  ",(N.size/1024).toFixed(0),"kb"]})]})]}),u.jsx("div",{className:"flex items-center gap-2",children:!W&&u.jsx("button",{onClick:()=>E({voiceFile:null}),className:"p-2 hover:bg-white/10 rounded-full text-white/40 hover:text-red-400 transition-colors",children:""})})]}),u.jsx("audio",{ref:ht,onEnded:tt,className:"hidden",crossOrigin:"anonymous"}),$==="playing_voice"&&u.jsx("div",{className:"mt-3 h-8 flex items-center justify-center gap-1",children:[1,2,3,4,5,4,3,2,1].map((ft,ut)=>u.jsx(St.div,{className:"w-1 bg-rose-400 rounded-full",animate:{height:[10,25,10]},transition:{duration:.5,repeat:1/0,delay:ut*.1}},ut))})]}),u.jsx("button",{onClick:W?()=>window.location.reload():rt,disabled:!N||!C||Z||ot,className:`w-full py-4 rounded-xl font-bold uppercase tracking-wider transition-all disabled:opacity-50 disabled:cursor-not-allowed
                ${W?"bg-red-500/20 text-red-400 hover:bg-red-500/30":ot?"bg-indigo-500 text-white animate-pulse":"bg-white text-black hover:bg-gray-200 hover:scale-[1.02] shadow-xl shadow-white/10"}
            `,children:W?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx(Kv,{className:"w-4 h-4 fill-current"})," Stop / Reset"]}):ot?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx(Yp,{className:"w-4 h-4 animate-spin"})," Uploading..."]}):u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx(nl,{className:"w-4 h-4"})," Transmit Vibe"]})})]})]})}const by=f=>{if(f<=0)return"UNLOCKED";const h=Math.floor(f/(1e3*60*60*24)),d=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),m=Math.floor(f%(1e3*60*60)/(1e3*60)),v=Math.floor(f%(1e3*60)/1e3);return`${h}d ${d}h ${m}m ${v}s`},wy=({event:f,theme:h})=>{const[d,m]=j.useState(new Date(f.unlock_date).getTime()-Date.now());j.useEffect(()=>{const x=setInterval(()=>{const b=new Date(f.unlock_date).getTime()-Date.now();m(b)},1e3);return()=>clearInterval(x)},[f.unlock_date]);const v=d>0;return u.jsxs("div",{className:`liquid-glass relative overflow-hidden rounded-2xl border ${h.borderColor} ${h.glassColor} p-5 transition-all duration-500`,children:[u.jsx("div",{className:`absolute top-4 right-4 p-2 rounded-full ${v?"bg-white/5 text-white/30":"bg-green-500/20 text-green-400"}`,children:v?u.jsx(ll,{className:"w-4 h-4"}):u.jsx(Pp,{className:"w-4 h-4"})}),u.jsxs("div",{className:"space-y-4 relative z-10",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-white/90",children:f.title}),u.jsx("p",{className:"text-xs text-white/50 uppercase tracking-widest mt-1",children:new Date(f.unlock_date).toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric"})})]}),u.jsx("div",{className:"relative",children:v?u.jsxs("div",{className:"glass-panel p-4 rounded-xl border border-white/5 flex flex-col items-center justify-center gap-2 text-center",children:[u.jsx(Pm,{className:"w-6 h-6 text-white/20"}),u.jsx("p",{className:"text-white/40 font-mono text-sm blur-[3px] select-none",children:"SECRET LOCATION HIDDEN"}),u.jsx("div",{className:"mt-2 font-mono text-red-400 font-bold text-sm bg-red-500/10 px-3 py-1 rounded-full border border-red-500/20",children:by(d)})]}):u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10",children:[u.jsx("span",{className:"text-[10px] text-white/40 uppercase block mb-1",children:"Location"}),u.jsxs("p",{className:"text-white/90 font-medium flex items-center gap-2",children:[u.jsx(Pm,{className:"w-4 h-4 text-rose-400"}),f.location]})]}),f.description&&u.jsxs("p",{className:"text-sm text-white/70 italic p-2",children:['"',f.description,'"']})]})})]})]})};function Sy({theme:f}){const{couple:h,profile:d}=Ze(),[m,v]=j.useState([]),[x,b]=j.useState(!1),[k,C]=j.useState(""),[N,O]=j.useState(""),[E,Z]=j.useState(""),[P,V]=j.useState(""),[B,W]=j.useState("");j.useEffect(()=>{if(!h?.id)return;(async()=>{const{data:ot}=await et.from("hidden_events").select("*").eq("couple_id",h.id).order("unlock_date",{ascending:!0});ot&&v(ot)})();const lt=et.channel(`calendar:${h.id}`).on("postgres_changes",{event:"*",schema:"public",table:"hidden_events",filter:`couple_id=eq.${h.id}`},ot=>{ot.eventType==="INSERT"&&v(Et=>[...Et,ot.new].sort((ht,Nt)=>new Date(ht.unlock_date)-new Date(Nt.unlock_date))),ot.eventType==="DELETE"&&v(Et=>Et.filter(ht=>ht.id!==ot.old.id))}).subscribe();return()=>et.removeChannel(lt)},[h?.id]);const J=async()=>{if(!k||!N||!P||!B)return;const $=new Date(`${P}T${B}`),{error:lt}=await et.from("hidden_events").insert([{couple_id:h.id,creator_id:d.id,title:k,location:N,description:E,unlock_date:$.toISOString()}]);lt?alert("Error creating event: "+lt.message):(b(!1),C(""),O(""),Z(""),V(""),W(""))};return u.jsxs("div",{className:"h-full flex flex-col p-6 relative",children:[u.jsxs("header",{className:"mb-6 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:`text-2xl font-bold ${f.textColor} flex items-center gap-2`,children:[u.jsx(Xp,{className:"w-6 h-6"}),"Anticipation"]}),u.jsx("p",{className:"text-white/50 text-xs",children:"The Mystery Calendar"})]}),u.jsx("button",{onClick:()=>b(!0),className:"p-3 bg-white/10 rounded-full hover:bg-white/20 text-white transition-colors",children:u.jsx(du,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-4 pb-20 scrollbar-hide",children:m.length===0?u.jsxs("div",{className:"text-center py-20 opacity-40",children:[u.jsx(qf,{className:"w-12 h-12 mx-auto mb-4 stroke-1"}),u.jsx("p",{className:"text-sm",children:"No mystery plans yet."}),u.jsx("p",{className:"text-xs mt-2",children:"Create one to build the suspense."})]}):m.map($=>u.jsx(wy,{event:$,theme:f},$.id))}),u.jsx(ri,{children:x&&u.jsxs(St.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-50 bg-black/80 backdrop-blur-xl p-6 flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:"New Mystery Plan"}),u.jsx("button",{onClick:()=>b(!1),className:"p-2 bg-white/10 rounded-full text-white/60 hover:text-white",children:u.jsx(_i,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-white/50 uppercase tracking-wider block mb-2",children:"Title"}),u.jsx("input",{type:"text",value:k,onChange:$=>C($.target.value),placeholder:"e.g. Saturday Night...",className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 text-white placeholder-white/20 focus:outline-none focus:border-white/30"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-white/50 uppercase tracking-wider block mb-2",children:"Date"}),u.jsx("input",{type:"date",value:P,onChange:$=>V($.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-white/30 [color-scheme:dark]"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-white/50 uppercase tracking-wider block mb-2",children:"Unlock Time"}),u.jsx("input",{type:"time",value:B,onChange:$=>W($.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-white/30 [color-scheme:dark]"})]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs text-rose-400 font-bold uppercase tracking-wider block mb-2 flex items-center gap-2",children:[u.jsx(ll,{className:"w-3 h-3"})," Secret Location"]}),u.jsx("input",{type:"text",value:N,onChange:$=>O($.target.value),placeholder:"Hidden until unlock...",className:"w-full bg-rose-500/10 border border-rose-500/30 rounded-xl p-3 text-white placeholder-rose-500/30 focus:outline-none focus:border-rose-500/50"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs text-white/50 uppercase tracking-wider block mb-2",children:"Description (Optional)"}),u.jsx("textarea",{value:E,onChange:$=>Z($.target.value),placeholder:"Any clues or dress code?",className:"w-full bg-white/5 border border-white/10 rounded-xl p-3 text-white placeholder-white/20 focus:outline-none focus:border-white/30 min-h-[100px]"})]})]}),u.jsx("button",{onClick:J,className:"w-full py-4 bg-white text-black font-bold rounded-2xl mt-4 hover:bg-gray-200 transition-colors",children:"Create Mystery Event"})]})})]})}function Ny(){const{user:f,profile:h,partnerProfile:d,couple:m}=Ze(),[v,x]=j.useState([]),[b,k]=j.useState(null),[C,N]=j.useState(null),[O,E]=j.useState(!1),[Z,P]=j.useState("rain"),[V,B]=j.useState(.5),[W,J]=j.useState(null),[$,lt]=j.useState(!1),[ot,Et]=j.useState(null),[ht,Nt]=j.useState(null),[yt,mt]=j.useState(null),[it,nt]=j.useState(null),F=[{id:"rain",name:"Rain",icon:"",freq:200},{id:"ocean",name:"Ocean Waves",icon:"",freq:150},{id:"forest",name:"Forest",icon:"",freq:300},{id:"fire",name:"Campfire",icon:"",freq:250}];j.useEffect(()=>{z(),tt(),K()},[f?.id]),j.useEffect(()=>{if(!C?.alarm_enabled||!C?.alarm_time)return;const Y=()=>{const vt=new Date;`${String(vt.getHours()).padStart(2,"0")}:${String(vt.getMinutes()).padStart(2,"0")}`===C.alarm_time&&!$&&at()};Y();const dt=setInterval(Y,3e4);return()=>clearInterval(dt)},[C,$]);const at=()=>{lt(!0);try{const Y=new(window.AudioContext||window.webkitAudioContext),dt=Y.createOscillator(),vt=Y.createGain();dt.type="sine",dt.frequency.setValueAtTime(800,Y.currentTime),vt.gain.setValueAtTime(.5,Y.currentTime),dt.connect(vt),vt.connect(Y.destination),dt.start();let Gt=0;const pe=setInterval(()=>{Gt%2===0?vt.gain.setValueAtTime(.5,Y.currentTime):vt.gain.setValueAtTime(0,Y.currentTime),Gt++,Gt>20&&clearInterval(pe)},500);Et({ctx:Y,osc:dt,interval:pe})}catch(Y){console.error("Alarm audio error:",Y)}"vibrate"in navigator&&navigator.vibrate([1e3,500,1e3,500,1e3]),Notification.permission==="granted"&&new Notification("Good Morning! ",{body:"Time to wake up!",icon:"/pwa-192x192.png",tag:"alarm",requireInteraction:!0}),C?.wake_partner&&m?.id&&et.from("notifications").insert({user_id:m.partner_a===f.id?m.partner_b:m.partner_a,type:"wake_up",title:`${h?.username} is waking up!`,message:"Time to rise and shine together "})},pt=()=>{ot&&(ot.interval&&clearInterval(ot.interval),ot.osc&&ot.osc.stop(),ot.ctx&&ot.ctx.close(),ot.pause&&(ot.pause(),ot.currentTime=0),Et(null)),lt(!1)},rt=()=>{pt();const Y=C?.snooze_duration||5;setTimeout(()=>{C?.alarm_enabled&&at()},Y*60*1e3)},z=async()=>{if(!f?.id)return;const{data:Y}=await et.from("sleep_sessions").select("*").or(`user_id.eq.${f.id},couple_id.eq.${m?.id}`).order("sleep_time",{ascending:!1}).limit(7);Y&&x(Y)},tt=async()=>{if(!f?.id)return;let{data:Y}=await et.from("alarm_settings").select("*").eq("user_id",f.id).single();if(!Y){const{data:dt}=await et.from("alarm_settings").insert({user_id:f.id}).select().single();Y=dt}N(Y)},K=async()=>{if(!f?.id)return;const{data:Y}=await et.from("sleep_sessions").select("*").eq("user_id",f.id).is("wake_time",null).order("sleep_time",{ascending:!1}).limit(1);Y&&Y.length>0&&k(Y[0])},At=async()=>{const{data:Y}=await et.from("sleep_sessions").insert({user_id:f.id,couple_id:m?.id,sleep_time:new Date().toISOString()}).select().single();Y&&(k(Y),await et.from("profiles").update({last_slept_at:new Date().toISOString()}).eq("id",f.id))},st=async()=>{if(!b)return;const Y=new Date,dt=new Date(b.sleep_time),vt=Math.floor((Y-dt)/1e3/60);await et.from("sleep_sessions").update({wake_time:Y.toISOString(),duration_minutes:vt}).eq("id",b.id),k(null),z()},zt=async()=>{if(!C)return;const Y=!C.alarm_enabled;await et.from("alarm_settings").update({alarm_enabled:Y}).eq("user_id",f.id),N({...C,alarm_enabled:Y})},ft=async Y=>{await et.from("alarm_settings").update({alarm_time:Y}).eq("user_id",f.id),N({...C,alarm_time:Y})},ut=async()=>{if(W)if(O)W.pause(),E(!1);else try{await W.play(),E(!0)}catch(Y){console.error(" Audio resume failed:",Y)}else{const Y=F.find(vt=>vt.id===Z)?.url,dt=new Audio(Y);dt.loop=!0,dt.volume=V;try{await dt.play(),J(dt),E(!0)}catch(vt){console.error(" Audio play failed:",vt),alert("Failed to play sound. Please try again.")}}},gt=Y=>{ht&&yt&&(yt.stop(),ht.close(),Nt(null),mt(null),nt(null)),W&&(W.pause(),J(null)),P(Y),E(!1)},Ct=Y=>{B(Y),it&&ht&&it.gain.setValueAtTime(Y*.3,ht.currentTime),W&&(W.volume=Y)};return u.jsxs("div",{className:"space-y-6 pb-24",children:[u.jsxs("header",{className:"space-y-1 text-center",children:[u.jsx("h1",{className:"text-3xl font-bold text-love-400",children:"Sleep Sync"}),u.jsx("p",{className:"text-white/50 text-xs tracking-wider uppercase",children:"Rest together, even apart"})]}),u.jsx(St.div,{whileHover:{scale:1.02},className:"glass-panel p-6 rounded-3xl",children:b?u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx(cs,{className:"w-16 h-16 text-indigo-400 mx-auto"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white/70 text-sm",children:"Sleeping since"}),u.jsx("p",{className:"text-2xl font-bold text-white",children:new Date(b.sleep_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),u.jsx("p",{className:"text-white/50 text-xs mt-1",children:(()=>{const Y=new Date-new Date(b.sleep_time),dt=Math.floor(Y/1e3/60/60),vt=Math.floor(Y/1e3/60%60);return`${dt}h ${vt}m`})()})]}),u.jsxs(St.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:st,className:"w-full py-4 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 rounded-2xl border border-yellow-500/30 hover:border-yellow-500/50 transition-colors font-bold",children:[u.jsx(sl,{className:"w-5 h-5 inline mr-2"}),"Good Morning!"]})]}):u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx(sl,{className:"w-16 h-16 text-yellow-400 mx-auto"}),u.jsx("p",{className:"text-white/70",children:"Ready for bed?"}),u.jsxs(St.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:At,className:"w-full py-4 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 text-indigo-300 rounded-2xl border border-indigo-500/30 hover:border-indigo-500/50 transition-colors font-bold",children:[u.jsx(cs,{className:"w-5 h-5 inline mr-2 fill-current"}),"Goodnight "]})]})}),d?.last_slept_at&&u.jsx("div",{className:"glass-panel p-4 rounded-2xl flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Gi,{className:"w-5 h-5 text-love-400"}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-sm text-white/80",children:[d.username," is sleeping"]}),u.jsxs("p",{className:"text-xs text-white/40",children:["Since ",new Date(d.last_slept_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})}),u.jsxs("div",{className:"glass-panel p-6 rounded-3xl space-y-4",children:[u.jsxs("h3",{className:"text-xs uppercase font-bold text-white/40 tracking-widest flex items-center gap-2",children:[u.jsx(Gm,{className:"w-4 h-4"}),"Nature Sounds"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.map(Y=>u.jsxs(St.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>gt(Y.id),className:`p-3 rounded-xl border transition-colors ${Z===Y.id?"bg-white/10 border-white/20":"bg-white/5 border-white/5 hover:bg-white/10"}`,children:[u.jsx("span",{className:"text-2xl block mb-1",children:Y.icon}),u.jsx("span",{className:"text-xs text-white/70",children:Y.name})]},Y.id))}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(St.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:ut,className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center border border-white/10 hover:bg-white/15 transition-colors",children:O?u.jsx(Jv,{className:"w-5 h-5"}):u.jsx(Ip,{className:"w-5 h-5 ml-0.5"})}),u.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[u.jsx(Fv,{className:"w-4 h-4 text-white/40"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:V,onChange:Y=>Ct(parseFloat(Y.target.value)),className:"flex-1 h-2 bg-white/10 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.3) ${V*100}%, rgba(255,255,255,0.1) ${V*100}%, rgba(255,255,255,0.1) 100%)`}}),u.jsx(Gm,{className:"w-4 h-4 text-white/40"})]})]})]}),u.jsxs("div",{className:"glass-panel p-6 rounded-3xl space-y-4",children:[u.jsxs("h3",{className:"text-xs uppercase font-bold text-white/40 tracking-widest flex items-center gap-2",children:[u.jsx(al,{className:"w-4 h-4"}),"Alarm"]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{children:u.jsx("input",{type:"time",value:C?.alarm_time||"07:00",onChange:Y=>ft(Y.target.value),className:"bg-white/5 border border-white/10 rounded-xl px-4 py-2 text-white text-lg font-mono focus:outline-none focus:border-white/20"})}),u.jsx(St.button,{whileTap:{scale:.95},onClick:zt,className:`px-6 py-2 rounded-xl border font-bold text-sm transition-colors ${C?.alarm_enabled?"bg-love-500/20 border-love-500/30 text-love-400":"bg-white/5 border-white/10 text-white/50"}`,children:C?.alarm_enabled?"ON":"OFF"})]}),C?.alarm_enabled&&u.jsx(St.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"pt-4 border-t border-white/5 space-y-2",children:u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:C?.wake_partner||!1,onChange:async Y=>{await et.from("alarm_settings").update({wake_partner:Y.target.checked}).eq("user_id",f.id),N({...C,wake_partner:Y.target.checked})},className:"w-4 h-4 rounded accent-love-500"}),u.jsx("span",{className:"text-sm text-white/70",children:"Wake partner too "})]})})]}),u.jsxs("div",{className:"glass-panel p-6 rounded-3xl space-y-4",children:[u.jsxs("h3",{className:"text-xs uppercase font-bold text-white/40 tracking-widest flex items-center gap-2",children:[u.jsx(qf,{className:"w-4 h-4"}),"Sleep History"]}),u.jsx("div",{className:"space-y-2",children:v.length>0?v.map(Y=>{const dt=Y.user_id===f?.id;return u.jsx("div",{className:"p-3 bg-white/5 rounded-xl border border-white/5",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("p",{className:"text-sm font-bold text-white/90",children:dt?"You":d?.username||"Partner"}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${dt?"bg-blue-500/20 text-blue-300":"bg-pink-500/20 text-pink-300"}`,children:new Date(Y.sleep_time).toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"})})]}),u.jsxs("p",{className:"text-xs text-white/50",children:[new Date(Y.sleep_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Y.wake_time&&` - ${new Date(Y.wake_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`]})]}),Y.duration_minutes&&u.jsx("div",{className:"text-right",children:u.jsxs("p",{className:"text-lg font-bold text-indigo-400",children:[Math.floor(Y.duration_minutes/60),"h ",Y.duration_minutes%60,"m"]})})]})},Y.id)}):u.jsx("p",{className:"text-center text-white/30 text-sm py-6",children:"No sleep sessions yet"})})]}),u.jsx(ri,{children:$&&u.jsx(u.Fragment,{children:u.jsx(St.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center",children:u.jsxs(St.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:20},className:"glass-panel p-8 rounded-3xl max-w-sm w-full mx-4 text-center space-y-6",children:[u.jsx(St.div,{animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:1},children:u.jsx(al,{className:"w-16 h-16 text-love-400 mx-auto"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Good Morning! "}),u.jsx("p",{className:"text-white/60 text-sm",children:"Time to wake up and shine!"}),u.jsxs("p",{className:"text-white/40 text-xs mt-2",children:["Alarm: ",C?.alarm_time]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs(St.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:rt,className:"flex-1 py-4 bg-white/10 border border-white/20 rounded-2xl font-bold text-white/80 hover:bg-white/15 transition-colors",children:["Snooze ",C?.snooze_duration||5,"min"]}),u.jsx(St.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:pt,className:"flex-1 py-4 bg-gradient-to-r from-love-500/30 to-pink-500/30 border border-love-500/50 rounded-2xl font-bold text-love-300 hover:from-love-500/40 hover:to-pink-500/40 transition-colors",children:"Stop"})]})]})})})})]})}function Ty(){const{couple:f,profile:h,showNotification:d}=Ze(),[m,v]=j.useState([]),[x,b]=j.useState(!0),[k,C]=j.useState(!1),[N,O]=j.useState(null),[E,Z]=j.useState(!1),[P,V]=j.useState([]),[B,W]=j.useState(!1),[J,$]=j.useState(""),[lt,ot]=j.useState(!1),Et=j.useRef(null);j.useEffect(()=>{if(!f)return;(async()=>{try{const{data:pt,error:rt}=await et.from("memories").select("*").eq("couple_id",f.id).order("created_at",{ascending:!1});if(rt)throw rt;v(pt||[])}catch(pt){console.error("Error fetching memories:",pt)}finally{b(!1)}})();const at=et.channel(`memories_channel:${f.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"memories",filter:`couple_id=eq.${f.id}`},pt=>{v(rt=>[pt.new,...rt])}).on("postgres_changes",{event:"DELETE",schema:"public",table:"memories",filter:`couple_id=eq.${f.id}`},pt=>{v(rt=>rt.filter(z=>z.id!==pt.old.id))}).subscribe();return()=>et.removeChannel(at)},[f]);const ht=async F=>{if(!F.target.files||!F.target.files[0])return;const at=F.target.files[0];C(!0),Nt(at)},Nt=F=>{const at=new FileReader;at.onload=async pt=>{const rt=new Image;rt.onload=async()=>{try{const z=document.createElement("canvas"),tt=1200,K=1200;let At=rt.width,st=rt.height;At>st?At>tt&&(st*=tt/At,At=tt):st>K&&(At*=K/st,st=K),z.width=At,z.height=st,z.getContext("2d").drawImage(rt,0,0,At,st);const ft=z.toDataURL("image/jpeg",.8),ut="temp-"+Date.now(),gt={id:ut,couple_id:f.id,uploaded_by:h.id,image_url:ft,created_at:new Date().toISOString(),isOptimistic:!0};v(dt=>[gt,...dt]);const{data:Ct,error:Y}=await et.from("memories").insert([{couple_id:f.id,uploaded_by:h.id,image_url:ft,caption:J?` Magic: ${J}`:""}]).select().single();if(Y)throw Y;v(dt=>dt.map(vt=>vt.id===ut?Ct:vt)),B&&(W(!1),Z(!1),V([]),$(""))}catch(z){console.error("Upload failed",z),d("Upload Error","Failed to upload memory.","system"),v(tt=>tt.filter(K=>!K.isOptimistic))}finally{C(!1),ot(!1)}},rt.src=pt.target.result},F instanceof Blob&&at.readAsDataURL(F)},yt=async(F,at)=>{if(at.stopPropagation(),!confirm("Remove this memory?"))return;const pt=[...m];v(z=>z.filter(tt=>tt.id!==F)),N===F&&O(null);const{error:rt}=await et.from("memories").delete().eq("id",F);rt&&(d("Delete Failed","Could not remove memory.","system"),v(pt))},mt=()=>{E?(Z(!1),V([])):Z(!0)},it=F=>{if(!E){O(F);return}P.includes(F)?V(at=>at.filter(pt=>pt!==F)):P.length<2?V(at=>[...at,F]):V(at=>[at[1],F])},nt=async()=>{if(J.trim()){ot(!0);try{const F=await z_(J);if(!F)throw new Error("Generation failed");const at="temp-"+Date.now(),pt={id:at,couple_id:f.id,uploaded_by:h.id,image_url:F,created_at:new Date().toISOString(),isOptimistic:!0};v(tt=>[pt,...tt]);const{data:rt,error:z}=await et.from("memories").insert([{couple_id:f.id,uploaded_by:h.id,image_url:F,caption:` Magic: ${J}`}]).select().single();if(z)throw z;v(tt=>tt.map(K=>K.id===at?rt:K)),W(!1),Z(!1),V([]),$("")}catch(F){console.error("Magic generation failed:",F),d("Magic Failed",F.message||"Magic spell failed! Please check your internet connection and try again.","system"),v(at=>at.filter(pt=>!pt.isOptimistic))}finally{ot(!1)}}};return u.jsxs("div",{className:"h-full flex flex-col relative",children:[u.jsxs("header",{className:"flex justify-between items-center mb-6 z-10 relative",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold",children:"Memories"}),u.jsxs("p",{className:"text-xs text-white/50",children:[m.length," moments captured"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:mt,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${E?"bg-yellow-400 text-black rotate-12 scale-110":"bg-white/10 hover:bg-white/20 text-yellow-200"}`,children:u.jsx(zn,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>Et.current?.click(),disabled:k||E,className:"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:k?u.jsx("div",{className:"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}):u.jsx(du,{className:"w-5 h-5"})}),u.jsx("input",{type:"file",ref:Et,onChange:ht,accept:"image/*",className:"hidden"})]})]}),u.jsx(ri,{children:E&&u.jsx(St.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-16 left-0 right-0 z-20",children:u.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 backdrop-blur-md p-3 rounded-xl flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm font-medium text-yellow-200",children:[P.length,"/2 Selected for Magic"]}),u.jsxs("button",{onClick:()=>W(!0),disabled:P.length===0,className:"px-4 py-2 bg-yellow-400 text-black text-xs font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 hover:bg-yellow-300 transition-colors",children:[u.jsx(Ym,{className:"w-3 h-3"}),"Create"]})]})})}),x?u.jsx("div",{className:"flex-1 flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 border-2 border-love-500 border-t-transparent rounded-full animate-spin"})}):m.length===0?u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-8 opacity-50",children:[u.jsx(So,{className:"w-12 h-12 mb-4 text-white/30"}),u.jsx("p",{children:"No memories yet."}),u.jsx("p",{className:"text-xs",children:"Tap + to add your first photo."})]}):u.jsx("div",{className:`grid grid-cols-3 gap-2 pb-24 overflow-y-auto scrollbar-hide content-start transition-all duration-300 ${E?"pt-14":""}`,children:m.map(F=>{const at=P.includes(F.id);return u.jsxs(St.div,{layoutId:`memory-${F.id}`,onClick:()=>it(F.id),whileTap:{scale:.95},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:E&&at?.9:1,borderColor:at?"#FACC15":"transparent",borderWidth:at?4:0},className:`aspect-square rounded-xl overflow-hidden cursor-pointer relative group bg-white/5 ${F.isOptimistic?"opacity-50":""}`,children:[u.jsx("img",{src:F.image_url,alt:"Memory",className:`w-full h-full object-cover transition-all duration-500 ${E&&!at?"grayscale opacity-50":"group-hover:scale-110"}`,loading:"lazy"}),at&&u.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-black rounded-full p-1 shadow-lg",children:u.jsx(Zf,{className:"w-3 h-3"})})]},F.id)})}),u.jsx(ri,{children:N&&u.jsx(St.div,{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-md p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>O(null),children:(()=>{const F=m.find(at=>at.id===N);return F?u.jsxs(St.div,{layoutId:`memory-${F.id}`,className:"relative max-w-lg w-full max-h-[80vh] flex flex-col items-center",onClick:at=>at.stopPropagation(),children:[u.jsx("img",{src:F.image_url,className:"w-full h-auto max-h-[70vh] rounded-2xl shadow-2xl object-contain bg-black"}),u.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[u.jsx("a",{href:F.image_url,download:`memory-${F.id}.jpg`,className:"p-3 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors",children:u.jsx(Vp,{className:"w-5 h-5"})}),F.uploaded_by===h.id&&u.jsx("button",{onClick:at=>yt(F.id,at),className:"p-3 bg-red-500/20 text-red-400 rounded-full",children:u.jsx(Wv,{className:"w-5 h-5"})})]}),u.jsx("button",{onClick:()=>O(null),className:"absolute -top-12 right-0 p-2 text-white/50 hover:text-white",children:u.jsx(_i,{className:"w-8 h-8"})})]}):null})()})}),u.jsx(ri,{children:B&&u.jsx(St.div,{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/80 backdrop-blur-sm p-4 sm:p-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(St.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"liquid-glass border border-yellow-500/30 w-full max-w-md rounded-3xl p-6 relative shadow-2xl space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-yellow-100",children:[u.jsx(zn,{className:"w-5 h-5 text-yellow-400"}),"Magic Generator"]}),u.jsx("button",{onClick:()=>W(!1),className:"bg-white/10 p-2 rounded-full hover:bg-white/20",children:u.jsx(_i,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex gap-2 justify-center py-4",children:[P.map(F=>{const at=m.find(pt=>pt.id===F);return at?u.jsx("img",{src:at.image_url,className:"w-16 h-16 rounded-lg object-cover border-2 border-yellow-500/50"},F):null}),P.length<2&&u.jsx("div",{className:"w-16 h-16 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:u.jsx(du,{className:"w-6 h-6 text-white/20"})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-xs uppercase text-white/50 tracking-wider",children:"Imagine..."}),u.jsx("textarea",{value:J,onChange:F=>$(F.target.value),placeholder:"Us as astronauts on Mars...",className:"w-full bg-black/30 border border-white/10 rounded-xl p-4 h-24 focus:outline-none focus:border-yellow-500/50 transition-colors resize-none"})]}),u.jsx("button",{onClick:nt,disabled:lt||!J.trim(),className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:scale-[1.02] active:scale-95 transition-all text-lg shadow-lg shadow-orange-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:lt?u.jsxs(u.Fragment,{children:[u.jsx(zn,{className:"w-5 h-5 animate-spin"}),"Brewing Magic..."]}):u.jsxs(u.Fragment,{children:[u.jsx(Ym,{className:"w-5 h-5"}),"Generate Magic Photo"]})})]})})})]})}const Ey=()=>{const{user:f,couple:h,profile:d,partnerProfile:m}=Ze(),[v,x]=j.useState("home"),[b,k]=j.useState(!1),[C,N]=j.useState({youtubeLink:"",videoId:null,voiceFile:null,incomingVibe:null}),[O,E]=j.useState([]),[Z,P]=j.useState(null);j.useEffect(()=>{v==="profile"&&(async()=>{const{data:$}=await et.from("notifications").select("*").eq("user_id",f.id).order("created_at",{ascending:!1}).limit(10);$&&E($)})()},[v,f?.id]);const V=j.useCallback(async J=>{if(J.type==="radio"&&J.metadata?.transmission_id){const{data:$}=await et.from("radio_transmissions").select("*").eq("id",J.metadata.transmission_id).single();$&&(N(lt=>({...lt,incomingVibe:$})),x("dj"))}},[]),B=j.useMemo(()=>Z&&yo[Z]?yo[Z]:h?.streak_count&&[3,7,15,30].includes(h.streak_count)?yo.milestone:B_(d?.mood),[d?.mood,h?.streak_count,Z]),W=j.useMemo(()=>{const J=B.quotes;return J[Math.floor(Math.random()*J.length)]},[B]);return u.jsxs("div",{className:"min-h-screen relative flex flex-col transition-colors duration-1000 ease-in-out",children:[u.jsx(Kp,{theme:B}),B.id==="milestone"&&u.jsx(Jp,{}),u.jsx("div",{className:"absolute top-4 right-4 z-50",children:u.jsx(g0,{})}),u.jsxs("main",{className:"flex-1 overflow-y-auto w-full max-w-md mx-auto p-6 scrollbar-hide relative z-10",children:[u.jsx(va,{active:v==="home",children:u.jsx(W0,{theme:B,quote:W,onGameToggle:k})}),u.jsx(va,{active:v==="prompts",children:u.jsx(ya,{children:u.jsx(Z_,{})})}),u.jsx(va,{active:v==="dj",children:u.jsx(ya,{children:u.jsx(xy,{theme:B,djState:C,setDjState:N})})}),u.jsx(va,{active:v==="calendar",children:u.jsx(ya,{children:u.jsx(Sy,{theme:B})})}),u.jsx(va,{active:v==="notes",children:u.jsx(D_,{})}),u.jsx(va,{active:v==="sleep",children:u.jsx(ya,{children:u.jsx(Ny,{})})}),u.jsx(va,{active:v==="memories",children:u.jsx(ya,{children:u.jsx(Ty,{})})}),u.jsx(va,{active:v==="profile",children:u.jsx(ya,{children:u.jsx(k_,{theme:B,setThemeOverride:P,recentNotifications:O,onNotificationClick:V})})})]}),u.jsx(St.div,{initial:!1,animate:{y:b?120:0,opacity:b?0:1},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 w-full z-50 p-4",children:u.jsxs("div",{className:"liquid-glass max-w-md mx-auto rounded-2xl flex items-center justify-around p-4 shadow-2xl backdrop-blur-xl border border-white/10",children:[u.jsx(_a,{active:v==="home",onClick:()=>x("home"),icon:$v,label:"Home",theme:B}),u.jsx(_a,{active:v==="prompts",onClick:()=>x("prompts"),icon:Pf,label:"Daily Prompts",theme:B}),u.jsx(_a,{active:v==="dj",onClick:()=>x("dj"),icon:nl,label:"Telepathic DJ",theme:B}),u.jsx(_a,{active:v==="calendar",onClick:()=>x("calendar"),icon:Xp,label:"Anticipation",theme:B}),u.jsx(_a,{active:v==="notes",onClick:()=>x("notes"),icon:vo,label:"Serenade",theme:B}),u.jsx(_a,{active:v==="sleep",onClick:()=>x("sleep"),icon:cs,label:"Sleep",theme:B}),u.jsx(_a,{active:v==="memories",onClick:()=>x("memories"),icon:So,label:"Memories",theme:B}),u.jsx(_a,{active:v==="profile",onClick:()=>x("profile"),icon:Rf,label:"Profile",theme:B})]})})]})},_a=({active:f,onClick:h,icon:d,label:m,theme:v})=>u.jsxs("button",{onClick:h,className:`group relative p-2 rounded-xl transition-all ${f?`bg-white/10 ${v.textColor}`:"text-white/40 hover:text-white/70"}`,children:[u.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-black/80 backdrop-blur-md rounded-lg text-[10px] text-white opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap border border-white/5",children:m}),u.jsx(d,{className:"w-6 h-6"})]}),Lf=({children:f})=>{const{user:h,profile:d,couple:m,loading:v,isProfileComplete:x}=Ze();return v?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-love-500",children:u.jsx(t0,{className:"w-8 h-8 animate-spin"})}):h?d&&!x()?window.location.pathname!=="/profile-setup"?u.jsx(ho,{to:"/profile-setup"}):f:d?.couple_id?m&&m.partner_b?window.location.pathname==="/onboarding"?u.jsx(ho,{to:"/"}):f:window.location.pathname!=="/onboarding"?u.jsx(ho,{to:"/onboarding"}):f:window.location.pathname!=="/onboarding"?u.jsx(ho,{to:"/onboarding"}):f:u.jsx(ho,{to:"/auth"})},Cy=()=>u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-rose-50/50 dark:bg-slate-900/50 backdrop-blur-sm",children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-rose-200 border-t-rose-500 animate-spin"}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full animate-pulse"})})]})});class jy extends yi.Component{constructor(h){super(h),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(h){return{hasError:!0,error:h}}componentDidCatch(h,d){console.error("ErrorBoundary caught an error:",h,d),this.setState({errorInfo:d})}handleReload=()=>{window.location.reload()};render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-rose-50 dark:bg-slate-900 p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 text-center space-y-6",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-rose-100 dark:bg-rose-900/30 text-rose-500 mb-4",children:u.jsx(e0,{className:"w-8 h-8"})}),u.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Something went wrong"}),u.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"We encountered an unexpected error. Please try reloading the page."}),!1,u.jsxs("button",{onClick:this.handleReload,className:"inline-flex items-center gap-2 px-6 py-3 bg-rose-500 hover:bg-rose-600 text-white rounded-xl transition-colors duration-200 font-medium w-full justify-center",children:[u.jsx(i0,{className:"w-5 h-5"}),"Reload Page"]})]})}):this.props.children}}const Ay={heartbeat:Gi,radio:nl,memory:So,system:al},Up={heartbeat:"text-rose-400 bg-rose-500/10 border-rose-500/20",radio:"text-indigo-400 bg-indigo-500/10 border-indigo-500/20",memory:"text-purple-400 bg-purple-500/10 border-purple-500/20",system:"text-blue-400 bg-blue-500/10 border-blue-500/20"};function My({notification:f,onClose:h}){j.useEffect(()=>{const v=new Audio("/sounds/notification.mp3");v.volume=.5,v.play().catch(b=>console.error("Audio play failed (user interaction needed first)",b));const x=setTimeout(()=>{h()},5e3);return()=>clearTimeout(x)},[]);const d=Ay[f?.type]||al,m=Up[f?.type]||Up.system;return u.jsx(St.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,x:100,scale:.9},transition:{type:"spring",stiffness:400,damping:25},className:"fixed top-4 right-4 z-[100] w-full max-w-sm",children:u.jsxs("div",{className:`glass-panel p-4 rounded-2xl border backdrop-blur-xl shadow-2xl flex items-start gap-3 ${m}`,children:[u.jsx("div",{className:`p-2 rounded-full ${m.split(" ")[1]}`,children:u.jsx(d,{className:`w-5 h-5 ${m.split(" ")[0]}`})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h4",{className:"font-bold text-white text-sm",children:f?.title||"New Notification"}),u.jsx("p",{className:"text-white/60 text-xs mt-1 leading-relaxed line-clamp-2",children:f?.message}),u.jsx("span",{className:"text-[10px] text-white/30 mt-2 block",children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsx("button",{onClick:h,className:"p-1 hover:bg-white/10 rounded-full transition-colors text-white/40 hover:text-white",children:u.jsx(_i,{className:"w-4 h-4"})})]})})}const zy=()=>null,Oy=yi.lazy(()=>Gf(()=>import("./Auth-3oBDc3zF.js"),__vite__mapDeps([0,1,2,3]))),Ly=yi.lazy(()=>Gf(()=>import("./Onboarding-fBLoyBsW.js"),__vite__mapDeps([4,1,3,2]))),Dy=yi.lazy(()=>Gf(()=>import("./ProfileSetup-BYM9YX3U.js"),__vite__mapDeps([5,1,2,3])));function Ry(){return u.jsx(jv,{children:u.jsx(jy,{children:u.jsx(p0,{children:u.jsx(By,{})})})})}function By(){const{notification:f,removeNotification:h}=Ze();return u.jsxs(u.Fragment,{children:[u.jsx(j.Suspense,{fallback:u.jsx(Cy,{}),children:u.jsxs(Av,{children:[u.jsx(tu,{path:"/auth",element:u.jsx(Oy,{})}),u.jsx(tu,{path:"/profile-setup",element:u.jsx(Lf,{children:u.jsx(Dy,{})})}),u.jsx(tu,{path:"/onboarding",element:u.jsx(Lf,{children:u.jsx(Ly,{})})}),u.jsx(tu,{path:"/",element:u.jsx(Lf,{children:u.jsx(Ey,{})})})]})}),u.jsx(ri,{children:f&&u.jsx(My,{notification:f,onClose:h})}),u.jsx(zy,{})]})}o0.createRoot(document.getElementById("root")).render(u.jsx(j.StrictMode,{children:u.jsx(Ry,{})}));export{et as s,Ze as u};
